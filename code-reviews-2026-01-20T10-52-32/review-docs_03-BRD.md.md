# ğŸ“„ Code Review: `docs/03-BRD.md`

**Generated:** 1/20/2026, 4:22:32 PM
**Project:** AI Visual Code Review
**Review Type:** Individual File Analysis

## ğŸ“Š File Information

**Type:** Documentation ğŸ“–
**Path:** `docs/03-BRD.md`
**Extension:** .md

## ğŸ“ Changes

```diff
@@ -0,0 +1,1212 @@
      1 +# ğŸ“‹ Business Requirements Document (BRD)
      2 +
      3 +## Markdown Preview EE â€” Complete Functional Specification
      4 +
      5 +**Document Type:** Business Requirements Document  
      6 +**Version:** 2.0 (POC-Validated)  
      7 +**Created:** 2026-01-20  
      8 +**Updated:** 2026-01-20  
      9 +**Status:** âœ… APPROVED FOR IMPLEMENTATION
     10 +
     11 +---
     12 +
     13 +## ğŸ”¬ POC Validation Status
     14 +
     15 +```
     16 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     17 +â”‚                                                                              â”‚
     18 +â”‚   ğŸ“‹ POC VALIDATION SUMMARY                                                 â”‚
     19 +â”‚                                                                              â”‚
     20 +â”‚   All critical architectural risks have been validated through POCs:        â”‚
     21 +â”‚                                                                              â”‚
     22 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
     23 +â”‚   â”‚                                                                      â”‚  â”‚
     24 +â”‚   â”‚   âœ… PDF Export Strategy (ADR-001)                                  â”‚  â”‚
     25 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚  â”‚
     26 +â”‚   â”‚   Decision: window.print() with @media print stylesheet             â”‚  â”‚
     27 +â”‚   â”‚   Validation: poc/pdf-export/index.html                             â”‚  â”‚
     28 +â”‚   â”‚   Result: OKLCH colors preserved, zero bundle impact                â”‚  â”‚
     29 +â”‚   â”‚                                                                      â”‚  â”‚
     30 +â”‚   â”‚   âœ… CSS Architecture (Theme Isolation)                             â”‚  â”‚
     31 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚  â”‚
     32 +â”‚   â”‚   Decision: CSS @layer for brand/preview theme separation           â”‚  â”‚
     33 +â”‚   â”‚   Validation: poc/css-architecture/index.html                       â”‚  â”‚
     34 +â”‚   â”‚   Result: No style bleeding, specificity wars eliminated            â”‚  â”‚
     35 +â”‚   â”‚                                                                      â”‚  â”‚
     36 +â”‚   â”‚   âœ… Browser Compatibility Matrix                                   â”‚  â”‚
     37 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚  â”‚
     38 +â”‚   â”‚   Decision: Feature detection + conditional UI                      â”‚  â”‚
     39 +â”‚   â”‚   Validation: docs/05-browser-compatibility.md                      â”‚  â”‚
     40 +â”‚   â”‚   Result: Graceful degradation for Firefox/Safari                   â”‚  â”‚
     41 +â”‚   â”‚                                                                      â”‚  â”‚
     42 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
     43 +â”‚                                                                              â”‚
     44 +â”‚   Engineering Sign-off: Antigravity (Principal Engineer)                    â”‚
     45 +â”‚   Date: 2026-01-20                                                          â”‚
     46 +â”‚                                                                              â”‚
     47 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     48 +```
     49 +
     50 +---
     51 +
     52 +## ğŸ“Œ Executive Summary
     53 +
     54 +```
     55 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     56 +â”‚                                                                              â”‚
     57 +â”‚   PRODUCT: Markdown Preview EE (Enterprise Edition)                         â”‚
     58 +â”‚                                                                              â”‚
     59 +â”‚   MISSION: The most beautiful, feature-rich markdown preview tool           â”‚
     60 +â”‚            that runs entirely in the browser.                               â”‚
     61 +â”‚                                                                              â”‚
     62 +â”‚   KEY DIFFERENTIATORS:                                                      â”‚
     63 +â”‚   â€¢ Zero backend â€” complete privacy                                         â”‚
     64 +â”‚   â€¢ Stunning Candyland brand theme                                          â”‚
     65 +â”‚   â€¢ Multiple preview themes for markdown output                             â”‚
     66 +â”‚   â€¢ AI-powered note organization (BYOK)                                     â”‚
     67 +â”‚   â€¢ Local folder browsing                                                   â”‚
     68 +â”‚   â€¢ Export to PDF with theme preservation                                   â”‚
     69 +â”‚                                                                              â”‚
     70 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     71 +```
     72 +
     73 +---
     74 +
     75 +## ğŸ¯ Product Vision
     76 +
     77 +### Problem Statement
     78 +
     79 +Developers, writers, and students need to preview markdown files, but existing tools are:
     80 +- **Ugly** â€” Cold, corporate, utilitarian interfaces
     81 +- **Limited** â€” Missing mermaid diagrams, math rendering, or advanced features
     82 +- **Complicated** â€” Require installation, accounts, or subscriptions
     83 +- **Disconnected** â€” Can't work with local files easily
     84 +
     85 +### Solution
     86 +
     87 +**Markdown Preview EE** is a browser-based markdown editor that:
     88 +- Looks beautiful (Candyland brand theme)
     89 +- Works offline
     90 +- Offers multiple preview themes
     91 +- Supports advanced markdown features
     92 +- Requires no account or backend
     93 +
     94 +---
     95 +
     96 +## ğŸ›ï¸ Architecture: Dual Theming System
     97 +
     98 +### CRITICAL CONCEPT: Two Separate Theme Systems
     99 +
    100 +```
    101 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    102 +â”‚                                                                              â”‚
    103 +â”‚   ğŸ¨ DUAL THEMING ARCHITECTURE                                              â”‚
    104 +â”‚                                                                              â”‚
    105 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    106 +â”‚   â”‚                                                                      â”‚  â”‚
    107 +â”‚   â”‚   THEME TYPE 1: BRAND THEME (Application Chrome)                    â”‚  â”‚
    108 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                     â”‚  â”‚
    109 +â”‚   â”‚                                                                      â”‚  â”‚
    110 +â”‚   â”‚   â€¢ Controls: Toolbar, Sidebar, Modals, Buttons, Header, Footer     â”‚  â”‚
    111 +â”‚   â”‚   â€¢ Source: Candyland Design System (brand-theme.md)                â”‚  â”‚
    112 +â”‚   â”‚   â€¢ Modes: Light ("Sugar Rush") / Dark ("Midnight Confetti")        â”‚  â”‚
    113 +â”‚   â”‚   â€¢ Scope: ENTIRE APPLICATION EXCEPT PREVIEW AREA                   â”‚  â”‚
    114 +â”‚   â”‚   â€¢ User Control: Light/Dark toggle only                            â”‚  â”‚
    115 +â”‚   â”‚                                                                      â”‚  â”‚
    116 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
    117 +â”‚   â”‚                                                                      â”‚  â”‚
    118 +â”‚   â”‚   THEME TYPE 2: PREVIEW THEME (Markdown Output)                     â”‚  â”‚
    119 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                      â”‚  â”‚
    120 +â”‚   â”‚                                                                      â”‚  â”‚
    121 +â”‚   â”‚   â€¢ Controls: ONLY the rendered markdown preview                    â”‚  â”‚
    122 +â”‚   â”‚   â€¢ Source: User-selectable from theme library                      â”‚  â”‚
    123 +â”‚   â”‚   â€¢ Options: GitHub, Notion, Bear, iA Writer, Custom, etc.          â”‚  â”‚
    124 +â”‚   â”‚   â€¢ Scope: PREVIEW PANE ONLY (including in split view)              â”‚  â”‚
    125 +â”‚   â”‚   â€¢ User Control: Full theme selection                              â”‚  â”‚
    126 +â”‚   â”‚                                                                      â”‚  â”‚
    127 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    128 +â”‚                                                                              â”‚
    129 +â”‚   WHY? Users want:                                                          â”‚
    130 +â”‚   â€¢ Consistent app experience (always Candyland)                            â”‚
    131 +â”‚   â€¢ Flexible preview styling (match their documentation needs)              â”‚
    132 +â”‚   â€¢ PDF export that looks like their chosen preview theme                   â”‚
    133 +â”‚                                                                              â”‚
    134 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    135 +```
    136 +
    137 +### Visual Representation
    138 +
    139 +```
    140 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    141 +â”‚                                                                              â”‚
    142 +â”‚   â”Œâ”€ BRAND THEME (Candyland) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    143 +â”‚   â”‚                                                                      â”‚  â”‚
    144 +â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    145 +â”‚   â”‚   â”‚  ğŸ¬ Markdown Preview EE          [â˜€ï¸/ğŸŒ™] [âš™ï¸]              â”‚    â”‚  â”‚
    146 +â”‚   â”‚   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚  â”‚
    147 +â”‚   â”‚   â”‚                                                             â”‚    â”‚  â”‚
    148 +â”‚   â”‚   â”‚   [ğŸ“ Open] [ğŸ’¾ Save] [ğŸ“¤ Export] [âœ¨ AI Organize]         â”‚    â”‚  â”‚
    149 +â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
    150 +â”‚   â”‚                                                                      â”‚  â”‚
    151 +â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
    152 +â”‚   â”‚   â”‚              â”‚  â”‚                                         â”‚     â”‚  â”‚
    153 +â”‚   â”‚   â”‚   SIDEBAR    â”‚  â”‚   â”Œâ”€ PREVIEW THEME (User Selected) â”€â”€â” â”‚     â”‚  â”‚
    154 +â”‚   â”‚   â”‚   (Brand)    â”‚  â”‚   â”‚                                   â”‚ â”‚     â”‚  â”‚
    155 +â”‚   â”‚   â”‚              â”‚  â”‚   â”‚   # My Document                   â”‚ â”‚     â”‚  â”‚
    156 +â”‚   â”‚   â”‚   ğŸ“‚ docs/   â”‚  â”‚   â”‚                                   â”‚ â”‚     â”‚  â”‚
    157 +â”‚   â”‚   â”‚     ğŸ“„ api   â”‚  â”‚   â”‚   This is **bold** text.         â”‚ â”‚     â”‚  â”‚
    158 +â”‚   â”‚   â”‚     ğŸ“„ guide â”‚  â”‚   â”‚                                   â”‚ â”‚     â”‚  â”‚
    159 +â”‚   â”‚   â”‚              â”‚  â”‚   â”‚   ```javascript                   â”‚ â”‚     â”‚  â”‚
    160 +â”‚   â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚   â”‚   const x = 42;                   â”‚ â”‚     â”‚  â”‚
    161 +â”‚   â”‚   â”‚              â”‚  â”‚   â”‚   ```                             â”‚ â”‚     â”‚  â”‚
    162 +â”‚   â”‚   â”‚   Theme: â–¼   â”‚  â”‚   â”‚                                   â”‚ â”‚     â”‚  â”‚
    163 +â”‚   â”‚   â”‚   [GitHub]   â”‚  â”‚   â”‚   > Note: Important!              â”‚ â”‚     â”‚  â”‚
    164 +â”‚   â”‚   â”‚              â”‚  â”‚   â”‚                                   â”‚ â”‚     â”‚  â”‚
    165 +â”‚   â”‚   â”‚              â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚  â”‚
    166 +â”‚   â”‚   â”‚              â”‚  â”‚                                         â”‚     â”‚  â”‚
    167 +â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
    168 +â”‚   â”‚                                                                      â”‚  â”‚
    169 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    170 +â”‚                                                                              â”‚
    171 +â”‚   LEGEND:                                                                   â”‚
    172 +â”‚   â•â•â•â•â•â•â•                                                                   â”‚
    173 +â”‚   Outer box (coral/navy) = Brand Theme (Candyland)                         â”‚
    174 +â”‚   Inner preview box (white/dark) = Preview Theme (User-selected)           â”‚
    175 +â”‚                                                                              â”‚
    176 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    177 +```
    178 +
    179 +---
    180 +
    181 +## ğŸ“š Functional Requirements
    182 +
    183 +### FR-1: Core Editor
    184 +
    185 +```
    186 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    187 +â”‚                                                                              â”‚
    188 +â”‚   FR-1: MARKDOWN EDITING                                                    â”‚
    189 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                     â”‚
    190 +â”‚                                                                              â”‚
    191 +â”‚   FR-1.1  Editor Text Input                                                 â”‚
    192 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
    193 +â”‚   â€¢ Large textarea for markdown input                                       â”‚
    194 +â”‚   â€¢ Monospace font (Roboto Mono from brand theme)                          â”‚
    195 +â”‚   â€¢ Syntax highlighting for markdown (optional enhancement)                 â”‚
    196 +â”‚   â€¢ Line numbers (toggleable)                                               â”‚
    197 +â”‚   â€¢ Word wrap enabled by default                                            â”‚
    198 +â”‚                                                                              â”‚
    199 +â”‚   FR-1.2  Real-time Preview                                                 â”‚
    200 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    201 +â”‚   â€¢ Preview updates as user types                                           â”‚
    202 +â”‚   â€¢ Debounced to 300ms to prevent lag                                       â”‚
    203 +â”‚   â€¢ Smooth fade transition on content change                                â”‚
    204 +â”‚                                                                              â”‚
    205 +â”‚   FR-1.3  View Modes                                                        â”‚
    206 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
    207 +â”‚   â€¢ Editor Only: Full-width editor                                          â”‚
    208 +â”‚   â€¢ Preview Only: Full-width preview                                        â”‚
    209 +â”‚   â€¢ Split View: Editor left, Preview right (default)                        â”‚
    210 +â”‚   â€¢ Adjustable split ratio via drag handle                                  â”‚
    211 +â”‚                                                                              â”‚
    212 +â”‚   FR-1.4  Auto-Save                                                         â”‚
    213 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
    214 +â”‚   â€¢ Content saved to localStorage on every change                           â”‚
    215 +â”‚   â€¢ Visual indicator when saved ("Last saved: X seconds ago")               â”‚
    216 +â”‚   â€¢ Restore content on page reload                                          â”‚
    217 +â”‚                                                                              â”‚
    218 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    219 +```
    220 +
    221 +### FR-2: Markdown Rendering
    222 +
    223 +```
    224 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    225 +â”‚                                                                              â”‚
    226 +â”‚   FR-2: MARKDOWN RENDERING                                                  â”‚
    227 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
    228 +â”‚                                                                              â”‚
    229 +â”‚   FR-2.1  Standard Markdown (GFM)                                           â”‚
    230 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
    231 +â”‚   â€¢ Headings (H1-H6)                                                        â”‚
    232 +â”‚   â€¢ Bold, Italic, Strikethrough                                             â”‚
    233 +â”‚   â€¢ Ordered and Unordered Lists                                             â”‚
    234 +â”‚   â€¢ Links and Images                                                        â”‚
    235 +â”‚   â€¢ Blockquotes                                                             â”‚
    236 +â”‚   â€¢ Horizontal Rules                                                        â”‚
    237 +â”‚   â€¢ Inline Code and Code Blocks                                             â”‚
    238 +â”‚   â€¢ Tables (GFM syntax)                                                     â”‚
    239 +â”‚   â€¢ Task Lists (checkboxes)                                                 â”‚
    240 +â”‚   â€¢ Footnotes                                                               â”‚
    241 +â”‚   â€¢ Autolinks (URLs, emails)                                                â”‚
    242 +â”‚                                                                              â”‚
    243 +â”‚   FR-2.2  Syntax Highlighting                                               â”‚
    244 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
    245 +â”‚   â€¢ Code blocks with language detection                                     â”‚
    246 +â”‚   â€¢ 100+ languages supported (Prism.js)                                     â”‚
    247 +â”‚   â€¢ Syntax theme matches Preview Theme                                      â”‚
    248 +â”‚   â€¢ Copy button on code blocks                                              â”‚
    249 +â”‚                                                                              â”‚
    250 +â”‚   FR-2.3  Mermaid Diagrams                                                  â”‚
    251 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    252 +â”‚   â€¢ Flowcharts                                                              â”‚
    253 +â”‚   â€¢ Sequence Diagrams                                                       â”‚
    254 +â”‚   â€¢ Class Diagrams                                                          â”‚
    255 +â”‚   â€¢ Entity Relationship Diagrams                                            â”‚
    256 +â”‚   â€¢ Gantt Charts                                                            â”‚
    257 +â”‚   â€¢ Pie Charts                                                              â”‚
    258 +â”‚   â€¢ Git Graphs                                                              â”‚
    259 +â”‚   â€¢ Diagram theme matches Preview Theme                                     â”‚
    260 +â”‚                                                                              â”‚
    261 +â”‚   FR-2.4  Math/LaTeX Rendering                                              â”‚
    262 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
    263 +â”‚   â€¢ Inline math: $E = mc^2$                                                 â”‚
    264 +â”‚   â€¢ Block math: $$\sum_{i=1}^{n} x_i$$                                      â”‚
    265 +â”‚   â€¢ KaTeX rendering (fast, high-quality)                                    â”‚
    266 +â”‚   â€¢ Font matches Preview Theme where possible                               â”‚
    267 +â”‚                                                                              â”‚
    268 +â”‚   FR-2.5  HTML Sanitization                                                 â”‚
    269 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
    270 +â”‚   â€¢ All rendered HTML sanitized via DOMPurify                               â”‚
    271 +â”‚   â€¢ Whitelist approach (safe tags only)                                     â”‚
    272 +â”‚   â€¢ No script execution                                                     â”‚
    273 +â”‚   â€¢ No external resource loading without consent                            â”‚
    274 +â”‚                                                                              â”‚
    275 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    276 +```
    277 +
    278 +### FR-3: Theme System
    279 +
    280 +```
    281 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    282 +â”‚                                                                              â”‚
    283 +â”‚   FR-3: THEME SYSTEM                                                        â”‚
    284 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                         â”‚
    285 +â”‚                                                                              â”‚
    286 +â”‚   FR-3.1  Brand Theme (Application Chrome)                                  â”‚
    287 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
    288 +â”‚                                                                              â”‚
    289 +â”‚   SCOPE: Everything EXCEPT the preview content area                         â”‚
    290 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
    291 +â”‚   â€¢ Header / Toolbar                                                        â”‚
    292 +â”‚   â€¢ Sidebar / File Browser                                                  â”‚
    293 +â”‚   â€¢ Modals / Dialogs                                                        â”‚
    294 +â”‚   â€¢ Buttons / Inputs                                                        â”‚
    295 +â”‚   â€¢ Editor area background and chrome                                       â”‚
    296 +â”‚   â€¢ Footer / Status bar                                                     â”‚
    297 +â”‚                                                                              â”‚
    298 +â”‚   OPTIONS:                                                                  â”‚
    299 +â”‚   â€¢ Light Mode: "Sugar Rush" (Candyland Light)                              â”‚
    300 +â”‚   â€¢ Dark Mode: "Midnight Confetti" (Candyland Dark)                         â”‚
    301 +â”‚                                                                              â”‚
    302 +â”‚   CONTROL:                                                                  â”‚
    303 +â”‚   â€¢ Toggle button in header (â˜€ï¸/ğŸŒ™ icon)                                    â”‚
    304 +â”‚   â€¢ Respects system preference on first load                                â”‚
    305 +â”‚   â€¢ Persisted in localStorage                                               â”‚
    306 +â”‚                                                                              â”‚
    307 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    308 +â”‚                                                                              â”‚
    309 +â”‚   FR-3.2  Preview Theme (Markdown Output)                                   â”‚
    310 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
    311 +â”‚                                                                              â”‚
    312 +â”‚   SCOPE: ONLY the rendered markdown preview pane                            â”‚
    313 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
    314 +â”‚   â€¢ Markdown prose styling                                                  â”‚
    315 +â”‚   â€¢ Heading styles                                                          â”‚
    316 +â”‚   â€¢ Code block syntax theme                                                 â”‚
    317 +â”‚   â€¢ Table styling                                                           â”‚
    318 +â”‚   â€¢ Blockquote styling                                                      â”‚
    319 +â”‚   â€¢ Link colors                                                             â”‚
    320 +â”‚   â€¢ Mermaid diagram theme                                                   â”‚
    321 +â”‚   â€¢ Math/LaTeX font styling                                                 â”‚
    322 +â”‚                                                                              â”‚
    323 +â”‚   AVAILABLE THEMES:                                                         â”‚
    324 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    325 +â”‚   â”‚ Theme Name     â”‚ Description                                        â”‚  â”‚
    326 +â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
    327 +â”‚   â”‚ GitHub Light   â”‚ Classic GitHub readme style                        â”‚  â”‚
    328 +â”‚   â”‚ GitHub Dark    â”‚ GitHub dark mode                                   â”‚  â”‚
    329 +â”‚   â”‚ Notion Light   â”‚ Clean Notion-like styling                          â”‚  â”‚
    330 +â”‚   â”‚ Notion Dark    â”‚ Notion dark theme                                  â”‚  â”‚
    331 +â”‚   â”‚ iA Writer      â”‚ Minimal, typography-focused                        â”‚  â”‚
    332 +â”‚   â”‚ Bear           â”‚ Bear app-inspired warm theme                       â”‚  â”‚
    333 +â”‚   â”‚ Dracula        â”‚ Popular dark syntax theme                          â”‚  â”‚
    334 +â”‚   â”‚ Solarized      â”‚ Solarized light/dark                               â”‚  â”‚
    335 +â”‚   â”‚ Nord           â”‚ Arctic, cool-toned                                 â”‚  â”‚
    336 +â”‚   â”‚ One Dark       â”‚ Atom One Dark inspired                             â”‚  â”‚
    337 +â”‚   â”‚ Monokai        â”‚ Classic Monokai colors                             â”‚  â”‚
    338 +â”‚   â”‚ Candyland      â”‚ Matches brand theme (default)                      â”‚  â”‚
    339 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    340 +â”‚                                                                              â”‚
    341 +â”‚   CONTROL:                                                                  â”‚
    342 +â”‚   â€¢ Dropdown selector in sidebar or settings                                â”‚
    343 +â”‚   â€¢ Live preview of theme change                                            â”‚
    344 +â”‚   â€¢ Persisted in localStorage                                               â”‚
    345 +â”‚   â€¢ Default: Candyland (matches brand)                                      â”‚
    346 +â”‚                                                                              â”‚
    347 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    348 +â”‚                                                                              â”‚
    349 +â”‚   FR-3.3  Theme Isolation                                                   â”‚
    350 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
    351 +â”‚                                                                              â”‚
    352 +â”‚   CRITICAL REQUIREMENT:                                                     â”‚
    353 +â”‚   Preview theme MUST NOT affect app chrome                                  â”‚
    354 +â”‚   App chrome MUST NOT affect preview                                        â”‚
    355 +â”‚                                                                              â”‚
    356 +â”‚   IMPLEMENTATION:                                                           â”‚
    357 +â”‚   â€¢ Preview rendered inside isolated container                              â”‚
    358 +â”‚   â€¢ Preview CSS scoped with unique prefix (.preview-theme-*)               â”‚
    359 +â”‚   â€¢ Shadow DOM optional for complete isolation                              â”‚
    360 +â”‚   â€¢ CSS custom properties scoped to preview container                       â”‚
    361 +â”‚                                                                              â”‚
    362 +â”‚   EXAMPLE:                                                                  â”‚
    363 +â”‚   ```css                                                                    â”‚
    364 +â”‚   /* Brand Theme (global) */                                                â”‚
    365 +â”‚   :root {                                                                   â”‚
    366 +â”‚     --brand-primary: oklch(0.8677 0.0735 7.0855);                          â”‚
    367 +â”‚     --brand-bg: oklch(0.9809 0.0025 228.7836);                             â”‚
    368 +â”‚   }                                                                         â”‚
    369 +â”‚                                                                              â”‚
    370 +â”‚   /* Preview Theme (scoped) */                                              â”‚
    371 +â”‚   .preview-container[data-theme="github-light"] {                           â”‚
    372 +â”‚     --preview-bg: #ffffff;                                                  â”‚
    373 +â”‚     --preview-text: #24292e;                                                â”‚
    374 +â”‚     --preview-heading: #1f2328;                                             â”‚
    375 +â”‚     --preview-link: #0969da;                                                â”‚
    376 +â”‚   }                                                                         â”‚
    377 +â”‚   ```                                                                       â”‚
    378 +â”‚                                                                              â”‚
    379 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    380 +```
    381 +
    382 +### FR-4: File Operations
    383 +
    384 +```
    385 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    386 +â”‚                                                                              â”‚
    387 +â”‚   FR-4: FILE OPERATIONS                                                     â”‚
    388 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                      â”‚
    389 +â”‚                                                                              â”‚
    390 +â”‚   FR-4.1  Open Single File                                                  â”‚
    391 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    392 +â”‚   â€¢ File picker dialog (native browser)                                     â”‚
    393 +â”‚   â€¢ Accept: .md, .markdown, .txt files                                      â”‚
    394 +â”‚   â€¢ Load content into editor                                                â”‚
    395 +â”‚   â€¢ Remember file name for save operations                                  â”‚
    396 +â”‚                                                                              â”‚
    397 +â”‚   FR-4.2  Open Folder                                                       â”‚
    398 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
    399 +â”‚   â€¢ Folder picker dialog (File System Access API)                           â”‚
    400 +â”‚   â€¢ Display file tree in sidebar                                            â”‚
    401 +â”‚   â€¢ Filter to show only markdown files                                      â”‚
    402 +â”‚   â€¢ Click file to load into editor                                          â”‚
    403 +â”‚   â€¢ Expand/collapse folders                                                 â”‚
    404 +â”‚   â€¢ Refresh button to reload folder contents                                â”‚
    405 +â”‚                                                                              â”‚
    406 +â”‚   FR-4.3  Save File                                                         â”‚
    407 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
    408 +â”‚   â€¢ If opened from folder: Save to original location                        â”‚
    409 +â”‚   â€¢ If new file: "Save As" dialog                                           â”‚
    410 +â”‚   â€¢ Keyboard shortcut: Ctrl/Cmd + S                                         â”‚
    411 +â”‚   â€¢ Visual confirmation on save                                             â”‚
    412 +â”‚                                                                              â”‚
    413 +â”‚   FR-4.4  Create New File                                                   â”‚
    414 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
    415 +â”‚   â€¢ Clear editor with confirmation if unsaved                               â”‚
    416 +â”‚   â€¢ Reset file name to "Untitled.md"                                        â”‚
    417 +â”‚   â€¢ Keyboard shortcut: Ctrl/Cmd + N                                         â”‚
    418 +â”‚                                                                              â”‚
    419 +â”‚   FR-4.5  Drag & Drop                                                       â”‚
    420 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
    421 +â”‚   â€¢ Drop .md file onto editor to open                                       â”‚
    422 +â”‚   â€¢ Visual indicator on drag over                                           â”‚
    423 +â”‚   â€¢ Support multiple files (open first, ignore rest)                        â”‚
    424 +â”‚                                                                              â”‚
    425 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    426 +```
    427 +
    428 +### FR-5: Export
    429 +
    430 +```
    431 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    432 +â”‚                                                                              â”‚
    433 +â”‚   FR-5: EXPORT                                                              â”‚
    434 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•                                                               â”‚
    435 +â”‚                                                                              â”‚
    436 +â”‚   FR-5.1  Export to PDF                                                     â”‚
    437 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
    438 +â”‚   â€¢ Use native browser print dialog (Ctrl/Cmd + P)                          â”‚
    439 +â”‚   â€¢ @media print stylesheet ensures perfect formatting                      â”‚
    440 +â”‚   â€¢ Preserve current preview theme colors (OKLCH supported)                 â”‚
    441 +â”‚   â€¢ Include mermaid diagrams (SVG scales perfectly)                         â”‚
    442 +â”‚   â€¢ User manually selects "Save as PDF" in print dialog                     â”‚
    443 +â”‚   â€¢ Zero bundle size overhead                                               â”‚
    444 +â”‚   â€¢ Headers/Footers controlled by browser print settings                    â”‚
    445 +â”‚                                                                              â”‚
    446 +â”‚   FR-5.2  Export to HTML                                                    â”‚
    447 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
    448 +â”‚   â€¢ Generate standalone HTML file                                           â”‚
    449 +â”‚   â€¢ Embed preview theme CSS inline                                          â”‚
    450 +â”‚   â€¢ Self-contained (no external dependencies)                               â”‚
    451 +â”‚   â€¢ Preserve styling exactly as preview                                     â”‚
    452 +â”‚                                                                              â”‚
    453 +â”‚   FR-5.3  Copy HTML                                                         â”‚
    454 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
    455 +â”‚   â€¢ Copy rendered HTML to clipboard                                         â”‚
    456 +â”‚   â€¢ Useful for pasting into email/docs                                      â”‚
    457 +â”‚   â€¢ Toast notification on copy                                              â”‚
    458 +â”‚                                                                              â”‚
    459 +â”‚   FR-5.4  Copy Markdown                                                     â”‚
    460 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    461 +â”‚   â€¢ Copy raw markdown to clipboard                                          â”‚
    462 +â”‚   â€¢ Toast notification on copy                                              â”‚
    463 +â”‚                                                                              â”‚
    464 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    465 +```
    466 +
    467 +### FR-6: AI Note Organizer
    468 +
    469 +```
    470 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    471 +â”‚                                                                              â”‚
    472 +â”‚   FR-6: AI NOTE ORGANIZER (BYOK)                                            â”‚
    473 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â”‚
    474 +â”‚                                                                              â”‚
    475 +â”‚   FR-6.1  API Key Management                                                â”‚
    476 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
    477 +â”‚   â€¢ User provides their own API key                                         â”‚
    478 +â”‚   â€¢ Supported providers:                                                    â”‚
    479 +â”‚     - OpenAI (GPT-4, GPT-4o-mini)                                          â”‚
    480 +â”‚     - Anthropic (Claude)                                                    â”‚
    481 +â”‚     - Google (Gemini)                                                       â”‚
    482 +â”‚     - Local (Ollama)                                                        â”‚
    483 +â”‚   â€¢ Key stored locally (localStorage, encrypted)                            â”‚
    484 +â”‚   â€¢ Key NEVER sent to our servers                                           â”‚
    485 +â”‚   â€¢ Test connection button                                                  â”‚
    486 +â”‚                                                                              â”‚
    487 +â”‚   FR-6.2  Note Organization                                                 â”‚
    488 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
    489 +â”‚   â€¢ Button: "âœ¨ AI Organize"                                                â”‚
    490 +â”‚   â€¢ Takes current editor content                                            â”‚
    491 +â”‚   â€¢ Sends to AI with strict prompt                                          â”‚
    492 +â”‚   â€¢ Replaces editor content with organized output                           â”‚
    493 +â”‚   â€¢ Undo available (Ctrl/Cmd + Z)                                           â”‚
    494 +â”‚                                                                              â”‚
    495 +â”‚   FR-6.3  Strict Prompt (Non-negotiable Rules)                              â”‚
    496 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
    497 +â”‚   â€¢ PRESERVE ALL INFORMATION                                                â”‚
    498 +â”‚   â€¢ ORGANIZE into logical ## headings                                       â”‚
    499 +â”‚   â€¢ CREATE TABLES for comparisons                                           â”‚
    500 +â”‚   â€¢ USE BLOCKQUOTES for key insights                                        â”‚
    501 +â”‚   â€¢ ADD MERMAID DIAGRAMS where relationships exist                          â”‚
    502 +â”‚   â€¢ USE BULLET POINTS for lists                                             â”‚
    503 +â”‚   â€¢ WRAP CODE in syntax-highlighted blocks                                  â”‚
    504 +â”‚   â€¢ FIX TYPOS only (don't change meaning)                                   â”‚
    505 +â”‚   â€¢ OUTPUT ONLY MARKDOWN                                                    â”‚
    506 +â”‚                                                                              â”‚
    507 +â”‚   FR-6.4  Customization                                                     â”‚
    508 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
    509 +â”‚   â€¢ User can view default prompt                                            â”‚
    510 +â”‚   â€¢ User can add custom instructions (appended)                             â”‚
    511 +â”‚   â€¢ Core safety rules cannot be removed                                     â”‚
    512 +â”‚                                                                              â”‚
    513 +â”‚   FR-6.5  Transparency                                                      â”‚
    514 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
    515 +â”‚   â€¢ Show "before/after" diff option                                         â”‚
    516 +â”‚   â€¢ Undo always available                                                   â”‚
    517 +â”‚   â€¢ Original preserved in undo history                                      â”‚
    518 +â”‚   â€¢ Loading state with cancel option                                        â”‚
    519 +â”‚                                                                              â”‚
    520 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    521 +```
    522 +
    523 +### FR-7: User Settings
    524 +
    525 +```
    526 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    527 +â”‚                                                                              â”‚
    528 +â”‚   FR-7: USER SETTINGS                                                       â”‚
    529 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                        â”‚
    530 +â”‚                                                                              â”‚
    531 +â”‚   FR-7.1  Appearance Settings                                               â”‚
    532 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
    533 +â”‚   â€¢ Brand theme mode (Light/Dark/System)                                    â”‚
    534 +â”‚   â€¢ Preview theme selection (dropdown)                                      â”‚
    535 +â”‚   â€¢ Editor font size (12-24px)                                              â”‚
    536 +â”‚   â€¢ Preview font size (14-20px)                                             â”‚
    537 +â”‚   â€¢ Show line numbers (toggle)                                              â”‚
    538 +â”‚   â€¢ Word wrap (toggle)                                                      â”‚
    539 +â”‚                                                                              â”‚
    540 +â”‚   FR-7.2  Editor Settings                                                   â”‚
    541 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
    542 +â”‚   â€¢ Default view mode (Editor/Preview/Split)                                â”‚
    543 +â”‚   â€¢ Auto-save interval (1s, 2s, 5s, manual)                                 â”‚
    544 +â”‚   â€¢ Tab size (2, 4 spaces)                                                  â”‚
    545 +â”‚   â€¢ Render delay (100ms, 200ms, 300ms)                                      â”‚
    546 +â”‚                                                                              â”‚
    547 +â”‚   FR-7.3  Export Settings                                                   â”‚
    548 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
    549 +â”‚   â€¢ Default PDF page size                                                   â”‚
    550 +â”‚   â€¢ Default PDF margins                                                     â”‚
    551 +â”‚   â€¢ Include page numbers                                                    â”‚
    552 +â”‚   â€¢ Include date in header                                                  â”‚
    553 +â”‚                                                                              â”‚
    554 +â”‚   FR-7.4  AI Settings                                                       â”‚
    555 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
    556 +â”‚   â€¢ API provider selection                                                  â”‚
    557 +â”‚   â€¢ API key (masked input)                                                  â”‚
    558 +â”‚   â€¢ Model selection                                                         â”‚
    559 +â”‚   â€¢ Custom prompt additions                                                 â”‚
    560 +â”‚   â€¢ Clear API key button                                                    â”‚
    561 +â”‚                                                                              â”‚
    562 +â”‚   FR-7.5  Data Settings                                                     â”‚
    563 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
    564 +â”‚   â€¢ Clear all saved content                                                 â”‚
    565 +â”‚   â€¢ Export settings as JSON                                                 â”‚
    566 +â”‚   â€¢ Import settings from JSON                                               â”‚
    567 +â”‚   â€¢ Reset to defaults                                                       â”‚
    568 +â”‚                                                                              â”‚
    569 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    570 +```
    571 +
    572 +### FR-8: Accessibility
    573 +
    574 +```
    575 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    576 +â”‚                                                                              â”‚
    577 +â”‚   FR-8: ACCESSIBILITY                                                       â”‚
    578 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                        â”‚
    579 +â”‚                                                                              â”‚
    580 +â”‚   FR-8.1  Keyboard Navigation                                               â”‚
    581 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
    582 +â”‚   â€¢ All interactive elements focusable                                      â”‚
    583 +â”‚   â€¢ Logical tab order                                                       â”‚
    584 +â”‚   â€¢ Visible focus indicators (Candyland ring color)                         â”‚
    585 +â”‚   â€¢ Keyboard shortcuts for common actions                                   â”‚
    586 +â”‚                                                                              â”‚
    587 +â”‚   Shortcuts:                                                                â”‚
    588 +â”‚   â€¢ Ctrl/Cmd + S: Save                                                      â”‚
    589 +â”‚   â€¢ Ctrl/Cmd + O: Open file                                                 â”‚
    590 +â”‚   â€¢ Ctrl/Cmd + N: New file                                                  â”‚
    591 +â”‚   â€¢ Ctrl/Cmd + E: Toggle view mode                                          â”‚
    592 +â”‚   â€¢ Ctrl/Cmd + P: Export PDF                                                â”‚
    593 +â”‚   â€¢ Ctrl/Cmd + Shift + D: Toggle dark mode                                  â”‚
    594 +â”‚   â€¢ Escape: Close modal                                                     â”‚
    595 +â”‚                                                                              â”‚
    596 +â”‚   FR-8.2  Screen Reader Support                                             â”‚
    597 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
    598 +â”‚   â€¢ Semantic HTML (header, main, nav, aside)                                â”‚
    599 +â”‚   â€¢ ARIA labels on all controls                                             â”‚
    600 +â”‚   â€¢ ARIA live regions for dynamic content                                   â”‚
    601 +â”‚   â€¢ Alt text for images                                                     â”‚
    602 +â”‚   â€¢ Descriptive button labels                                               â”‚
    603 +â”‚                                                                              â”‚
    604 +â”‚   FR-8.3  Visual Accessibility                                              â”‚
    605 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
    606 +â”‚   â€¢ Color contrast ratio â‰¥ 4.5:1 (text)                                     â”‚
    607 +â”‚   â€¢ Color contrast ratio â‰¥ 3:1 (UI components)                              â”‚
    608 +â”‚   â€¢ No information conveyed by color alone                                  â”‚
    609 +â”‚   â€¢ Resizable text (browser zoom support)                                   â”‚
    610 +â”‚   â€¢ Reduced motion support (prefers-reduced-motion)                         â”‚
    611 +â”‚                                                                              â”‚
    612 +â”‚   FR-8.4  WCAG Compliance                                                   â”‚
    613 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
    614 +â”‚   â€¢ Target: WCAG 2.1 Level AA                                               â”‚
    615 +â”‚   â€¢ Automated testing with axe-core                                         â”‚
    616 +â”‚   â€¢ Manual testing with screen readers                                      â”‚
    617 +â”‚                                                                              â”‚
    618 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    619 +```
    620 +
    621 +---
    622 +
    623 +## ğŸ”§ Non-Functional Requirements
    624 +
    625 +### NFR-1: Performance
    626 +
    627 +```
    628 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    629 +â”‚                                                                              â”‚
    630 +â”‚   NFR-1: PERFORMANCE                                                        â”‚
    631 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                         â”‚
    632 +â”‚                                                                              â”‚
    633 +â”‚   NFR-1.1  Load Time                                                        â”‚
    634 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
    635 +â”‚   â€¢ First Contentful Paint: < 1.0s                                          â”‚
    636 +â”‚   â€¢ Largest Contentful Paint: < 1.5s                                        â”‚
    637 +â”‚   â€¢ Time to Interactive: < 2.0s                                             â”‚
    638 +â”‚                                                                              â”‚
    639 +â”‚   NFR-1.2  Render Performance                                               â”‚
    640 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
    641 +â”‚   â€¢ Typing â†’ Preview update: < 100ms perceived                              â”‚
    642 +â”‚   â€¢ Mermaid diagram render: < 500ms                                         â”‚
    643 +â”‚   â€¢ PDF export: < 3s for typical document                                   â”‚
    644 +â”‚                                                                              â”‚
    645 +â”‚   NFR-1.3  Bundle Size                                                      â”‚
    646 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
    647 +â”‚   â€¢ Initial bundle: < 100kb gzipped                                         â”‚
    648 +â”‚   â€¢ Total with lazy-loaded: < 250kb gzipped                                 â”‚
    649 +â”‚   â€¢ Code splitting for Mermaid, KaTeX, Prism                                â”‚
    650 +â”‚                                                                              â”‚
    651 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    652 +```
    653 +
    654 +### NFR-2: Reliability
    655 +
    656 +```
    657 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    658 +â”‚                                                                              â”‚
    659 +â”‚   NFR-2: RELIABILITY                                                        â”‚
    660 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                         â”‚
    661 +â”‚                                                                              â”‚
    662 +â”‚   NFR-2.1  Offline Support                                                  â”‚
    663 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    664 +â”‚   â€¢ App works without internet connection                                   â”‚
    665 +â”‚   â€¢ Service worker caches all assets                                        â”‚
    666 +â”‚   â€¢ Clear offline indicator when disconnected                               â”‚
    667 +â”‚                                                                              â”‚
    668 +â”‚   NFR-2.2  Data Persistence                                                 â”‚
    669 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
    670 +â”‚   â€¢ No data loss on browser crash                                           â”‚
    671 +â”‚   â€¢ Auto-save every 2 seconds                                               â”‚
    672 +â”‚   â€¢ IndexedDB for large file storage                                        â”‚
    673 +â”‚                                                                              â”‚
    674 +â”‚   NFR-2.3  Error Handling                                                   â”‚
    675 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    676 +â”‚   â€¢ Graceful degradation on feature failure                                 â”‚
    677 +â”‚   â€¢ User-friendly error messages                                            â”‚
    678 +â”‚   â€¢ Console logging for debugging                                           â”‚
    679 +â”‚                                                                              â”‚
    680 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    681 +```
    682 +
    683 +### NFR-3: Security
    684 +
    685 +```
    686 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    687 +â”‚                                                                              â”‚
    688 +â”‚   NFR-3: SECURITY                                                           â”‚
    689 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                            â”‚
    690 +â”‚                                                                              â”‚
    691 +â”‚   NFR-3.1  HTML Sanitization                                                â”‚
    692 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
    693 +â”‚   â€¢ DOMPurify on ALL rendered content                                       â”‚
    694 +â”‚   â€¢ No script execution from markdown                                       â”‚
    695 +â”‚   â€¢ Whitelist approach for HTML tags                                        â”‚
    696 +â”‚                                                                              â”‚
    697 +â”‚   NFR-3.2  API Key Security                                                 â”‚
    698 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
    699 +â”‚   â€¢ Keys stored encrypted in localStorage                                   â”‚
    700 +â”‚   â€¢ Keys never transmitted to our servers                                   â”‚
    701 +â”‚   â€¢ Direct browser â†’ AI provider communication                              â”‚
    702 +â”‚                                                                              â”‚
    703 +â”‚   NFR-3.3  Content Security Policy                                          â”‚
    704 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
    705 +â”‚   â€¢ Strict CSP headers in production                                        â”‚
    706 +â”‚   â€¢ No inline scripts                                                       â”‚
    707 +â”‚   â€¢ Limited external resource loading                                       â”‚
    708 +â”‚                                                                              â”‚
    709 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    710 +```
    711 +
    712 +### NFR-4: Compatibility
    713 +
    714 +```
    715 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    716 +â”‚                                                                              â”‚
    717 +â”‚   NFR-4: COMPATIBILITY                                                      â”‚
    718 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                       â”‚
    719 +â”‚                                                                              â”‚
    720 +â”‚   NFR-4.1  Browser Support                                                  â”‚
    721 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
    722 +â”‚   â€¢ Chrome 90+ (full support)                                               â”‚
    723 +â”‚   â€¢ Firefox 90+ (full support)                                              â”‚
    724 +â”‚   â€¢ Safari 15+ (full support)                                               â”‚
    725 +â”‚   â€¢ Edge 90+ (full support)                                                 â”‚
    726 +â”‚   â€¢ Mobile browsers (responsive, touch-friendly)                            â”‚
    727 +â”‚                                                                              â”‚
    728 +â”‚   NFR-4.2  File System Access                                               â”‚
    729 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
    730 +â”‚   â€¢ Chrome/Edge: Full File System Access API                                â”‚
    731 +â”‚   â€¢ Firefox/Safari: Fallback to file input/download                         â”‚
    732 +â”‚   â€¢ Graceful degradation for unsupported APIs                               â”‚
    733 +â”‚                                                                              â”‚
    734 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    735 +```
    736 +
    737 +---
    738 +
    739 +## ğŸ“Š Feature Priority Matrix
    740 +
    741 +```
    742 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    743 +â”‚                                                                              â”‚
    744 +â”‚   ğŸ¯ FEATURE PRIORITY                                                       â”‚
    745 +â”‚                                                                              â”‚
    746 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    747 +â”‚   â”‚                                                                     â”‚   â”‚
    748 +â”‚   â”‚   P0 â€” MUST HAVE (MVP)                                             â”‚   â”‚
    749 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â”‚   â”‚
    750 +â”‚   â”‚   â˜ Markdown editor with live preview                              â”‚   â”‚
    751 +â”‚   â”‚   â˜ Brand theme (Light/Dark Candyland)                             â”‚   â”‚
    752 +â”‚   â”‚   â˜ Auto-save to localStorage                                      â”‚   â”‚
    753 +â”‚   â”‚   â˜ GFM rendering (tables, task lists, etc.)                       â”‚   â”‚
    754 +â”‚   â”‚   â˜ Syntax highlighting (Prism.js)                                 â”‚   â”‚
    755 +â”‚   â”‚   â˜ View modes (Editor/Preview/Split)                              â”‚   â”‚
    756 +â”‚   â”‚                                                                     â”‚   â”‚
    757 +â”‚   â”‚   P1 â€” SHOULD HAVE (v1.0)                                          â”‚   â”‚
    758 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚   â”‚
    759 +â”‚   â”‚   â˜ Preview themes (GitHub, Notion, etc.)                          â”‚   â”‚
    760 +â”‚   â”‚   â˜ Mermaid diagrams                                               â”‚   â”‚
    761 +â”‚   â”‚   â˜ Math/LaTeX rendering (KaTeX)                                   â”‚   â”‚
    762 +â”‚   â”‚   â˜ PDF export with theme                                          â”‚   â”‚
    763 +â”‚   â”‚   â˜ Open file / Save file                                          â”‚   â”‚
    764 +â”‚   â”‚   â˜ Open folder (File System Access API)                           â”‚   â”‚
    765 +â”‚   â”‚                                                                     â”‚   â”‚
    766 +â”‚   â”‚   P2 â€” NICE TO HAVE (v1.x)                                         â”‚   â”‚
    767 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚   â”‚
    768 +â”‚   â”‚   â˜ AI Note Organizer (BYOK)                                       â”‚   â”‚
    769 +â”‚   â”‚   â˜ HTML export                                                    â”‚   â”‚
    770 +â”‚   â”‚   â˜ Custom themes                                                  â”‚   â”‚
    771 +â”‚   â”‚   â˜ Keyboard shortcuts                                             â”‚   â”‚
    772 +â”‚   â”‚   â˜ Settings modal                                                 â”‚   â”‚
    773 +â”‚   â”‚   â˜ Drag & drop files                                              â”‚   â”‚
    774 +â”‚   â”‚                                                                     â”‚   â”‚
    775 +â”‚   â”‚   P3 â€” FUTURE (v2.0+)                                              â”‚   â”‚
    776 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚   â”‚
    777 +â”‚   â”‚   â˜ Sync scroll (editor â†” preview)                                 â”‚   â”‚
    778 +â”‚   â”‚   â˜ Zen mode (distraction-free)                                    â”‚   â”‚
    779 +â”‚   â”‚   â˜ Multiple tabs                                                  â”‚   â”‚
    780 +â”‚   â”‚   â˜ Version history                                                â”‚   â”‚
    781 +â”‚   â”‚   â˜ Collaborative editing                                          â”‚   â”‚
    782 +â”‚   â”‚                                                                     â”‚   â”‚
    783 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    784 +â”‚                                                                              â”‚
    785 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    786 +```
    787 +
    788 +---
    789 +
    790 +## ğŸ“‹ Summary
    791 +
    792 +### Key Requirements Summary
    793 +
    794 +| Category | Requirement | Priority |
    795 +|----------|-------------|----------|
    796 +| **Editor** | Markdown input with live preview | P0 |
    797 +| **Brand Theme** | Candyland Light/Dark (app chrome) | P0 |
    798 +| **Preview Theme** | Multiple selectable themes (preview only) | P1 |
    799 +| **Rendering** | GFM, Mermaid, Math, Syntax Highlighting | P0-P1 |
    800 +| **Files** | Open, Save, Folder Browse | P1 |
    801 +| **Export** | PDF with preview theme | P1 |
    802 +| **AI** | Note Organizer (BYOK) | P2 |
    803 +| **Settings** | User preferences | P2 |
    804 +| **Accessibility** | WCAG 2.1 AA | P1 |
    805 +
    806 +### Theme System Summary
    807 +
    808 +```
    809 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    810 +â”‚                                                                              â”‚
    811 +â”‚   DUAL THEME ARCHITECTURE                                                   â”‚
    812 +â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
    813 +â”‚                                                                              â”‚
    814 +â”‚   BRAND THEME (Candyland)          â”‚  PREVIEW THEME (User Choice)           â”‚
    815 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
    816 +â”‚   â€¢ Header, Toolbar                â”‚  â€¢ Rendered markdown                    â”‚
    817 +â”‚   â€¢ Sidebar, Modals                â”‚  â€¢ Code syntax colors                   â”‚
    818 +â”‚   â€¢ Buttons, Inputs                â”‚  â€¢ Mermaid diagram colors               â”‚
    819 +â”‚   â€¢ Editor chrome                  â”‚  â€¢ Table styling                        â”‚
    820 +â”‚   â€¢ Status bar                     â”‚  â€¢ Blockquote styling                   â”‚
    821 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
    822 +â”‚   Options: Light / Dark            â”‚  Options: GitHub, Notion, Bear,        â”‚
    823 +â”‚                                    â”‚           Dracula, Nord, etc.          â”‚
    824 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
    825 +â”‚   Scope: App shell                 â”‚  Scope: Preview pane ONLY              â”‚
    826 +â”‚                                                                              â”‚
    827 +â”‚   PDF EXPORT: Uses PREVIEW THEME (not brand theme)                          â”‚
    828 +â”‚                                                                              â”‚
    829 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    830 +```
    831 +
    832 +---
    833 +
    834 +## ğŸ”„ Theme Behavior Matrix
    835 +
    836 +### Complete Theme Cascade Logic
    837 +
    838 +```
    839 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    840 +â”‚                                                                              â”‚
    841 +â”‚   ğŸ¨ THEME BEHAVIOR: COMPLETE SPECIFICATION                                 â”‚
    842 +â”‚                                                                              â”‚
    843 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    844 +â”‚   â”‚                                                                      â”‚  â”‚
    845 +â”‚   â”‚   SCENARIO 1: LIGHT MODE + NO PREVIEW THEME SELECTED                â”‚  â”‚
    846 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚  â”‚
    847 +â”‚   â”‚                                                                      â”‚  â”‚
    848 +â”‚   â”‚   Brand Theme: Candyland Light ("Sugar Rush")                       â”‚  â”‚
    849 +â”‚   â”‚   Preview Theme: Candyland Light (DEFAULT FALLBACK)                 â”‚  â”‚
    850 +â”‚   â”‚                                                                      â”‚  â”‚
    851 +â”‚   â”‚   Result: Entire app uses Candyland Light consistently              â”‚  â”‚
    852 +â”‚   â”‚                                                                      â”‚  â”‚
    853 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
    854 +â”‚   â”‚                                                                      â”‚  â”‚
    855 +â”‚   â”‚   SCENARIO 2: LIGHT MODE + PREVIEW THEME SELECTED (e.g., GitHub)    â”‚  â”‚
    856 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚  â”‚
    857 +â”‚   â”‚                                                                      â”‚  â”‚
    858 +â”‚   â”‚   Brand Theme: Candyland Light ("Sugar Rush")                       â”‚  â”‚
    859 +â”‚   â”‚   Preview Theme: GitHub Light                                       â”‚  â”‚
    860 +â”‚   â”‚                                                                      â”‚  â”‚
    861 +â”‚   â”‚   Result:                                                           â”‚  â”‚
    862 +â”‚   â”‚   â€¢ App chrome (toolbar, sidebar, modals) = Candyland Light         â”‚  â”‚
    863 +â”‚   â”‚   â€¢ Markdown preview pane = GitHub Light                            â”‚  â”‚
    864 +â”‚   â”‚   â€¢ Split view preview = GitHub Light                               â”‚  â”‚
    865 +â”‚   â”‚   â€¢ Full preview mode = GitHub Light                                â”‚  â”‚
    866 +â”‚   â”‚                                                                      â”‚  â”‚
    867 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
    868 +â”‚   â”‚                                                                      â”‚  â”‚
    869 +â”‚   â”‚   SCENARIO 3: DARK MODE + NO PREVIEW THEME SELECTED                 â”‚  â”‚
    870 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                â”‚  â”‚
    871 +â”‚   â”‚                                                                      â”‚  â”‚
    872 +â”‚   â”‚   Brand Theme: Candyland Dark ("Midnight Confetti")                 â”‚  â”‚
    873 +â”‚   â”‚   Preview Theme: Candyland Dark (DEFAULT FALLBACK)                  â”‚  â”‚
    874 +â”‚   â”‚                                                                      â”‚  â”‚
    875 +â”‚   â”‚   Result: Entire app uses Candyland Dark consistently               â”‚  â”‚
    876 +â”‚   â”‚                                                                      â”‚  â”‚
    877 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
    878 +â”‚   â”‚                                                                      â”‚  â”‚
    879 +â”‚   â”‚   SCENARIO 4: DARK MODE + PREVIEW THEME SELECTED (e.g., Dracula)    â”‚  â”‚
    880 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚  â”‚
    881 +â”‚   â”‚                                                                      â”‚  â”‚
    882 +â”‚   â”‚   Brand Theme: Candyland Dark ("Midnight Confetti")                 â”‚  â”‚
    883 +â”‚   â”‚   Preview Theme: Dracula                                            â”‚  â”‚
    884 +â”‚   â”‚                                                                      â”‚  â”‚
    885 +â”‚   â”‚   Result:                                                           â”‚  â”‚
    886 +â”‚   â”‚   â€¢ App chrome (toolbar, sidebar, modals) = Candyland Dark          â”‚  â”‚
    887 +â”‚   â”‚   â€¢ Markdown preview pane = Dracula                                 â”‚  â”‚
    888 +â”‚   â”‚   â€¢ Split view preview = Dracula                                    â”‚  â”‚
    889 +â”‚   â”‚   â€¢ Full preview mode = Dracula                                     â”‚  â”‚
    890 +â”‚   â”‚                                                                      â”‚  â”‚
    891 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    892 +â”‚                                                                              â”‚
    893 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    894 +```
    895 +
    896 +### Element-by-Element Theme Ownership
    897 +
    898 +```
    899 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    900 +â”‚                                                                              â”‚
    901 +â”‚   ğŸ“‹ WHAT IS GOVERNED BY WHICH THEME?                                       â”‚
    902 +â”‚                                                                              â”‚
    903 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    904 +â”‚   â”‚                                                                      â”‚  â”‚
    905 +â”‚   â”‚   ğŸ  BRAND THEME (Candyland Light/Dark) GOVERNS:                    â”‚  â”‚
    906 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                     â”‚  â”‚
    907 +â”‚   â”‚                                                                      â”‚  â”‚
    908 +â”‚   â”‚   APPLICATION CHROME:                                               â”‚  â”‚
    909 +â”‚   â”‚   â˜‘ Header / Navigation bar                                         â”‚  â”‚
    910 +â”‚   â”‚   â˜‘ Toolbar (Open, Save, Export, AI Organize buttons)               â”‚  â”‚
    911 +â”‚   â”‚   â˜‘ Sidebar / File browser panel                                    â”‚  â”‚
    912 +â”‚   â”‚   â˜‘ Footer / Status bar                                             â”‚  â”‚
    913 +â”‚   â”‚   â˜‘ View mode toggle buttons                                        â”‚  â”‚
    914 +â”‚   â”‚   â˜‘ Theme selector dropdown (the control itself)                    â”‚  â”‚
    915 +â”‚   â”‚                                                                      â”‚  â”‚
    916 +â”‚   â”‚   EDITOR AREA:                                                      â”‚  â”‚
    917 +â”‚   â”‚   â˜‘ Editor background                                               â”‚  â”‚
    918 +â”‚   â”‚   â˜‘ Editor text (raw markdown)                                      â”‚  â”‚
    919 +â”‚   â”‚   â˜‘ Line numbers                                                    â”‚  â”‚
    920 +â”‚   â”‚   â˜‘ Editor scrollbar styling                                        â”‚  â”‚
    921 +â”‚   â”‚   â˜‘ Split handle / Resizer                                          â”‚  â”‚
    922 +â”‚   â”‚                                                                      â”‚  â”‚
    923 +â”‚   â”‚   MODALS & DIALOGS:                                                 â”‚  â”‚
    924 +â”‚   â”‚   â˜‘ PDF Export modal                                                â”‚  â”‚
    925 +â”‚   â”‚   â˜‘ HTML Export modal                                               â”‚  â”‚
    926 +â”‚   â”‚   â˜‘ Settings modal                                                  â”‚  â”‚
    927 +â”‚   â”‚   â˜‘ AI Note Organizer modal                                         â”‚  â”‚
    928 +â”‚   â”‚   â˜‘ Open Folder confirmation                                        â”‚  â”‚
    929 +â”‚   â”‚   â˜‘ Unsaved changes warning                                         â”‚  â”‚
    930 +â”‚   â”‚   â˜‘ All alert boxes / Toast notifications                           â”‚  â”‚
    931 +â”‚   â”‚   â˜‘ API key input modal                                             â”‚  â”‚
    932 +â”‚   â”‚   â˜‘ Keyboard shortcuts help                                         â”‚  â”‚
    933 +â”‚   â”‚                                                                      â”‚  â”‚
    934 +â”‚   â”‚   FORM ELEMENTS:                                                    â”‚  â”‚
    935 +â”‚   â”‚   â˜‘ All buttons (primary, secondary, ghost)                         â”‚  â”‚
    936 +â”‚   â”‚   â˜‘ All input fields                                                â”‚  â”‚
    937 +â”‚   â”‚   â˜‘ All dropdowns / selects                                         â”‚  â”‚
    938 +â”‚   â”‚   â˜‘ All checkboxes / toggles                                        â”‚  â”‚
    939 +â”‚   â”‚   â˜‘ All radio buttons                                               â”‚  â”‚
    940 +â”‚   â”‚                                                                      â”‚  â”‚
    941 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    942 +â”‚                                                                              â”‚
    943 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    944 +â”‚   â”‚                                                                      â”‚  â”‚
    945 +â”‚   â”‚   ğŸ“„ PREVIEW THEME (User Selected) GOVERNS:                         â”‚  â”‚
    946 +â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚  â”‚
    947 +â”‚   â”‚                                                                      â”‚  â”‚
    948 +â”‚   â”‚   MARKDOWN PREVIEW CONTENT ONLY:                                    â”‚  â”‚
    949 +â”‚   â”‚   â˜‘ Preview pane background                                         â”‚  â”‚
    950 +â”‚   â”‚   â˜‘ Rendered markdown text                                          â”‚  â”‚
    951 +â”‚   â”‚   â˜‘ Heading styles (H1-H6)                                          â”‚  â”‚
    952 +â”‚   â”‚   â˜‘ Paragraph text                                                  â”‚  â”‚
    953 +â”‚   â”‚   â˜‘ Bold, italic, strikethrough styling                             â”‚  â”‚
    954 +â”‚   â”‚   â˜‘ Link colors                                                     â”‚  â”‚
    955 +â”‚   â”‚   â˜‘ Blockquote styling                                              â”‚  â”‚
    956 +â”‚   â”‚   â˜‘ List bullet/number colors                                       â”‚  â”‚
    957 +â”‚   â”‚   â˜‘ Horizontal rule styling                                         â”‚  â”‚
    958 +â”‚   â”‚                                                                      â”‚  â”‚
    959 +â”‚   â”‚   CODE BLOCKS:                                                      â”‚  â”‚
    960 +â”‚   â”‚   â˜‘ Code block background                                           â”‚  â”‚
    961 +â”‚   â”‚   â˜‘ Syntax highlighting colors                                      â”‚  â”‚
    962 +â”‚   â”‚   â˜‘ Inline code styling                                             â”‚  â”‚
    963 +â”‚   â”‚   â˜‘ Copy button styling (inside preview)                            â”‚  â”‚
    964 +â”‚   â”‚                                                                      â”‚  â”‚
    965 +â”‚   â”‚   TABLES:                                                           â”‚  â”‚
    966 +â”‚   â”‚   â˜‘ Table borders                                                   â”‚  â”‚
    967 +â”‚   â”‚   â˜‘ Table header background                                         â”‚  â”‚
    968 +â”‚   â”‚   â˜‘ Table row striping                                              â”‚  â”‚
    969 +â”‚   â”‚   â˜‘ Table cell padding                                              â”‚  â”‚
    970 +â”‚   â”‚                                                                      â”‚  â”‚
    971 +â”‚   â”‚   DIAGRAMS & MATH:                                                  â”‚  â”‚
    972 +â”‚   â”‚   â˜‘ Mermaid diagram colors                                          â”‚  â”‚
    973 +â”‚   â”‚   â˜‘ KaTeX / Math rendering colors                                   â”‚  â”‚
    974 +â”‚   â”‚   â˜‘ Chart colors (if applicable)                                    â”‚  â”‚
    975 +â”‚   â”‚                                                                      â”‚  â”‚
    976 +â”‚   â”‚   APPLIES TO:                                                       â”‚  â”‚
    977 +â”‚   â”‚   â˜‘ Split view preview pane                                         â”‚  â”‚
    978 +â”‚   â”‚   â˜‘ Full preview mode                                               â”‚  â”‚
    979 +â”‚   â”‚   â˜‘ PDF export output                                               â”‚  â”‚
    980 +â”‚   â”‚   â˜‘ HTML export output                                              â”‚  â”‚
    981 +â”‚   â”‚                                                                      â”‚  â”‚
    982 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    983 +â”‚                                                                              â”‚
    984 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    985 +```
    986 +
    987 +### Default/Fallback Behavior
    988 +
    989 +```
    990 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    991 +â”‚                                                                              â”‚
    992 +â”‚   ğŸ”„ FALLBACK LOGIC                                                         â”‚
    993 +â”‚                                                                              â”‚
    994 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    995 +â”‚   â”‚                                                                      â”‚  â”‚
    996 +â”‚   â”‚   IF preview theme NOT explicitly selected:                         â”‚  â”‚
    997 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  â”‚
    998 +â”‚   â”‚   â†’ Use Candyland theme matching current brand mode                 â”‚  â”‚
    999 +â”‚   â”‚                                                                      â”‚  â”‚
    1000 +â”‚   â”‚   Brand Mode: Light â†’ Preview Default: Candyland Light              â”‚  â”‚
    1001 +â”‚   â”‚   Brand Mode: Dark  â†’ Preview Default: Candyland Dark               â”‚  â”‚
    1002 +â”‚   â”‚                                                                      â”‚  â”‚
    1003 +â”‚   â”‚   This ensures visual consistency when user hasn't made a choice.   â”‚  â”‚
    1004 +â”‚   â”‚                                                                      â”‚  â”‚
    1005 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
    1006 +â”‚   â”‚                                                                      â”‚  â”‚
    1007 +â”‚   â”‚   IF preview theme IS explicitly selected:                          â”‚  â”‚
    1008 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚  â”‚
    1009 +â”‚   â”‚   â†’ Use selected theme REGARDLESS of brand mode                     â”‚  â”‚
    1010 +â”‚   â”‚                                                                      â”‚  â”‚
    1011 +â”‚   â”‚   Example: Brand Dark + Preview "GitHub Light" = valid combo        â”‚  â”‚
    1012 +â”‚   â”‚   Example: Brand Light + Preview "Dracula" = valid combo            â”‚  â”‚
    1013 +â”‚   â”‚                                                                      â”‚  â”‚
    1014 +â”‚   â”‚   User may want dark app chrome but light preview for printing.     â”‚  â”‚
    1015 +â”‚   â”‚                                                                      â”‚  â”‚
    1016 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    1017 +â”‚                                                                              â”‚
    1018 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    1019 +```
    1020 +
    1021 +### Visual State Matrix
    1022 +
    1023 +```
    1024 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    1025 +â”‚                                                                              â”‚
    1026 +â”‚   ğŸ“Š THEME STATE MATRIX                                                     â”‚
    1027 +â”‚                                                                              â”‚
    1028 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    1029 +â”‚   â”‚ Brand Mode   â”‚ Preview Set? â”‚ Preview      â”‚ Result               â”‚    â”‚
    1030 +â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
    1031 +â”‚   â”‚ Light        â”‚ No           â”‚ (default)    â”‚ Candyland Light ALL  â”‚    â”‚
    1032 +â”‚   â”‚ Light        â”‚ Yes: GitHub  â”‚ GitHub Light â”‚ Split: CL + GH       â”‚    â”‚
    1033 +â”‚   â”‚ Light        â”‚ Yes: Dracula â”‚ Dracula      â”‚ Split: CL + DR       â”‚    â”‚
    1034 +â”‚   â”‚ Light        â”‚ Yes: Nord    â”‚ Nord         â”‚ Split: CL + ND       â”‚    â”‚
    1035 +â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
    1036 +â”‚   â”‚ Dark         â”‚ No           â”‚ (default)    â”‚ Candyland Dark ALL   â”‚    â”‚
    1037 +â”‚   â”‚ Dark         â”‚ Yes: GitHub  â”‚ GitHub Dark  â”‚ Split: CD + GHD      â”‚    â”‚
    1038 +â”‚   â”‚ Dark         â”‚ Yes: Notion  â”‚ Notion Light â”‚ Split: CD + NL       â”‚    â”‚
    1039 +â”‚   â”‚ Dark         â”‚ Yes: One Darkâ”‚ One Dark     â”‚ Split: CD + OD       â”‚    â”‚
    1040 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    1041 +â”‚                                                                              â”‚
    1042 +â”‚   Legend: CL = Candyland Light, CD = Candyland Dark                         â”‚
    1043 +â”‚           GH = GitHub, DR = Dracula, ND = Nord, etc.                        â”‚
    1044 +â”‚                                                                              â”‚
    1045 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    1046 +```
    1047 +
    1048 +---
    1049 +
    1050 +## âœ… Approval
    1051 +
    1052 +| Role | Name | Date | Signature |
    1053 +|------|------|------|-----------|
    1054 +| Product Owner | | | |
    1055 +| Tech Lead | | | |
    1056 +| UX Lead | | | |
    1057 +| QA Lead | | | |
    1058 +
    1059 +---
    1060 +
    1061 +---
    1062 +
    1063 +## ğŸ› ï¸ Implementation-Ready Specifications
    1064 +
    1065 +### CSS Architecture (POC-Validated)
    1066 +
    1067 +```
    1068 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    1069 +â”‚                                                                              â”‚
    1070 +â”‚   ğŸ¨ CSS LAYER ARCHITECTURE (VALIDATED)                                     â”‚
    1071 +â”‚                                                                              â”‚
    1072 +â”‚   Layer order (lowest to highest priority):                                 â”‚
    1073 +â”‚                                                                              â”‚
    1074 +â”‚   @layer base, theme.app, theme.preview, components, utilities;             â”‚
    1075 +â”‚                                                                              â”‚
    1076 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    1077 +â”‚   â”‚                                                                      â”‚  â”‚
    1078 +â”‚   â”‚   @layer base                                                       â”‚  â”‚
    1079 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚  â”‚
    1080 +â”‚   â”‚   â€¢ CSS reset, typography defaults                                  â”‚  â”‚
    1081 +â”‚   â”‚   â€¢ No colors, just structure                                       â”‚  â”‚
    1082 +â”‚   â”‚                                                                      â”‚  â”‚
    1083 +â”‚   â”‚   @layer theme.app                                                  â”‚  â”‚
    1084 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚  â”‚
    1085 +â”‚   â”‚   â€¢ Candyland brand colors (OKLCH)                                  â”‚  â”‚
    1086 +â”‚   â”‚   â€¢ App chrome: header, toolbar, sidebar, modals                    â”‚  â”‚
    1087 +â”‚   â”‚   â€¢ Light/Dark mode variants via :root.dark                         â”‚  â”‚
    1088 +â”‚   â”‚                                                                      â”‚  â”‚
    1089 +â”‚   â”‚   @layer theme.preview                                              â”‚  â”‚
    1090 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚  â”‚
    1091 +â”‚   â”‚   â€¢ Preview-only styles scoped to .preview-container                â”‚  â”‚
    1092 +â”‚   â”‚   â€¢ Theme variants via [data-theme="github-light"]                  â”‚  â”‚
    1093 +â”‚   â”‚   â€¢ Cannot affect app chrome                                        â”‚  â”‚
    1094 +â”‚   â”‚                                                                      â”‚  â”‚
    1095 +â”‚   â”‚   @layer components                                                 â”‚  â”‚
    1096 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚  â”‚
    1097 +â”‚   â”‚   â€¢ UI components (buttons, inputs, cards)                          â”‚  â”‚
    1098 +â”‚   â”‚   â€¢ Uses brand theme variables                                      â”‚  â”‚
    1099 +â”‚   â”‚                                                                      â”‚  â”‚
    1100 +â”‚   â”‚   @layer utilities                                                  â”‚  â”‚
    1101 +â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚  â”‚
    1102 +â”‚   â”‚   â€¢ Tailwind utilities                                              â”‚  â”‚
    1103 +â”‚   â”‚   â€¢ Override helpers (.hidden, .flex, etc.)                         â”‚  â”‚
    1104 +â”‚   â”‚                                                                      â”‚  â”‚
    1105 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    1106 +â”‚                                                                              â”‚
    1107 +â”‚   BENEFIT: Eliminates specificity wars between themes                       â”‚
    1108 +â”‚                                                                              â”‚
    1109 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    1110 +```
    1111 +
    1112 +### PDF Export Implementation (ADR-001)
    1113 +
    1114 +```
    1115 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    1116 +â”‚                                                                              â”‚
    1117 +â”‚   ğŸ“„ PDF EXPORT STRATEGY (DECIDED)                                          â”‚
    1118 +â”‚                                                                              â”‚
    1119 +â”‚   Method: window.print() + @media print stylesheet                          â”‚
    1120 +â”‚                                                                              â”‚
    1121 +â”‚   WHY THIS APPROACH:                                                        â”‚
    1122 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
    1123 +â”‚   â€¢ âœ… Perfect OKLCH color fidelity (browser native)                        â”‚
    1124 +â”‚   â€¢ âœ… Zero bundle size impact                                              â”‚
    1125 +â”‚   â€¢ âœ… Works offline                                                        â”‚
    1126 +â”‚   â€¢ âœ… Mermaid SVGs scale perfectly                                         â”‚
    1127 +â”‚   â€¢ âœ… KaTeX math renders correctly                                         â”‚
    1128 +â”‚   â€¢ âœ… All preview themes supported                                         â”‚
    1129 +â”‚                                                                              â”‚
    1130 +â”‚   TRADE-OFF ACCEPTED:                                                       â”‚
    1131 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
    1132 +â”‚   User must click "Save as PDF" in print dialog                             â”‚
    1133 +â”‚   â†’ Mitigated with clear in-app guidance                                    â”‚
    1134 +â”‚                                                                              â”‚
    1135 +â”‚   ALTERNATIVES REJECTED:                                                    â”‚
    1136 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
    1137 +â”‚   â€¢ html2pdf.js: Poor OKLCH support, +200kb bundle                         â”‚
    1138 +â”‚   â€¢ Server-side: Violates zero-backend principle                            â”‚
    1139 +â”‚   â€¢ jsPDF direct: No CSS support                                            â”‚
    1140 +â”‚                                                                              â”‚
    1141 +â”‚   PRINT STYLESHEET:                                                         â”‚
    1142 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
    1143 +â”‚   @media print {                                                            â”‚
    1144 +â”‚     .app-chrome { display: none; }                                          â”‚
    1145 +â”‚     .preview-container { padding: 1cm; }                                    â”‚
    1146 +â”‚     * { print-color-adjust: exact; }                                        â”‚
    1147 +â”‚   }                                                                         â”‚
    1148 +â”‚                                                                              â”‚
    1149 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    1150 +```
    1151 +
    1152 +### Browser Compatibility Strategy
    1153 +
    1154 +```
    1155 +â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    1156 +â”‚                                                                              â”‚
    1157 +â”‚   ğŸŒ BROWSER SUPPORT MATRIX                                                 â”‚
    1158 +â”‚                                                                              â”‚
    1159 +â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
    1160 +â”‚   â”‚ Feature      â”‚ Chrome â”‚ Edge   â”‚ Firefoxâ”‚ Safari â”‚ Mobile  â”‚           â”‚
    1161 +â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
    1162 +â”‚   â”‚ Core App     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…      â”‚           â”‚
    1163 +â”‚   â”‚ OKLCH Colors â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…      â”‚           â”‚
    1164 +â”‚   â”‚ CSS Layers   â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…      â”‚           â”‚
    1165 +â”‚   â”‚ Open Folder  â”‚ âœ…     â”‚ âœ…     â”‚ âŒ     â”‚ âŒ     â”‚ âŒ      â”‚           â”‚
    1166 +â”‚   â”‚ Save File    â”‚ âœ…     â”‚ âœ…     â”‚ âš ï¸     â”‚ âš ï¸     â”‚ âš ï¸      â”‚           â”‚
    1167 +â”‚   â”‚ PDF Export   â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…     â”‚ âœ…      â”‚           â”‚
    1168 +â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    1169 +â”‚                                                                              â”‚
    1170 +â”‚   FALLBACK STRATEGY:                                                        â”‚
    1171 +â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
    1172 +â”‚   â€¢ Firefox/Safari: Hide "Open Folder" button                               â”‚
    1173 +â”‚   â€¢ Firefox/Safari: "Save" becomes "Download"                               â”‚
    1174 +â”‚   â€¢ Mobile: Single-pane view, touch-optimized                               â”‚
    1175 +â”‚   â€¢ Feature detection before showing UI                                     â”‚
    1176 +â”‚                                                                              â”‚
    1177 +â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    1178 +```
    1179 +
    1180 +---
    1181 +
    1182 +## âœ… Final Approval
    1183 +
    1184 +| Role | Name | Date | Status |
    1185 +|------|------|------|--------|
    1186 +| Principal Engineer | Antigravity | 2026-01-20 | âœ… APPROVED |
    1187 +| Product Owner | | | Pending |
    1188 +| Tech Lead | | | Pending |
    1189 +| UX Lead | | | Pending |
    1190 +
    1191 +---
    1192 +
    1193 +## ğŸ“š Related Documents
    1194 +
    1195 +| Document | Description | Status |
    1196 +|----------|-------------|--------|
    1197 +| `docs/brand-theme.md` | Candyland Design System | âœ… Complete |
    1198 +| `docs/01-userJourney.md` | User Personas & Journeys | âœ… Complete |
    1199 +| `docs/02-techStack.md` | Technology Stack | âœ… Complete |
    1200 +| `docs/04-engineering-review.md` | Architecture Audit | âœ… Complete |
    1201 +| `docs/05-browser-compatibility.md` | Browser Support Matrix | âœ… Complete |
    1202 +| `docs/06-system-architecture.md` | System Architecture | âœ… Complete |
    1203 +| `docs/adr/ADR-001-pdf-export-strategy.md` | PDF Export Decision | âœ… Decided |
    1204 +| `poc/pdf-export/index.html` | PDF Export POC | âœ… Validated |
    1205 +| `poc/css-architecture/index.html` | CSS Architecture POC | âœ… Validated |
    1206 +
    1207 +---
    1208 +
    1209 +*Business Requirements Document v2.0 (POC-Validated)*  
    1210 +*Created: 2026-01-20*  
    1211 +*Updated: 2026-01-20*  
    1212 +*Status: âœ… APPROVED FOR IMPLEMENTATION*
    1213   No newline at end of file
  1 1214  

```

## ğŸ¤– Comprehensive Review Checklist

### âœ… Code Quality & Standards
- [ ] **Syntax & Formatting**: Consistent indentation, proper spacing
- [ ] **Naming Conventions**: Clear, descriptive variable/function names
- [ ] **Code Structure**: Logical organization, appropriate function size
- [ ] **Documentation**: Clear comments explaining complex logic
- [ ] **Type Safety**: Proper typing (if applicable)

### ğŸ” Logic & Functionality
- [ ] **Algorithm Correctness**: Logic implements requirements correctly
- [ ] **Edge Case Handling**: Boundary conditions properly addressed
- [ ] **Error Handling**: Appropriate try-catch blocks and error messages
- [ ] **Performance**: Efficient algorithms, no unnecessary loops
- [ ] **Memory Management**: Proper cleanup, no memory leaks

### ğŸ› Potential Issues & Bugs
- [ ] **Runtime Errors**: No null/undefined dereferencing
- [ ] **Type Mismatches**: Consistent data types throughout
- [ ] **Race Conditions**: Proper async/await handling
- [ ] **Resource Leaks**: Event listeners, timers properly cleaned up
- [ ] **Off-by-one Errors**: Array/loop bounds correctly handled

### ğŸ”’ Security Considerations
- [ ] **Input Validation**: User inputs properly sanitized
- [ ] **XSS Prevention**: No unsafe HTML injection
- [ ] **Authentication**: Proper access controls if applicable
- [ ] **Data Exposure**: No sensitive information in logs/client
- [ ] **Dependency Security**: No known vulnerable packages

### ğŸ“± User Experience & Accessibility
- [ ] **Responsive Design**: Works on different screen sizes
- [ ] **Loading States**: Proper feedback during operations
- [ ] **Error Messages**: User-friendly error communication
- [ ] **Accessibility**: ARIA labels, keyboard navigation
- [ ] **Performance**: Fast loading, smooth interactions

### ğŸ’¡ Improvement Suggestions

#### Code Organization
- [ ] Consider extracting complex logic into separate functions
- [ ] Evaluate if constants should be moved to configuration
- [ ] Check for code duplication opportunities

#### Performance Optimizations
- [ ] Identify opportunities for memoization
- [ ] Consider lazy loading for heavy operations
- [ ] Evaluate database query efficiency (if applicable)

#### Testing Recommendations
- [ ] Unit tests for core functionality
- [ ] Integration tests for API endpoints
- [ ] Edge case testing scenarios

#### Documentation Needs
- [ ] API documentation updates
- [ ] Code comments for complex algorithms
- [ ] README updates if public interfaces changed

### ğŸ“ Review Notes
*Add your specific feedback, suggestions, and observations here:*

---
*Individual file review generated by AI Visual Code Review v2.0*
*Generated: 2026-01-20T10:52:32.204Z*
