# üîç Code Review - 12/16/2025, 11:23:12 AM

**Project:** AI Visual Code Review
**Generated by:** AI Visual Code Review v2.0

## üìä Change Summary

```
AI_REVIEW.md | 6059 +++-------------------------------------------------------
 script.js    |    9 +-
 style.css    |   12 +-
 3 files changed, 326 insertions(+), 5754 deletions(-)
```

## üìù Files Changed (3/3 selected)


### üìÑ `AI_REVIEW.md`

**Type:** Documentation üìñ

```diff
@@ -1,5770 +1,327 @@
  1     -# üîç Code Review - 12/10/2025, 11:31:29 AM
      1 +# üîç Code Review - 12/16/2025, 11:13:01 AM
  2   2  
  3   3  **Project:** AI Visual Code Review
  4     -**Generated by:** AI Visual Code Review v1.0.0
      4 +**Generated by:** AI Visual Code Review v2.0
  5   5  
  6   6  ## üìä Change Summary
  7   7  
  8   8  ```
  9     - AI_REVIEW.md                   | 4326 ++++++++++++++++++++++++++++++++++------
 10     - animations.css                 |   59 +
 11     - index.html                     |   21 +
 12     - script.js                      |   31 +
 13     - src/js/config/constants.js     |    2 +
 14     - src/js/services/HTMLService.js |   89 +-
 15     - style.css                      |  241 ++-
 16     - themes/nebula-dark.css         |   70 +
 17     - themes/nebula-elements.css     |  419 ++++
 18     - themes/nebula-light.css        |   82 +
 19     - variables.css                  |   78 +
 20     - 11 files changed, 4702 insertions(+), 716 deletions(-)
 21     -
      9 +tests/unit/config/errorMessages.test.js | 300 ++++++++++++++++++++++++++++++++
     10 + 1 file changed, 300 insertions(+)
 22  11  ```
 23  12  
 24     -## üìù Files Changed (11/11 selected)
     13 +## üìù Files Changed (1/1 selected)
 25  14  
 26  15  
 27     -### üìÑ `AI_REVIEW.md`
 28     -
 29     -**Type:** Documentation üìñ
 30     -
 31     -```diff
 32     -@@ -1,4 +1,4 @@
 33     -  1     -# üîç Code Review - 12/9/2025, 7:14:05 PM
 34     -      1 +# üîç Code Review - 12/9/2025, 7:25:42 PM
 35     -  2   2  
 36     -  3   3  **Project:** AI Visual Code Review
 37     -  4   4  **Generated by:** AI Visual Code Review v2.0
 38     -@@ -6,14 +6,14 @@
 39     -  6   6  ## üìä Change Summary
 40     -  7   7  
 41     -  8   8  ```
 42     -  9     -AI_REVIEW.md                   | 2803 ++++++----------------------------------
 43     -      9 +AI_REVIEW.md                   | 5777 +++++++++++++++++++++++-----------------
 44     - 10  10   CODE_REVIEW_AND_FINDINGS.md    |   52 +
 45     - 11  11   SERVICE_AUDIT.md               |   55 +
 46     - 12  12   script.js                      |  112 +-
 47     - 13     - src/js/services/HTMLService.js |  150 +++
 48     - 14     - src/js/services/PDFService.js  |   28 +-
 49     -     13 + src/js/services/HTMLService.js |  159 ++
 50     -     14 + src/js/services/PDFService.js  |   86 +-
 51     - 15  15   style.css                      |   14 +-
 52     - 16     - 7 files changed, 734 insertions(+), 2480 deletions(-)
 53     -     16 + 7 files changed, 3763 insertions(+), 2492 deletions(-)
 54     - 17  17  ```
 55     - 18  18  
 56     - 19  19  ## üìù Files Changed (7/7 selected)
 57     -@@ -26,45 +26,47 @@ AI_REVIEW.md                   | 2803 ++++++----------------------------------
 58     - 26  26  ```diff
 59     - 27  27  @@ -1,4 +1,4 @@
 60     - 28  28    1     -# üîç Code Review - 12/9/2025, 1:15:27 PM
 61     - 29     -      1 +# üîç Code Review - 12/9/2025, 7:03:47 PM
 62     -     29 +      1 +# üîç Code Review - 12/9/2025, 7:14:05 PM
 63     - 30  30    2   2  
 64     - 31  31    3   3  **Project:** AI Visual Code Review
 65     - 32  32    4   4  **Generated by:** AI Visual Code Review v2.0
 66     - 33     -@@ -6,2392 +6,435 @@
 67     -     33 +@@ -6,11 +6,17 @@
 68     - 34  34    6   6  ## üìä Change Summary
 69     - 35  35    7   7  
 70     - 36  36    8   8  ```
 71     - 37  37    9     -AI_REVIEW.md | 2344 ++++------------------------------------------------------
 72     - 38  38   10     - 1 file changed, 130 insertions(+), 2214 deletions(-)
 73     - 39     -      9 +CODE_REVIEW_AND_FINDINGS.md    |  52 ++++++++++++++++++
 74     - 40     -     10 + script.js                      | 112 +++++++-------------------------------
 75     - 41     -     11 + src/js/services/HTMLService.js | 119 +++++++++++++++++++++++++++++++++++++++++
 76     - 42     -     12 + style.css                      |  14 ++---
 77     - 43     -     13 + 4 files changed, 198 insertions(+), 99 deletions(-)
 78     - 44     - 11  14  ```
 79     - 45     - 12  15  
 80     -     39 +      9 +AI_REVIEW.md                   | 2803 ++++++----------------------------------
 81     -     40 +     10 + CODE_REVIEW_AND_FINDINGS.md    |   52 +
 82     -     41 +     11 + SERVICE_AUDIT.md               |   55 +
 83     -     42 +     12 + script.js                      |  112 +-
 84     -     43 +     13 + src/js/services/HTMLService.js |  150 +++
 85     -     44 +     14 + src/js/services/PDFService.js  |   28 +-
 86     -     45 +     15 + style.css                      |   14 +-
 87     -     46 +     16 + 7 files changed, 734 insertions(+), 2480 deletions(-)
 88     -     47 + 11  17  ```
 89     -     48 + 12  18  
 90     - 46  49   13     -## üìù Files Changed (1/1 selected)
 91     - 47     -     16 +## üìù Files Changed (4/4 selected)
 92     - 48     - 14  17  
 93     - 49     - 15  18  
 94     - 50     - 16     -### üìÑ `AI_REVIEW.md`
 95     - 51     -     19 +### ‚ú® `CODE_REVIEW_AND_FINDINGS.md` **[ADDED]**
 96     - 52     -     20 +
 97     - 53     -     21 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
 98     - 54     - 17  22  
 99     - 55     - 18  23  **Type:** Documentation üìñ
100     - 56     - 19  24  
101     - 57     - 20  25  ```diff
102     - 58     - 21     -@@ -1,4 +1,4 @@
103     -     50 +     19 +## üìù Files Changed (7/7 selected)
104     -     51 + 14  20  
105     -     52 + 15  21  
106     -     53 + 16  22  ### üìÑ `AI_REVIEW.md`
107     -     54 +@@ -19,2379 +25,3406 @@ AI_REVIEW.md | 2344 ++++------------------------------------------------------
108     -     55 + 19  25  
109     -     56 + 20  26  ```diff
110     -     57 + 21  27  @@ -1,4 +1,4 @@
111     - 59  58   22     -  1     -# üîç Code Review - 12/9/2025, 9:29:52 AM
112     - 60  59   23     -      1 +# üîç Code Review - 12/9/2025, 1:09:37 PM
113     - 61     - 24     -  2   2  
114     - 62     - 25     -  3   3  **Project:** AI Visual Code Review
115     - 63     - 26     -  4   4  **Generated by:** AI Visual Code Review v2.0
116     -     60 +     28 +  1     -# üîç Code Review - 12/9/2025, 1:15:27 PM
117     -     61 +     29 +      1 +# üîç Code Review - 12/9/2025, 7:03:47 PM
118     -     62 + 24  30    2   2  
119     -     63 + 25  31    3   3  **Project:** AI Visual Code Review
120     -     64 + 26  32    4   4  **Generated by:** AI Visual Code Review v2.0
121     - 64  65   27     -@@ -6,2129 +6,80 @@
122     - 65     - 28     -  6   6  ## üìä Change Summary
123     - 66     - 29     -  7   7  
124     - 67     - 30     -  8   8  ```
125     -     66 +     33 +@@ -6,2392 +6,435 @@
126     -     67 + 28  34    6   6  ## üìä Change Summary
127     -     68 + 29  35    7   7  
128     -     69 + 30  36    8   8  ```
129     - 68  70   31     -  9     -AI_REVIEW.md | 2073 ++++++++++++++++++++++++++++++----------------------------
130     - 69  71   32     - 10     - script.js    |   13 +-
131     - 70  72   33     - 11     - style.css    |   22 +-
132     -@@ -2429,428 +2431,3407 @@ AI_REVIEW.md                   | 2803 ++++++----------------------------------
133     -2429 2431  2392     -2282     -*Files processed: 3/3 | Errors: 0 | Generated: 2025-12-09T03:59:52.431Z*
134     -2430 2432  2393     -    198 +*Files processed: 2/2 | Errors: 0 | Generated: 2025-12-09T07:39:37.871Z*
135     -2431 2433  2394     -2283 199  
136     -2432     -     26 +@@ -0,0 +1,52 @@
137     -2433     -     27 +      1 +# Code & Architecture Review: Export Services
138     -2434     -     28 +      2 +
139     -2435     -     29 +      3 +## 1. Code Review
140     -2436     -     30 +      4 +
141     -2437     -     31 +      5 +### PDFService (PDF Export)
142     -2438     -     32 +      6 +- **Status:** ‚ö†Ô∏è Resolved Rendering Issue
143     -2439     -     33 +      7 +- **Issue:** The `html2pdf` library (specifically `html2canvas`) crashed when parsing modern CSS `color-mix()` functions used in the UI (Glassmorphism).
144     -2440     -     34 +      8 +- **Fix:** Refactored `style.css` to use solid color variables (`var(--bg-secondary)`) instead of `color-mix()` for elements involved in the export context (Buttons).
145     -2441     -     35 +      9 +- **Quality:**
146     -2442     -     36 +     10 +  - ‚úÖ Clean separation of config (`buildHtml2PdfConfig`) and execution.
147     -2443     -     37 +     11 +  - ‚úÖ Robust validation of user inputs (margins, page size).
148     -2444     -     38 +     12 +  - ‚ö†Ô∏è Dependency on global `html2pdf` (should be modular, but acceptable for this architecture).
149     -2445     -     39 +     13 +
150     -2446     -     40 +     14 +### HTMLService (HTML Export)
151     -2447     -     41 +     15 +- **Status:** ‚úÖ NEW Implementation
152     -2448     -     42 +     16 +- **Issue:** Previous implementation was monolithic (inside `script.js`) and produced broken HTML (missing math styles, missing syntax highlighting dependencies).
153     -2449     -     43 +     17 +- **Fix:** Created dedicated `HTMLService.js`.
154     -2450     -     44 +     18 +  - Injects `katex.min.css` (CDN) for Math support.
155     -2451     -     45 +     19 +  - Injects `prism-tomorrow.min.css` (CDN) for Code highlighting.
156     -2452     -     46 +     20 +  - Injects Theme CSS properly.
157     -2453     -     47 +     21 +- **Quality:**
158     -2454     -     48 +     22 +  - ‚úÖ Service-based architecture.
159     -2455     -     49 +     23 +  - ‚úÖ Generates standalone HTML blobs.
160     -2456     -     50 +     24 +
161     -2457     -     51 +     25 +## 2. Architectural Review
162     -2458     -     52 +     26 +
163     -2459     -     53 +     27 +### Service Layer
164     -2460     -     54 +     28 +- **Pattern:** The application uses a "Service Class" pattern (`PDFService`, `MermaidService`, `HTMLService`) instantiated in the main controller (`script.js`).
165     -2461     -     55 +     29 +- **Verdict:** Good. This keeps logic out of the global scope and allows for easier testing/mocking.
166     -2462     -     56 +     30 +- **Recommendation:** `script.js` acts as a text-heavy "God Controller". Future refactoring should split `script.js` into `EditorController`, `PreviewController`, and `ToolbarController`.
167     -2463     -     57 +     31 +
168     -2464     -     58 +     32 +### CSS / Styling
169     -2465     -     59 +     33 +- **Architecture:** CSS Variables (`:root`) used for Theming.
170     -2466     -     60 +     34 +- **Issue:** Modern CSS (`color-mix`) caused compatibility issues with legacy tools (`html2canvas`).
171     -2467     -     61 +     35 +- **Lesson:** When building "Export to PDF" features that rely on DOM parsing, avoid bleeding-edge CSS in exportable elements.
172     -2468     -     62 +     36 +
173     -2469     -     63 +     37 +## 3. UI/UX Review
174     -2470     -     64 +     38 +
175     -2471     -     65 +     39 +### PDF Export
176     -2472     -     66 +     40 +- **Experience:** ‚≠êÔ∏è Premium.
177     -2473     -     67 +     41 +- **Features:** Live Preview, Custom Margins, Page Size, Font Scale.
178     -2474     -     68 +     42 +- **Feedback:** The glassmorphism and animations in the modal are visually pleasing.
179     -2475     -     69 +     43 +
180     -2476     -     70 +     44 +### HTML Export
181     -2477     -     71 +     45 +- **Experience:** üòê Functional.
182     -2478     -     72 +     46 +- **Features:** "Click to Download".
183     -2479     -     73 +     47 +- **Feedback:** Lacks a "Preview" or configuration (e.g., "Exclude CSS?").
184     -2480     -     74 +     48 +- **Improvement:** Could add a simple modal to choose "Self-contained (Base64 images)" vs "Linked".
185     -2481     -     75 +     49 +
186     -2482     -     76 +     50 +## Summary of Findings
187     -2483     -     77 +     51 +- **Critical Fix:** `color-mix` CSS removed to unblock PDF generation.
188     -2484     -     78 +     52 +- **New Feature:** `HTMLService` ensures exported files render Math and Code correctly.
189     -2485     -     79 +     53  
190     -2486     -     80 +
191     -2487     -     81 +```
192     -2488     -     82 +
193     -2489     -     83 +
194     -2490     -     84 +### üìÑ `script.js`
195     -2491     -     85 +
196     -2492     -     86 +**Type:** JavaScript Source File üü®
197     -2493     -     87 +
198     -2494     -     88 +```diff
199     -2495     -     89 +@@ -16,6 +16,7 @@ import Prism from 'prismjs';
200     -2496     -     90 + 16  16  import { StorageManager } from './src/js/core/StorageManager.js';
201     -2497     -     91 + 17  17  import { ThemeManager } from './src/js/core/ThemeManager.js';
202     -2498     -     92 + 18  18  import { FolderBrowserService } from './src/js/services/FolderBrowserService.js';
203     -2499     -     93 +     19 +import { HTMLService } from './src/js/services/HTMLService.js';
204     -2500     -     94 + 19  20  import { MermaidService } from './src/js/services/MermaidService.js';
205     -2501     -     95 + 20  21  import { PDFService } from './src/js/services/PDFService.js';
206     -2502     -     96 + 21  22  import { PrismService } from './src/js/services/PrismService.js';
207     -2503     -     97 +@@ -34,6 +35,7 @@ const themeManager = new ThemeManager(storageManager);
208     -2504     -     98 + 34  35  const mermaidService = new MermaidService();
209     -2505     -     99 + 35  36  const prismService = new PrismService();
210     -2506     -    100 + 36  37  const pdfService = new PDFService();
211     -2507     -    101 +     38 +const htmlService = new HTMLService();
212     -2508     -    102 + 37  39  const folderBrowserService = new FolderBrowserService(storageManager);
213     -2509     -    103 + 38  40  
214     -2510     -    104 + 39  41  // Folder browser state
215     -2511     -    105 +@@ -616,99 +618,25 @@ graph TD
216     -2512     -    106 +616 618    }
217     -2513     -    107 +617 619  
218     -2514     -    108 +618 620    // Export to HTML
219     -2515     -    109 +619     -  function exportHTML() {
220     -2516     -    110 +620     -    const currentTheme = themeSelector.value;
221     -2517     -    111 +621     -    let themeCSS = '';
222     -2518     -    112 +    621 +  async function exportHTML() {
223     -2519     -    113 +    622 +    const originalText = exportHtmlBtn.textContent;
224     -2520     -    114 +    623 +    exportHtmlBtn.textContent = '‚è≥ Exporting...';
225     -2521     -    115 +    624 +    exportHtmlBtn.disabled = true;
226     -2522     -    116 +622 625  
227     -2523     -    117 +623     -    if (currentTheme === 'custom') {
228     -2524     -    118 +624     -      const customTheme = storageManager.getJSON('customTheme');
229     -2525     -    119 +625     -      if (customTheme) {
230     -2526     -    120 +626     -        const theme = customTheme;
231     -2527     -    121 +627     -        themeCSS = ':root {\n';
232     -2528     -    122 +628     -        Object.entries(theme).forEach(([property, value]) => {
233     -2529     -    123 +629     -          themeCSS += `    ${property}: ${value};\n`;
234     -2530     -    124 +630     -        });
235     -2531     -    125 +631     -        themeCSS += '}';
236     -2532     -    126 +632     -      }
237     -2533     -    127 +633     -    } else {
238     -2534     -    128 +634     -      // Fetch theme CSS
239     -2535     -    129 +635     -      fetch(`themes/${currentTheme}.css`)
240     -2536     -    130 +636     -        .then(response => response.text())
241     -2537     -    131 +637     -        .then(css => {
242     -2538     -    132 +638     -          themeCSS = css;
243     -2539     -    133 +639     -          generateHTML();
244     -2540     -    134 +640     -        })
245     -2541     -    135 +641     -        .catch(err => {
246     -2542     -    136 +642     -          console.error('Error loading theme:', err);
247     -2543     -    137 +643     -          generateHTML();
248     -2544     -    138 +644     -        });
249     -2545     -    139 +645     -      return;
250     -2546     -    140 +646     -    }
251     -2547     -    141 +    626 +    try {
252     -2548     -    142 +    627 +      const themeName = themeSelector.value;
253     -2549     -    143 +    628 +      const customTheme = themeName === 'custom' ? storageManager.getJSON('customTheme') : null;
254     -2550     -    144 +647 629  
255     -2551     -    145 +648     -    generateHTML();
256     -2552     -    146 +    630 +      const blob = await htmlService.generateHTML(previewContainer.innerHTML, themeName, customTheme);
257     -2553     -    147 +    631 +      htmlService.downloadHTML(blob, 'markdown-export.html');
258     -2554     -    148 +649 632  
259     -2555     -    149 +650     -    function generateHTML() {
260     -2556     -    150 +651     -      const html = `<!DOCTYPE html>
261     -2557     -    151 +652     -<html>
262     -2558     -    152 +653     -<head>
263     -2559     -    153 +654     -    <meta charset="UTF-8">
264     -2560     -    154 +655     -    <title>Exported Markdown</title>
265     -2561     -    155 +656     -    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
266     -2562     -    156 +657     -    <style>
267     -2563     -    157 +658     -        body {
268     -2564     -    158 +659     -            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
269     -2565     -    159 +660     -            max-width: 800px;
270     -2566     -    160 +661     -            margin: 0 auto;
271     -2567     -    161 +662     -            padding: 40px 20px;
272     -2568     -    162 +663     -            line-height: 1.7;
273     -2569     -    163 +664     -        }
274     -2570     -    164 +665     -
275     -2571     -    165 +666     -        ${themeCSS}
276     -2572     -    166 +667     -
277     -2573     -    167 +668     -        body {
278     -2574     -    168 +669     -            background-color: var(--bg-primary);
279     -2575     -    169 +670     -            color: var(--text-primary);
280     -2576     -    170 +671     -        }
281     -2577     -    171 +672     -
282     -2578     -    172 +673     -        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
283     -2579     -    173 +674     -        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
284     -2580     -    174 +675     -        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
285     -2581     -    175 +676     -        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
286     -2582     -    176 +677     -        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
287     -2583     -    177 +678     -        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
288     -2584     -    178 +679     -
289     -2585     -    179 +680     -        a { color: var(--link-color); text-decoration: none; }
290     -2586     -    180 +681     -        a:hover { color: var(--link-hover); text-decoration: underline; }
291     -2587     -    181 +682     -
292     -2588     -    182 +683     -        strong { color: var(--bold-color); font-weight: 700; }
293     -2589     -    183 +684     -        em { color: var(--italic-color); font-style: italic; }
294     -2590     -    184 +685     -
295     -2591     -    185 +686     -        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
296     -2592     -    186 +687     -        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
297     -2593     -    187 +688     -        pre code { background-color: transparent; color: inherit; padding: 0; }
298     -2594     -    188 +689     -
299     -2595     -    189 +690     -        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
300     -2596     -    190 +691     -
301     -2597     -    191 +692     -        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
302     -2598     -    192 +693     -        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
303     -2599     -    193 +694     -        td { padding: 10px 12px; border: 1px solid var(--table-border); }
304     -2600     -    194 +695     -
305     -2601     -    195 +696     -        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
306     -2602     -    196 +697     -        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
307     -2603     -    197 +698     -    </style>
308     -2604     -    198 +699     -</head>
309     -2605     -    199 +700     -<body>
310     -2606     -    200 +701     -    ${DOMPurify.sanitize(preview.innerHTML)}
311     -2607     -    201 +702     -</body>
312     -2608     -    202 +703     -</html>`;
313     -2609     -    203 +704     -
314     -2610     -    204 +705     -      const blob = new Blob([html], { type: 'text/html' });
315     -2611     -    205 +706     -      const url = URL.createObjectURL(blob);
316     -2612     -    206 +707     -      const a = document.createElement('a');
317     -2613     -    207 +708     -      a.href = url;
318     -2614     -    208 +709     -      a.download = 'markdown-export.html';
319     -2615     -    209 +710     -      a.click();
320     -2616     -    210 +711     -      URL.revokeObjectURL(url);
321     -2617     -    211 +    633 +      console.log('‚úÖ HTML Export successful');
322     -2618     -    212 +    634 +    } catch (error) {
323     -2619     -    213 +    635 +      console.error('HTML Export failed:', error);
324     -2620     -    214 +    636 +      alert('Failed to export HTML: ' + error.message);
325     -2621     -    215 +    637 +    } finally {
326     -2622     -    216 +    638 +      exportHtmlBtn.textContent = originalText;
327     -2623     -    217 +    639 +      exportHtmlBtn.disabled = false;
328     -2624     -    218 +712 640      }
329     -2625     -    219 +713 641    }
330     -2626     -    220 +714 642  
331     -2627     -    221 +@@ -1255,8 +1183,8 @@ graph TD
332     -2628     -    222 +1255 1183      if (!folderBrowserService.isSupported()) {
333     -2629     -    223 +1256 1184        alert(
334     -2630     -    224 +1257 1185          'Folder browsing requires File System Access API.\n\n' +
335     -2631     -    225 +1258     -          'Please use Chrome 86+ or Edge 86+.\n\n' +
336     -2632     -    226 +1259     -          'Firefox and Safari are not currently supported.'
337     -2633     -    227 +    1186 +        'Please use Chrome 86+ or Edge 86+.\n\n' +
338     -2634     -    228 +    1187 +        'Firefox and Safari are not currently supported.'
339     -2635     -    229 +1260 1188        );
340     -2636     -    230 +1261 1189        return;
341     -2637     -    231 +1262 1190      }
342     -2638     -    232 +1263 1191  
343     -2639     -    233 +
344     -2640     -    234 +```
345     -2641     -    235 +
346     -2642     -    236 +
347     -2643     -    237 +### ‚ú® `src/js/services/HTMLService.js` **[ADDED]**
348     -2644     -    238 +
349     -2645     -    239 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
350     -2646     -    240 +
351     -2647     -    241 +**Type:** JavaScript Source File üü®
352     -2648     -    242 +
353     -2649     -    243 +```diff
354     -2650     -    244 +@@ -0,0 +1,119 @@
355     -2651     -    245 +      1 +/**
356     -2652     -    246 +      2 + * HTMLService - HTML Export Service
357     -2653     -    247 +      3 + * Handles generation of standalone HTML files with embedded themes and necessary CDNs.
358     -2654     -    248 +      4 + */
359     -2655     -    249 +      5 +
360     -2656     -    250 +      6 +export class HTMLService {
361     -2657     -    251 +      7 +  /**
362     -2658     -    252 +      8 +   * Generate complete HTML document
363     -2659     -    253 +      9 +   *
364     -2660     -    254 +     10 +   * @param {string} contentHtml - The inner HTML of the preview container
365     -2661     -    255 +     11 +   * @param {string} themeName - Current theme name
366     -2662     -    256 +     12 +   * @param {Object} customTheme - Custom theme object (optional)
367     -2663     -    257 +     13 +   * @returns {Promise<Blob>} HTML Blob
368     -2664     -    258 +     14 +   */
369     -2665     -    259 +     15 +  async generateHTML(contentHtml, themeName, customTheme = null) {
370     -2666     -    260 +     16 +    const themeCSS = await this.getThemeCSS(themeName, customTheme);
371     -2667     -    261 +     17 +
372     -2668     -    262 +     18 +    const html = `<!DOCTYPE html>
373     -2669     -    263 +     19 +<html>
374     -2670     -    264 +     20 +<head>
375     -2671     -    265 +     21 +    <meta charset="UTF-8">
376     -2672     -    266 +     22 +    <title>Exported Markdown</title>
377     -2673     -    267 +     23 +    <!-- Syntax Highlighting -->
378     -2674     -    268 +     24 +    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
379     -2675     -    269 +     25 +    <!-- Math Rendering (KaTeX) -->
380     -2676     -    270 +     26 +    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
381     -2677     -    271 +     27 +    <!-- Mermaid Styles (Basic) -->
382     -2678     -    272 +     28 +    <style>
383     -2679     -    273 +     29 +      .mermaid { display: flex; justify-content: center; margin: 1em 0; }
384     -2680     -    274 +     30 +    </style>
385     -2681     -    275 +     31 +    <style>
386     -2682     -    276 +     32 +        body {
387     -2683     -    277 +     33 +            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
388     -2684     -    278 +     34 +            max-width: 800px;
389     -2685     -    279 +     35 +            margin: 0 auto;
390     -2686     -    280 +     36 +            padding: 40px 20px;
391     -2687     -    281 +     37 +            line-height: 1.7;
392     -2688     -    282 +     38 +        }
393     -2689     -    283 +     39 +
394     -2690     -    284 +     40 +        ${themeCSS}
395     -2691     -    285 +     41 +
396     -2692     -    286 +     42 +        body {
397     -2693     -    287 +     43 +            background-color: var(--bg-primary);
398     -2694     -    288 +     44 +            color: var(--text-primary);
399     -2695     -    289 +     45 +        }
400     -2696     -    290 +     46 +
401     -2697     -    291 +     47 +        /* Base Typography */
402     -2698     -    292 +     48 +        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
403     -2699     -    293 +     49 +        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
404     -2700     -    294 +     50 +        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
405     -2701     -    295 +     51 +        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
406     -2702     -    296 +     52 +        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
407     -2703     -    297 +     53 +        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
408     -2704     -    298 +     54 +
409     -2705     -    299 +     55 +        a { color: var(--link-color); text-decoration: none; }
410     -2706     -    300 +     56 +        a:hover { color: var(--link-hover); text-decoration: underline; }
411     -2707     -    301 +     57 +
412     -2708     -    302 +     58 +        strong { color: var(--bold-color); font-weight: 700; }
413     -2709     -    303 +     59 +        em { color: var(--italic-color); font-style: italic; }
414     -2710     -    304 +     60 +
415     -2711     -    305 +     61 +        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
416     -2712     -    306 +     62 +        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
417     -2713     -    307 +     63 +        pre code { background-color: transparent; color: inherit; padding: 0; }
418     -2714     -    308 +     64 +
419     -2715     -    309 +     65 +        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
420     -2716     -    310 +     66 +
421     -2717     -    311 +     67 +        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
422     -2718     -    312 +     68 +        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
423     -2719     -    313 +     69 +        td { padding: 10px 12px; border: 1px solid var(--table-border); }
424     -2720     -    314 +     70 +
425     -2721     -    315 +     71 +        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
426     -2722     -    316 +     72 +        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
427     -2723     -    317 +     73 +
428     -2724     -    318 +     74 +        /* Lists */
429     -2725     -    319 +     75 +        ul, ol { padding-left: 2em; margin: 1em 0; }
430     -2726     -    320 +     76 +        li { margin: 0.5em 0; }
431     -2727     -    321 +     77 +    </style>
432     -2728     -    322 +     78 +</head>
433     -2729     -    323 +     79 +<body>
434     -2730     -    324 +     80 +    ${contentHtml}
435     -2731     -    325 +     81 +</body>
436     -2732     -    326 +     82 +</html>`;
437     -2733     -    327 +     83 +
438     -2734     -    328 +     84 +    return new Blob([html], { type: 'text/html' });
439     -2735     -    329 +     85 +  }
440     -2736     -    330 +     86 +
441     -2737     -    331 +     87 +  /**
442     -2738     -    332 +     88 +   * Helper to retrieve CSS content
443     -2739     -    333 +     89 +   * @private
444     -2740     -    334 +     90 +   */
445     -2741     -    335 +     91 +  async getThemeCSS(themeName, customTheme) {
446     -2742     -    336 +     92 +    if (themeName === 'custom' && customTheme) {
447     -2743     -    337 +     93 +      let css = ':root {\n';
448     -2744     -    338 +     94 +      Object.entries(customTheme).forEach(([prop, val]) => {
449     -2745     -    339 +     95 +        css += `    ${prop}: ${val};\n`;
450     -2746     -    340 +     96 +      });
451     -2747     -    341 +     97 +      css += '}';
452     -2748     -    342 +     98 +      return css;
453     -2749     -    343 +     99 +    }
454     -2750     -    344 +    100 +
455     -2751     -    345 +    101 +    try {
456     -2752     -    346 +    102 +      const response = await fetch(`themes/${themeName}.css`);
457     -2753     -    347 +    103 +      if (!response.ok) throw new Error('Theme load failed');
458     -2754     -    348 +    104 +      return await response.text();
459     -2755     -    349 +    105 +    } catch (e) {
460     -2756     -    350 +    106 +      console.error('Failed to load theme CSS', e);
461     -2757     -    351 +    107 +      return ''; // Fallback
462     -2758     -    352 +    108 +    }
463     -2759     -    353 +    109 +  }
464     -2760     -    354 +    110 +
465     -2761     -    355 +    111 +  downloadHTML(blob, filename = 'exported-markdown.html') {
466     -2762     -    356 +    112 +    const url = URL.createObjectURL(blob);
467     -2763     -    357 +    113 +    const a = document.createElement('a');
468     -2764     -    358 +    114 +    a.href = url;
469     -2765     -    359 +    115 +    a.download = filename;
470     -2766     -    360 +    116 +    a.click();
471     -2767     -    361 +    117 +    URL.revokeObjectURL(url);
472     -2768     -    362 +    118 +  }
473     -2769     -    363 +    119 +}
474     -2770     -    364 +    120  
475     -2771     -    365 +
476     -2772     -    366 +```
477     -2773     -    367 +
478     -2774     -    368 +
479     -2775     -    369 +### üìÑ `style.css`
480     -2776     -    370 +
481     -2777     -    371 +**Type:** Stylesheet üé®
482     -2778     -    372 +
483     -2779     -    373 +```diff
484     -2780     -    374 +@@ -24,7 +24,7 @@ body {
485     -2781     -    375 + 24  24  
486     -2782     -    376 + 25  25  /* ==================== TOOLBAR ==================== */
487     -2783     -    377 + 26  26  .toolbar {
488     -2784     -    378 + 27     -  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
489     -2785     -    379 +     27 +  background-color: var(--bg-secondary);
490     -2786     -    380 + 28  28    backdrop-filter: blur(12px);
491     -2787     -    381 + 29  29    -webkit-backdrop-filter: blur(12px);
492     -2788     -    382 + 30  30    border-bottom: 1px solid var(--border-color);
493     -2789     -    383 +@@ -88,7 +88,7 @@ body {
494     -2790     -    384 + 88  88  .btn {
495     -2791     -    385 + 89  89    padding: 8px 16px;
496     -2792     -    386 + 90  90    border: 1px solid var(--border-color);
497     -2793     -    387 + 91     -  background-color: color-mix(in srgb, var(--bg-primary) 80%, transparent);
498     -2794     -    388 +     91 +  background-color: var(--bg-primary);
499     -2795     -    389 + 92  92    backdrop-filter: blur(4px);
500     -2796     -    390 + 93  93    -webkit-backdrop-filter: blur(4px);
501     -2797     -    391 + 94  94    color: var(--text-primary);
502     -2798     -    392 +@@ -503,7 +503,7 @@ body {
503     -2799     -    393 +503 503  }
504     -2800     -    394 +504 504  
505     -2801     -    395 +505 505  .modal-content {
506     -2802     -    396 +506     -  background-color: color-mix(in srgb, var(--bg-primary) 95%, transparent);
507     -2803     -    397 +    506 +  background-color: var(--bg-primary);
508     -2804     -    398 +507 507    backdrop-filter: blur(16px);
509     -2805     -    399 +508 508    -webkit-backdrop-filter: blur(16px);
510     -2806     -    400 +509 509    border-radius: 16px;
511     -2807     -    401 +@@ -823,7 +823,7 @@ body {
512     -2808     -    402 +823 823    width: 280px;
513     -2809     -    403 +824 824    min-width: 100px;
514     -2810     -    404 +825 825    max-width: 600px;
515     -2811     -    405 +826     -  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
516     -2812     -    406 +    826 +  background-color: var(--bg-secondary);
517     -2813     -    407 +827 827    backdrop-filter: blur(12px);
518     -2814     -    408 +828 828    -webkit-backdrop-filter: blur(12px);
519     -2815     -    409 +829 829    border-right: 1px solid var(--border-color);
520     -2816     -    410 +@@ -948,7 +948,7 @@ body {
521     -2817     -    411 +948 948  }
522     -2818     -    412 +949 949  
523     -2819     -    413 +950 950  .tree-item:hover {
524     -2820     -    414 +951     -  background-color: color-mix(in srgb, var(--h1-color) 10%, transparent);
525     -2821     -    415 +    951 +  background-color: var(--bg-tertiary);
526     -2822     -    416 +952 952    transform: translateX(4px);
527     -2823     -    417 +953 953    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
528     -2824     -    418 +954 954  }
529     -2825     -    419 +@@ -1104,7 +1104,7 @@ body {
530     -2826     -    420 +1104 1104  }
531     -2827     -    421 +1105 1105  
532     -2828     -    422 +1106 1106  ::-webkit-scrollbar-thumb {
533     -2829     -    423 +1107     -  background-color: color-mix(in srgb, var(--text-secondary) 30%, transparent);
534     -2830     -    424 +    1107 +  background-color: var(--text-secondary);
535     -2831     -    425 +1108 1108    border-radius: 20px;
536     -2832     -    426 +1109 1109    border: 3px solid transparent;
537     -2833     -    427 +1110 1110    background-clip: content-box;
538     -2834     -    428 +@@ -1112,7 +1112,7 @@ body {
539     -2835     -    429 +1112 1112  }
540     -2836     -    430 +1113 1113  
541     -2837     -    431 +1114 1114  ::-webkit-scrollbar-thumb:hover {
542     -2838     -    432 +1115     -  background-color: color-mix(in srgb, var(--text-secondary) 50%, transparent);
543     -2839     -    433 +    1115 +  background-color: var(--text-secondary);
544     -2840     -    434 +1116 1116  }
545     -2841     -    435 +1117 1117  
546     -2842     -    436 +1118 1118  /* ==================== END ==================== */
547     -2843     -    437 +1119 1119  
548     -2844     -2395 438  
549     -2845     -2396 439  ```
550     -2846     -2397 440  
551     -2847     -@@ -2437,4 +480,4 @@ Please provide specific feedback on:
552     -2848     -2437 480  
553     -2849     -2438 481  ---
554     -2850     -2439 482  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
555     -    2434 +     37 +  9     -AI_REVIEW.md | 2344 ++++------------------------------------------------------
556     -    2435 +     38 + 10     - 1 file changed, 130 insertions(+), 2214 deletions(-)
557     -    2436 +     39 +      9 +CODE_REVIEW_AND_FINDINGS.md    |  52 ++++++++++++++++++
558     -    2437 +     40 +     10 + script.js                      | 112 +++++++-------------------------------
559     -    2438 +     41 +     11 + src/js/services/HTMLService.js | 119 +++++++++++++++++++++++++++++++++++++++++
560     -    2439 +     42 +     12 + style.css                      |  14 ++---
561     -    2440 +     43 +     13 + 4 files changed, 198 insertions(+), 99 deletions(-)
562     -    2441 +     44 + 11  14  ```
563     -    2442 +     45 + 12  15  
564     -    2443 +     46 + 13     -## üìù Files Changed (1/1 selected)
565     -    2444 +     47 +     16 +## üìù Files Changed (4/4 selected)
566     -    2445 +     48 + 14  17  
567     -    2446 +     49 + 15  18  
568     -    2447 +     50 + 16     -### üìÑ `AI_REVIEW.md`
569     -    2448 +     51 +     19 +### ‚ú® `CODE_REVIEW_AND_FINDINGS.md` **[ADDED]**
570     -    2449 +     52 +     20 +
571     -    2450 +     53 +     21 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
572     -    2451 +     54 + 17  22  
573     -    2452 +     55 + 18  23  **Type:** Documentation üìñ
574     -    2453 +     56 + 19  24  
575     -    2454 +     57 + 20  25  ```diff
576     -    2455 +     58 + 21     -@@ -1,4 +1,4 @@
577     -    2456 +     59 + 22     -  1     -# üîç Code Review - 12/9/2025, 9:29:52 AM
578     -    2457 +     60 + 23     -      1 +# üîç Code Review - 12/9/2025, 1:09:37 PM
579     -    2458 +     61 + 24     -  2   2  
580     -    2459 +     62 + 25     -  3   3  **Project:** AI Visual Code Review
581     -    2460 +     63 + 26     -  4   4  **Generated by:** AI Visual Code Review v2.0
582     -    2461 +     64 + 27     -@@ -6,2129 +6,80 @@
583     -    2462 +     65 + 28     -  6   6  ## üìä Change Summary
584     -    2463 +     66 + 29     -  7   7  
585     -    2464 +     67 + 30     -  8   8  ```
586     -    2465 +     68 + 31     -  9     -AI_REVIEW.md | 2073 ++++++++++++++++++++++++++++++----------------------------
587     -    2466 +     69 + 32     - 10     - script.js    |   13 +-
588     -    2467 +     70 + 33     - 11     - style.css    |   22 +-
589     -    2468 +     71 + 34     - 12     - 3 files changed, 1105 insertions(+), 1003 deletions(-)
590     -    2469 +     72 + 35     -      9 +index.html | 39 ++++++++++++++++++++++-----------------
591     -    2470 +     73 + 36     -     10 + script.js  | 23 ++++++++---------------
592     -    2471 +     74 + 37     -     11 + 2 files changed, 30 insertions(+), 32 deletions(-)
593     -    2472 +     75 + 38     - 13  12  ```
594     -    2473 +     76 + 39     - 14  13  
595     -    2474 +     77 + 40     - 15     -## üìù Files Changed (3/3 selected)
596     -    2475 +     78 + 41     -     14 +## üìù Files Changed (2/2 selected)
597     -    2476 +     79 + 42     - 16  15  
598     -    2477 +     80 + 43     - 17  16  
599     -    2478 +     81 + 44     - 18     -### üìÑ `AI_REVIEW.md`
600     -    2479 +     82 + 45     -     17 +### üìÑ `index.html`
601     -    2480 +     83 + 46     - 19  18  
602     -    2481 +     84 + 47     - 20     -**Type:** Documentation üìñ
603     -    2482 +     85 + 48     -     19 +**Type:** HTML Template üåê
604     -    2483 +     86 + 49     - 21  20  
605     -    2484 +     87 + 50     - 22  21  ```diff
606     -    2485 +     88 + 51     - 23     -@@ -1,4 +1,4 @@
607     -    2486 +     89 + 52     - 24     -  1     -# üîç Code Review - 12/9/2025, 9:21:39 AM
608     -    2487 +     90 + 53     - 25     -      1 +# üîç Code Review - 12/9/2025, 9:26:04 AM
609     -    2488 +     91 + 54     - 26     -  2   2  
610     -    2489 +     92 + 55     - 27     -  3   3  **Project:** AI Visual Code Review
611     -    2490 +     93 + 56     - 28     -  4   4  **Generated by:** AI Visual Code Review v2.0
612     -    2491 +     94 + 57     - 29     -@@ -6,9 +6,9 @@
613     -    2492 +     95 + 58     - 30     -  6   6  ## üìä Change Summary
614     -    2493 +     96 + 59     - 31     -  7   7  
615     -    2494 +     97 + 60     - 32     -  8   8  ```
616     -    2495 +     98 + 61     - 33     -  9     -AI_REVIEW.md | 899 +++--------------------------------------------------------
617     -    2496 +     99 + 62     - 34     - 10     - style.css    |  44 ++-
618     -    2497 +    100 + 63     - 35     - 11     - 2 files changed, 71 insertions(+), 872 deletions(-)
619     -    2498 +    101 + 64     - 36     -      9 +AI_REVIEW.md | 1044 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
620     -    2499 +    102 + 65     - 37     -     10 + script.js    |    4 +-
621     -    2500 +    103 + 66     - 38     -     11 + 2 files changed, 1014 insertions(+), 34 deletions(-)
622     -    2501 +    104 + 67     - 39     - 12  12  ```
623     -    2502 +    105 + 68     - 40     - 13  13  
624     -    2503 +    106 + 69     - 41     - 14  14  ## üìù Files Changed (2/2 selected)
625     -    2504 +    107 + 70     - 42     -@@ -20,1008 +20,1093 @@ AI_REVIEW.md | 899 +++--------------------------------------------------------
626     -    2505 +    108 + 71     - 43     - 20  20  
627     -    2506 +    109 + 72     - 44     - 21  21  ```diff
628     -    2507 +    110 + 73     - 45     - 22  22  @@ -1,4 +1,4 @@
629     -    2508 +    111 + 74     - 46     - 23     -  1     -# üîç Code Review - 12/9/2025, 7:37:02 AM
630     -    2509 +    112 + 75     - 47     - 24     -      1 +# üîç Code Review - 12/9/2025, 9:17:49 AM
631     -    2510 +    113 + 76     - 48     -     23 +  1     -# üîç Code Review - 12/9/2025, 9:17:49 AM
632     -    2511 +    114 + 77     - 49     -     24 +      1 +# üîç Code Review - 12/9/2025, 9:21:39 AM
633     -    2512 +    115 + 78     - 50     - 25  25    2   2  
634     -    2513 +    116 + 79     - 51     - 26  26    3   3  **Project:** AI Visual Code Review
635     -    2514 +    117 + 80     - 52     - 27  27    4   4  **Generated by:** AI Visual Code Review v2.0
636     -    2515 +    118 + 81     - 53     - 28     -@@ -6,761 +6,11 @@
637     -    2516 +    119 + 82     - 54     -     28 +@@ -6,44 +6,1022 @@
638     -    2517 +    120 + 83     - 55     - 29  29    6   6  ## üìä Change Summary
639     -    2518 +    121 + 84     - 56     - 30  30    7   7  
640     -    2519 +    122 + 85     - 57     - 31  31    8   8  ```
641     -    2520 +    123 + 86     - 58     - 32     -  9     -AI_REVIEW.md      | 107 ++++++++++---
642     -    2521 +    124 + 87     - 59     - 33     - 10     - package-lock.json | 444 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
643     -    2522 +    125 + 88     - 60     - 34     - 11     - package.json      |   1 +
644     -    2523 +    126 + 89     - 61     - 35     - 12     - script.js         |  39 +++--
645     -    2524 +    127 + 90     - 62     - 36     - 13     - vite.config.js    |   9 +-
646     -    2525 +    128 + 91     - 63     - 37     - 14     - 5 files changed, 555 insertions(+), 45 deletions(-)
647     -    2526 +    129 + 92     - 64     - 38     -      9 +script.js | 11 ++++++++++-
648     -    2527 +    130 + 93     - 65     - 39     -     10 + 1 file changed, 10 insertions(+), 1 deletion(-)
649     -    2528 +    131 + 94     - 66     - 40     - 15  11  ```
650     -    2529 +    132 + 95     - 67     - 41     - 16  12  
651     -    2530 +    133 + 96     - 68     - 42     - 17     -## üìù Files Changed (5/5 selected)
652     -    2531 +    134 + 97     - 69     - 43     - 18     -
653     -    2532 +    135 + 98     - 70     - 44     - 19     -
654     -    2533 +    136 + 99     - 71     - 45     - 20     -### üìÑ `AI_REVIEW.md`
655     -    2534 +    137 +100     - 72     - 46     - 21     -
656     -    2535 +    138 +101     - 73     - 47     - 22     -**Type:** Documentation üìñ
657     -    2536 +    139 +102     - 74     - 48     - 23     -
658     -    2537 +    140 +103     - 75     - 49     - 24     -```diff
659     -    2538 +    141 +104     - 76     - 50     - 25     -@@ -1,4 +1,4 @@
660     -    2539 +    142 +105     - 77     - 51     - 26     -  1     -# üîç Code Review - 12/9/2025, 7:27:41 AM
661     -    2540 +    143 +106     - 78     - 52     - 27     -      1 +# üîç Code Review - 12/9/2025, 7:32:58 AM
662     -    2541 +    144 +107     - 79     - 53     - 28     -  2   2  
663     -    2542 +    145 +108     - 80     - 54     - 29     -  3   3  **Project:** AI Visual Code Review
664     -    2543 +    146 +109     - 81     - 55     - 30     -  4   4  **Generated by:** AI Visual Code Review v2.0
665     -    2544 +    147 +110     - 82     - 56     - 31     -@@ -6,12 +6,13 @@
666     -    2545 +    148 +111     - 83     - 57     - 32     -  6   6  ## üìä Change Summary
667     -    2546 +    149 +112     - 84     - 58     - 33     -  7   7  
668     -    2547 +    150 +113     - 85     - 59     - 34     -  8   8  ```
669     -    2548 +    151 +114     - 86     - 60     - 35     -  9     -AI_REVIEW.md | 18009 ++++++++++++++++++++++++++++++++++++++++++++++++++-------
670     -    2549 +    152 +115     - 87     - 61     - 36     - 10     - script.js    |     5 +-
671     -    2550 +    153 +116     - 88     - 62     - 37     - 11     - 2 files changed, 15932 insertions(+), 2082 deletions(-)
672     -    2551 +    154 +117     - 89     - 63     - 38     -      9 +AI_REVIEW.md | 15943 +--------------------------------------------------------
673     -    2552 +    155 +118     - 90     - 64     - 39     -     10 + script.js    |    14 +-
674     -    2553 +    156 +119     - 91     - 65     - 40     -     11 + style.css    |     2 +-
675     -    2554 +    157 +120     - 92     - 66     - 41     -     12 + 3 files changed, 32 insertions(+), 15927 deletions(-)
676     -    2555 +    158 +121     - 93     - 67     - 42     - 12  13  ```
677     -    2556 +    159 +122     - 94     - 68     - 43     - 13  14  
678     -    2557 +    160 +123     - 95     - 69     - 44     - 14     -## üìù Files Changed (2/2 selected)
679     -    2558 +    161 +124     - 96     - 70     - 45     -     15 +## üìù Files Changed (3/3 selected)
680     -    2559 +    162 +125     - 97     - 71     - 46     - 15  16  
681     -    2560 +    163 +126     - 98     - 72     - 47     - 16  17  
682     -    2561 +    164 +127     - 99     - 73     - 48     - 17  18  ### üìÑ `AI_REVIEW.md`
683     -    2562 +    165 +128     -100     - 74     - 49     -@@ -26,21 +27,85 @@ AI_REVIEW.md | 18009 ++++++++++++++++++++++++++++++++++++++++++++++++++-------
684     -    2563 +    166 +129     -101     - 75     - 50     - 26  27  **Type:** JavaScript Source File üü®
685     -    2564 +    167 +130     -102     - 76     - 51     - 27  28  
686     -    2565 +    168 +131     -103     - 77     - 52     - 28  29  ```diff
687     -    2566 +    169 +132     -104     - 78     - 53     - 29     -@@ -199,10 +199,11 @@ function configureMarkedExtensions() {
688     -    2567 +    170 +133     -105     - 79     - 54     - 30     -199 199          name: 'mathEnvironment',
689     -    2568 +    171 +134     -106     - 80     - 55     - 31     -200 200          level: 'block',
690     -    2569 +    172 +135     -107     - 81     - 56     - 32     -201 201          start(src) {
691     -    2570 +    173 +136     -108     - 82     - 57     - 33     -202     -          return src.match(/^\\begin/)?.index;
692     -    2571 +    174 +137     -109     - 83     - 58     - 34     -    202 +          // Allow whitespace before \begin
693     -    2572 +    175 +138     -110     - 84     - 59     - 35     -    203 +          return src.match(/^\s*\\begin/)?.[0]?.length ? src.search(/\S/) : undefined;
694     -    2573 +    176 +139     -111     - 85     - 60     - 36     -203 204          },
695     -    2574 +    177 +140     -112     - 86     - 61     - 37     -204 205          tokenizer(src) {
696     -    2575 +    178 +141     -113     - 87     - 62     - 38     -205     -          const match = src.match(/^(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
697     -    2576 +    179 +142     -114     - 88     - 63     - 39     -    206 +          const match = src.match(/^\s*(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
698     -    2577 +    180 +143     -115     - 89     - 64     - 40     -206 207            if (match) {
699     -    2578 +    181 +144     -116     - 90     - 65     - 41     -207 208              return {
700     -    2579 +    182 +145     -117     - 91     - 66     - 42     -208 209                type: 'mathEnvironment',
701     -    2580 +    183 +146     -118     - 92     - 67     - 43     -209 210  
702     -    2581 +    184 +147     -119     - 93     - 68     -     30 +@@ -10,10 +10,13 @@ import markedFootnote from 'marked-footnote';
703     -    2582 +    185 +148     -120     - 94     - 69     -     31 + 10  10  import mermaid from 'mermaid';
704     -    2583 +    186 +149     -121     - 95     - 70     -     32 + 11  11  import Prism from 'prismjs';
705     -    2584 +    187 +150     -122     - 96     - 71     -     33 + 12  12  import 'prismjs/components/prism-bash';
706     -    2585 +    188 +151     -123     - 97     - 72     -     34 +     13 +import 'prismjs/components/prism-batch';
707     -    2586 +    189 +152     -124     - 98     - 73     -     35 + 13  14  import 'prismjs/components/prism-c';
708     -    2587 +    190 +153     -125     - 99     - 74     -     36 + 14  15  import 'prismjs/components/prism-cpp';
709     -    2588 +    191 +154     -126     -100     - 75     -     37 + 15  16  import 'prismjs/components/prism-css';
710     -    2589 +    192 +155     -127     -101     - 76     -     38 +     17 +import 'prismjs/components/prism-diff';
711     -    2590 +    193 +156     -128     -102     - 77     -     39 + 16  18  import 'prismjs/components/prism-go';
712     -    2591 +    194 +157     -129     -103     - 78     -     40 +     19 +import 'prismjs/components/prism-ini';
713     -    2592 +    195 +158     -130     -104     - 79     -     41 + 17  20  import 'prismjs/components/prism-java';
714     -    2593 +    196 +159     -131     -105     - 80     -     42 + 18  21  import 'prismjs/components/prism-javascript';
715     -    2594 +    197 +160     -132     -106     - 81     -     43 + 19  22  import 'prismjs/components/prism-json';
716     -    2595 +    198 +161     -133     -107     - 82     -     44 +@@ -200,15 +203,16 @@ function configureMarkedExtensions() {
717     -    2596 +    199 +162     -134     -108     - 83     -     45 +200 203          level: 'block',
718     -    2597 +    200 +163     -135     -109     - 84     -     46 +201 204          start(src) {
719     -    2598 +    201 +164     -136     -110     - 85     -     47 +202 205            // Allow whitespace before \begin
720     -    2599 +    202 +165     -137     -111     - 86     -     48 +203     -          return src.match(/^\s*\\begin/)?.[0]?.length ? src.search(/\S/) : undefined;
721     -    2600 +    203 +166     -138     -112     - 87     -     49 +    206 +          return src.match(/^\s*\\begin/)?.index;
722     -    2601 +    204 +167     -139     -113     - 88     -     50 +204 207          },
723     -    2602 +    205 +168     -140     -114     - 89     -     51 +205 208          tokenizer(src) {
724     -    2603 +    206 +169     -141     -115     - 90     -     52 +    209 +          // Robust regex for LaTeX environments
725     -    2604 +    207 +170     -142     -116     - 91     -     53 +206 210            const match = src.match(/^\s*(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
726     -    2605 +    208 +171     -143     -117     - 92     -     54 +207 211            if (match) {
727     -    2606 +    209 +172     -144     -118     - 93     -     55 +208 212              return {
728     -    2607 +    210 +173     -145     -119     - 94     -     56 +209 213                type: 'mathEnvironment',
729     -    2608 +    211 +174     -146     -120     - 95     -     57 +210 214                raw: match[0],
730     -    2609 +    212 +175     -147     -121     - 96     -     58 +211     -              text: match[1], // Capture the inner content or full block? KaTeX needs full block for environments
731     -    2610 +    213 +176     -148     -122     - 97     -     59 +    215 +              text: match[1],
732     -    2611 +    214 +177     -149     -123     - 98     -     60 +212 216              };
733     -    2612 +    215 +178     -150     -124     - 99     -     61 +213 217            }
734     -    2613 +    216 +179     -151     -125     -100     -     62 +214 218          },
735     -    2614 +    217 +180     -152     -126     -101     -     63 +@@ -518,13 +522,15 @@ graph TD
736     -    2615 +    218 +181     -153     -127     -102     -     64 +518 522        let html = marked.parse(markdownText);
737     -    2616 +    219 +182     -154     -128     -103     -     65 +519 523  
738     -    2617 +    220 +183     -155     -129     -104     -     66 +520 524        // Replace mermaid code blocks with placeholders
739     -    2618 +    221 +184     -156     -130     -105     -     67 +    525 +      // Use 'mermaid-diagram' class to avoid auto-rendering conflicts
740     -    2619 +    222 +185     -157     -131     -106     -     68 +521 526        html = html.replace(
741     -    2620 +    223 +186     -158     -132     -107     -     69 +522 527          /<pre><code class="language-mermaid">([\s\S]*?)<\/code><\/pre>/g,
742     -    2621 +    224 +187     -159     -133     -108     -     70 +523 528          (match, code) => {
743     -    2622 +    225 +188     -160     -134     -109     -     71 +    529 +          // Decode HTML entities before passing to Mermaid
744     -    2623 +    226 +189     -161     -135     -110     -     72 +524 530            const decodedCode = decodeHtmlEntities(code);
745     -    2624 +    227 +190     -162     -136     -111     -     73 +525 531            const id = 'mermaid-' + Math.random().toString(36).substr(2, 9);
746     -    2625 +    228 +191     -163     -137     -112     -     74 +526 532            // Return placeholder div
747     -    2626 +    229 +192     -164     -138     -113     -     75 +527     -          return `<div class="mermaid" id="${id}" data-code="${encodeURIComponent(decodedCode)}">${code}</div>`;
748     -    2627 +    230 +193     -165     -139     -114     -     76 +    533 +          return `<div class="mermaid-diagram" id="${id}" data-code="${encodeURIComponent(decodedCode)}">${code}</div>`;
749     -    2628 +    231 +194     -166     -140     -115     -     77 +528 534          }
750     -    2629 +    232 +195     -167     -141     -116     -     78 +529 535        );
751     -    2630 +    233 +196     -168     -142     -117     -     79 +530 536  
752     -    2631 +    234 +197     -169     -143     -118     -     80 +@@ -538,7 +544,7 @@ graph TD
753     -    2632 +    235 +198     -170     -144     -119     -     81 +538 544        preview.innerHTML = cleanHtml;
754     -    2633 +    236 +199     -171     -145     -120     -     82 +539 545  
755     -    2634 +    237 +200     -172     -146     -121     -     83 +540 546        // Render Mermaid diagrams synchronously after DOM update
756     -    2635 +    238 +201     -173     -147     -122     -     84 +541     -      const mermaidElements = preview.querySelectorAll('.mermaid');
757     -    2636 +    239 +202     -174     -148     -123     -     85 +    547 +      const mermaidElements = preview.querySelectorAll('.mermaid-diagram');
758     -    2637 +    240 +203     -175     -149     -124     -     86 +542 548        mermaidElements.forEach(element => {
759     -    2638 +    241 +204     -176     -150     -125     -     87 +543 549          const id = element.id;
760     -    2639 +    242 +205     -177     -151     -126     -     88 +544 550          const code = decodeURIComponent(element.dataset.code);
761     -    2640 +    243 +206     -178     -152     -127     -     89 +545 551  
762     -    2641 +    244 +207     -179     -153     -128     -     90 +
763     -    2642 +    245 +208     -180     -154     -129     -     91 +```
764     -    2643 +    246 +209     -181     -155     -130     -     92 +
765     -    2644 +    247 +210     -182     -156     -131     -     93 +
766     -    2645 +    248 +211     -183     -157     -132     -     94 +### üìÑ `style.css`
767     -    2646 +    249 +212     -184     -158     -133     -     95 +
768     -    2647 +    250 +213     -185     -159     -134     -     96 +**Type:** Stylesheet üé®
769     -    2648 +    251 +214     -186     -160     -135     -     97 +
770     -    2649 +    252 +215     -187     -161     -136     -     98 +```diff
771     -    2650 +    253 +216     -188     -162     -137     -     99 +@@ -630,7 +630,7 @@ body {
772     -    2651 +    254 +217     -189     -163     -138     -    100 +630 630  }
773     -    2652 +    255 +218     -190     -164     -139     -    101 +631 631  
774     -    2653 +    256 +219     -191     -165     -140     -    102 +632 632  /* ==================== MERMAID DIAGRAMS ==================== */
775     -    2654 +    257 +220     -192     -166     -141     -    103 +633     -.mermaid {
776     -    2655 +    258 +221     -193     -167     -142     -    104 +    633 +.mermaid-diagram {
777     -    2656 +    259 +222     -194     -168     -143     -    105 +634 634    margin: 2em 0;
778     -    2657 +    260 +223     -195     -169     -144     -    106 +635 635    display: flex;
779     -    2658 +    261 +224     -196     -170     -145     -    107 +636 636    justify-content: center;
780     -    2659 +    262 +225     -197     -171     -146     -    108 +637 637  
781     -    2660 +    263 +226     -198     -172     -147     - 44 109  
782     -    2661 +    264 +227     -199     -173     -148     - 45 110  ```
783     -    2662 +    265 +228     -200     -174     -149     - 46 111  
784     -    2663 +    266 +229     -201     -175     -150     -@@ -86,4 +151,4 @@ Please provide specific feedback on:
785     -    2664 +    267 +230     -202     -176     -151     - 86 151  
786     -    2665 +    268 +231     -203     -177     -152     - 87 152  ---
787     -    2666 +    269 +232     -204     -178     -153     - 88 153  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
788     -    2667 +    270 +233     -205     -179     -154     - 89     -*Files processed: 1/2 | Errors: 1 | Generated: 2025-12-09T01:57:41.998Z*
789     -    2668 +    271 +234     -206     -180     -155     -    154 +*Files processed: 2/3 | Errors: 1 | Generated: 2025-12-09T02:02:58.836Z*
790     -    2669 +    272 +235     -207     -181     -156     - 90 155  
791     -    2670 +    273 +236     -208     -182     -157     -
792     -    2671 +    274 +237     -209     -183     -158     -```
793     -    2672 +    275 +238     -210     -184     -159     -
794     -    2673 +    276 +239     -211     -185     -160     -
795     -    2674 +    277 +240     -212     -186     -161     -### üìÑ `package-lock.json`
796     -    2675 +    278 +241     -213     -187     -162     -
797     -    2676 +    279 +242     -214     -188     -163     -**Type:** Configuration/Data File üìã
798     -    2677 +    280 +243     -215     -189     -164     -
799     -    2678 +    281 +244     -216     -190     -165     -```diff
800     -    2679 +    282 +245     -217     -191     -166     -@@ -26,6 +26,7 @@
801     -    2680 +    283 +246     -218     -192     -167     - 26  26          "prettier": "3.6.2",
802     -    2681 +    284 +247     -219     -193     -168     - 27  27          "typescript": "5.9.3",
803     -    2682 +    285 +248     -220     -194     -169     - 28  28          "vite": "7.2.2",
804     -    2683 +    286 +249     -221     -195     -170     -     29 +        "vite-plugin-prismjs": "0.0.11",
805     -    2684 +    287 +250     -222     -196     -171     - 29  30          "vitest": "4.0.8"
806     -    2685 +    288 +251     -223     -197     -172     - 30  31        }
807     -    2686 +    289 +252     -224     -198     -173     - 31  32      },
808     -    2687 +    290 +253     -225     -199     -174     -@@ -93,6 +94,175 @@
809     -    2688 +    291 +254     -226     -200     -175     - 93  94        "dev": true,
810     -    2689 +    292 +255     -227     -201     -176     - 94  95        "license": "MIT"
811     -    2690 +    293 +256     -228     -202     -177     - 95  96      },
812     -    2691 +    294 +257     -229     -203     -178     -     97 +    "node_modules/@babel/code-frame": {
813     -    2692 +    295 +258     -230     -204     -179     -     98 +      "version": "7.27.1",
814     -    2693 +    296 +259     -231     -205     -180     -     99 +      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
815     -    2694 +    297 +260     -232     -206     -181     -    100 +      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
816     -    2695 +    298 +261     -233     -207     -182     -    101 +      "dev": true,
817     -    2696 +    299 +262     -234     -208     -183     -    102 +      "license": "MIT",
818     -    2697 +    300 +263     -235     -209     -184     -    103 +      "dependencies": {
819     -    2698 +    301 +264     -236     -210     -185     -    104 +        "@babel/helper-validator-identifier": "^7.27.1",
820     -    2699 +    302 +265     -237     -211     -186     -    105 +        "js-tokens": "^4.0.0",
821     -    2700 +    303 +266     -238     -212     -187     -    106 +        "picocolors": "^1.1.1"
822     -    2701 +    304 +267     -239     -213     -188     -    107 +      },
823     -    2702 +    305 +268     -240     -214     -189     -    108 +      "engines": {
824     -    2703 +    306 +269     -241     -215     -190     -    109 +        "node": ">=6.9.0"
825     -    2704 +    307 +270     -242     -216     -191     -    110 +      }
826     -    2705 +    308 +271     -243     -217     -192     -    111 +    },
827     -    2706 +    309 +272     -244     -218     -193     -    112 +    "node_modules/@babel/code-frame/node_modules/js-tokens": {
828     -    2707 +    310 +273     -245     -219     -194     -    113 +      "version": "4.0.0",
829     -    2708 +    311 +274     -246     -220     -195     -    114 +      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
830     -    2709 +    312 +275     -247     -221     -196     -    115 +      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
831     -    2710 +    313 +276     -248     -222     -197     -    116 +      "dev": true,
832     -    2711 +    314 +277     -249     -223     -198     -    117 +      "license": "MIT"
833     -    2712 +    315 +278     -250     -224     -199     -    118 +    },
834     -    2713 +    316 +279     -251     -225     -200     -    119 +    "node_modules/@babel/compat-data": {
835     -    2714 +    317 +280     -252     -226     -201     -    120 +      "version": "7.28.5",
836     -    2715 +    318 +281     -253     -227     -202     -    121 +      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
837     -    2716 +    319 +282     -254     -228     -203     -    122 +      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
838     -    2717 +    320 +283     -255     -229     -204     -    123 +      "dev": true,
839     -    2718 +    321 +284     -256     -230     -205     -    124 +      "license": "MIT",
840     -    2719 +    322 +285     -257     -231     -206     -    125 +      "engines": {
841     -    2720 +    323 +286     -258     -232     -207     -    126 +        "node": ">=6.9.0"
842     -    2721 +    324 +287     -259     -233     -208     -    127 +      }
843     -    2722 +    325 +288     -260     -234     -209     -    128 +    },
844     -    2723 +    326 +289     -261     -235     -210     -    129 +    "node_modules/@babel/core": {
845     -    2724 +    327 +290     -262     -236     -211     -    130 +      "version": "7.28.5",
846     -    2725 +    328 +291     -263     -237     -212     -    131 +      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
847     -    2726 +    329 +292     -264     -238     -213     -    132 +      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
848     -    2727 +    330 +293     -265     -239     -214     -    133 +      "dev": true,
849     -    2728 +    331 +294     -266     -240     -215     -    134 +      "license": "MIT",
850     -    2729 +    332 +295     -267     -241     -216     -    135 +      "dependencies": {
851     -    2730 +    333 +296     -268     -242     -217     -    136 +        "@babel/code-frame": "^7.27.1",
852     -    2731 +    334 +297     -269     -243     -218     -    137 +        "@babel/generator": "^7.28.5",
853     -    2732 +    335 +298     -270     -244     -219     -    138 +        "@babel/helper-compilation-targets": "^7.27.2",
854     -    2733 +    336 +299     -271     -245     -220     -    139 +        "@babel/helper-module-transforms": "^7.28.3",
855     -    2734 +    337 +300     -272     -246     -221     -    140 +        "@babel/helpers": "^7.28.4",
856     -    2735 +    338 +301     -273     -247     -222     -    141 +        "@babel/parser": "^7.28.5",
857     -    2736 +    339 +302     -274     -248     -223     -    142 +        "@babel/template": "^7.27.2",
858     -    2737 +    340 +303     -275     -249     -224     -    143 +        "@babel/traverse": "^7.28.5",
859     -    2738 +    341 +304     -276     -250     -225     -    144 +        "@babel/types": "^7.28.5",
860     -    2739 +    342 +305     -277     -251     -226     -    145 +        "@jridgewell/remapping": "^2.3.5",
861     -    2740 +    343 +306     -278     -252     -227     -    146 +        "convert-source-map": "^2.0.0",
862     -    2741 +    344 +307     -279     -253     -228     -    147 +        "debug": "^4.1.0",
863     -    2742 +    345 +308     -280     -254     -229     -    148 +        "gensync": "^1.0.0-beta.2",
864     -    2743 +    346 +309     -281     -255     -230     -    149 +        "json5": "^2.2.3",
865     -    2744 +    347 +310     -282     -256     -231     -    150 +        "semver": "^6.3.1"
866     -    2745 +    348 +311     -283     -257     -232     -    151 +      },
867     -    2746 +    349 +312     -284     -258     -233     -    152 +      "engines": {
868     -    2747 +    350 +313     -285     -259     -234     -    153 +        "node": ">=6.9.0"
869     -    2748 +    351 +314     -286     -260     -235     -    154 +      },
870     -    2749 +    352 +315     -287     -261     -236     -    155 +      "funding": {
871     -    2750 +    353 +316     -288     -262     -237     -    156 +        "type": "opencollective",
872     -    2751 +    354 +317     -289     -263     -238     -    157 +        "url": "https://opencollective.com/babel"
873     -    2752 +    355 +318     -290     -264     -239     -    158 +      }
874     -    2753 +    356 +319     -291     -265     -240     -    159 +    },
875     -    2754 +    357 +320     -292     -266     -241     -    160 +    "node_modules/@babel/core/node_modules/semver": {
876     -    2755 +    358 +321     -293     -267     -242     -    161 +      "version": "6.3.1",
877     -    2756 +    359 +322     -294     -268     -243     -    162 +      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
878     -    2757 +    360 +323     -295     -269     -244     -    163 +      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
879     -    2758 +    361 +324     -296     -270     -245     -    164 +      "dev": true,
880     -    2759 +    362 +325     -297     -271     -246     -    165 +      "license": "ISC",
881     -    2760 +    363 +326     -298     -272     -247     -    166 +      "bin": {
882     -    2761 +    364 +327     -299     -273     -248     -    167 +        "semver": "bin/semver.js"
883     -    2762 +    365 +328     -300     -274     -249     -    168 +      }
884     -    2763 +    366 +329     -301     -275     -250     -    169 +    },
885     -    2764 +    367 +330     -302     -276     -251     -    170 +    "node_modules/@babel/generator": {
886     -    2765 +    368 +331     -303     -277     -252     -    171 +      "version": "7.28.5",
887     -    2766 +    369 +332     -304     -278     -253     -    172 +      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
888     -    2767 +    370 +333     -305     -279     -254     -    173 +      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
889     -    2768 +    371 +334     -306     -280     -255     -    174 +      "dev": true,
890     -    2769 +    372 +335     -307     -281     -256     -    175 +      "license": "MIT",
891     -    2770 +    373 +336     -308     -282     -257     -    176 +      "dependencies": {
892     -    2771 +    374 +337     -309     -283     -258     -    177 +        "@babel/parser": "^7.28.5",
893     -    2772 +    375 +338     -310     -284     -259     -    178 +        "@babel/types": "^7.28.5",
894     -    2773 +    376 +339     -311     -285     -260     -    179 +        "@jridgewell/gen-mapping": "^0.3.12",
895     -    2774 +    377 +340     -312     -286     -261     -    180 +        "@jridgewell/trace-mapping": "^0.3.28",
896     -    2775 +    378 +341     -313     -287     -262     -    181 +        "jsesc": "^3.0.2"
897     -    2776 +    379 +342     -314     -288     -263     -    182 +      },
898     -    2777 +    380 +343     -315     -289     -264     -    183 +      "engines": {
899     -    2778 +    381 +344     -316     -290     -265     -    184 +        "node": ">=6.9.0"
900     -    2779 +    382 +345     -317     -291     -266     -    185 +      }
901     -    2780 +    383 +346     -318     -292     -267     -    186 +    },
902     -    2781 +    384 +347     -319     -293     -268     -    187 +    "node_modules/@babel/helper-compilation-targets": {
903     -    2782 +    385 +348     -320     -294     -269     -    188 +      "version": "7.27.2",
904     -    2783 +    386 +349     -321     -295     -270     -    189 +      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
905     -    2784 +    387 +350     -322     -296     -271     -    190 +      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
906     -    2785 +    388 +351     -323     -297     -272     -    191 +      "dev": true,
907     -    2786 +    389 +352     -324     -298     -273     -    192 +      "license": "MIT",
908     -    2787 +    390 +353     -325     -299     -274     -    193 +      "dependencies": {
909     -    2788 +    391 +354     -326     -300     -275     -    194 +        "@babel/compat-data": "^7.27.2",
910     -    2789 +    392 +355     -327     -301     -276     -    195 +        "@babel/helper-validator-option": "^7.27.1",
911     -    2790 +    393 +356     -328     -302     -277     -    196 +        "browserslist": "^4.24.0",
912     -    2791 +    394 +357     -329     -303     -278     -    197 +        "lru-cache": "^5.1.1",
913     -    2792 +    395 +358     -330     -304     -279     -    198 +        "semver": "^6.3.1"
914     -    2793 +    396 +359     -331     -305     -280     -    199 +      },
915     -    2794 +    397 +360     -332     -306     -281     -    200 +      "engines": {
916     -    2795 +    398 +361     -333     -307     -282     -    201 +        "node": ">=6.9.0"
917     -    2796 +    399 +362     -334     -308     -283     -    202 +      }
918     -    2797 +    400 +363     -335     -309     -284     -    203 +    },
919     -    2798 +    401 +364     -336     -310     -285     -    204 +    "node_modules/@babel/helper-compilation-targets/node_modules/lru-cache": {
920     -    2799 +    402 +365     -337     -311     -286     -    205 +      "version": "5.1.1",
921     -    2800 +    403 +366     -338     -312     -287     -    206 +      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
922     -    2801 +    404 +367     -339     -313     -288     -    207 +      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
923     -    2802 +    405 +368     -340     -314     -289     -    208 +      "dev": true,
924     -    2803 +    406 +369     -341     -315     -290     -    209 +      "license": "ISC",
925     -    2804 +    407 +370     -342     -316     -291     -    210 +      "dependencies": {
926     -    2805 +    408 +371     -343     -317     -292     -    211 +        "yallist": "^3.0.2"
927     -    2806 +    409 +372     -344     -318     -293     -    212 +      }
928     -    2807 +    410 +373     -345     -319     -294     -    213 +    },
929     -    2808 +    411 +374     -346     -320     -295     -    214 +    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
930     -    2809 +    412 +375     -347     -321     -296     -    215 +      "version": "6.3.1",
931     -    2810 +    413 +376     -348     -322     -297     -    216 +      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
932     -    2811 +    414 +377     -349     -323     -298     -    217 +      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
933     -    2812 +    415 +378     -350     -324     -299     -    218 +      "dev": true,
934     -    2813 +    416 +379     -351     -325     -300     -    219 +      "license": "ISC",
935     -    2814 +    417 +380     -352     -326     -301     -    220 +      "bin": {
936     -    2815 +    418 +381     -353     -327     -302     -    221 +        "semver": "bin/semver.js"
937     -    2816 +    419 +382     -354     -328     -303     -    222 +      }
938     -    2817 +    420 +383     -355     -329     -304     -    223 +    },
939     -    2818 +    421 +384     -356     -330     -305     -    224 +    "node_modules/@babel/helper-globals": {
940     -    2819 +    422 +385     -357     -331     -306     -    225 +      "version": "7.28.0",
941     -    2820 +    423 +386     -358     -332     -307     -    226 +      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
942     -    2821 +    424 +387     -359     -333     -308     -    227 +      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
943     -    2822 +    425 +388     -360     -334     -309     -    228 +      "dev": true,
944     -    2823 +    426 +389     -361     -335     -310     -    229 +      "license": "MIT",
945     -    2824 +    427 +390     -362     -336     -311     -    230 +      "engines": {
946     -    2825 +    428 +391     -363     -337     -312     -    231 +        "node": ">=6.9.0"
947     -    2826 +    429 +392     -364     -338     -313     -    232 +      }
948     -    2827 +    430 +393     -365     -339     -314     -    233 +    },
949     -    2828 +    431 +394     -366     -340     -315     -    234 +    "node_modules/@babel/helper-module-imports": {
950     -    2829 +    432 +395     -367     -341     -316     -    235 +      "version": "7.27.1",
951     -    2830 +    433 +396     -368     -342     -317     -    236 +      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
952     -    2831 +    434 +397     -369     -343     -318     -    237 +      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
953     -    2832 +    435 +398     -370     -344     -319     -    238 +      "dev": true,
954     -    2833 +    436 +399     -371     -345     -320     -    239 +      "license": "MIT",
955     -    2834 +    437 +400     -372     -346     -321     -    240 +      "dependencies": {
956     -    2835 +    438 +401     -373     -347     -322     -    241 +        "@babel/traverse": "^7.27.1",
957     -    2836 +    439 +402     -374     -348     -323     -    242 +        "@babel/types": "^7.27.1"
958     -    2837 +    440 +403     -375     -349     -324     -    243 +      },
959     -    2838 +    441 +404     -376     -350     -325     -    244 +      "engines": {
960     -    2839 +    442 +405     -377     -351     -326     -    245 +        "node": ">=6.9.0"
961     -    2840 +    443 +406     -378     -352     -327     -    246 +      }
962     -    2841 +    444 +407     -379     -353     -328     -    247 +    },
963     -    2842 +    445 +408     -380     -354     -329     -    248 +    "node_modules/@babel/helper-module-transforms": {
964     -    2843 +    446 +409     -381     -355     -330     -    249 +      "version": "7.28.3",
965     -    2844 +    447 +410     -382     -356     -331     -    250 +      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
966     -    2845 +    448 +411     -383     -357     -332     -    251 +      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
967     -    2846 +    449 +412     -384     -358     -333     -    252 +      "dev": true,
968     -    2847 +    450 +413     -385     -359     -334     -    253 +      "license": "MIT",
969     -    2848 +    451 +414     -386     -360     -335     -    254 +      "dependencies": {
970     -    2849 +    452 +415     -387     -361     -336     -    255 +        "@babel/helper-module-imports": "^7.27.1",
971     -    2850 +    453 +416     -388     -362     -337     -    256 +        "@babel/helper-validator-identifier": "^7.27.1",
972     -    2851 +    454 +417     -389     -363     -338     -    257 +        "@babel/traverse": "^7.28.3"
973     -    2852 +    455 +418     -390     -364     -339     -    258 +      },
974     -    2853 +    456 +419     -391     -365     -340     -    259 +      "engines": {
975     -    2854 +    457 +420     -392     -366     -341     -    260 +        "node": ">=6.9.0"
976     -    2855 +    458 +421     -393     -367     -342     -    261 +      },
977     -    2856 +    459 +422     -394     -368     -343     -    262 +      "peerDependencies": {
978     -    2857 +    460 +423     -395     -369     -344     -    263 +        "@babel/core": "^7.0.0"
979     -    2858 +    461 +424     -396     -370     -345     -    264 +      }
980     -    2859 +    462 +425     -397     -371     -346     -    265 +    },
981     -    2860 +    463 +426     -398     -372     -347     - 96 266      "node_modules/@babel/helper-string-parser": {
982     -    2861 +    464 +427     -399     -373     -348     - 97 267        "version": "7.27.1",
983     -    2862 +    465 +428     -400     -374     -349     - 98 268        "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
984     -    2863 +    466 +429     -401     -375     -350     -@@ -113,6 +283,30 @@
985     -    2864 +    467 +430     -402     -376     -351     -113 283          "node": ">=6.9.0"
986     -    2865 +    468 +431     -403     -377     -352     -114 284        }
987     -    2866 +    469 +432     -404     -378     -353     -115 285      },
988     -    2867 +    470 +433     -405     -379     -354     -    286 +    "node_modules/@babel/helper-validator-option": {
989     -    2868 +    471 +434     -406     -380     -355     -    287 +      "version": "7.27.1",
990     -    2869 +    472 +435     -407     -381     -356     -    288 +      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
991     -    2870 +    473 +436     -408     -382     -357     -    289 +      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
992     -    2871 +    474 +437     -409     -383     -358     -    290 +      "dev": true,
993     -    2872 +    475 +438     -410     -384     -359     -    291 +      "license": "MIT",
994     -    2873 +    476 +439     -411     -385     -360     -    292 +      "engines": {
995     -    2874 +    477 +440     -412     -386     -361     -    293 +        "node": ">=6.9.0"
996     -    2875 +    478 +441     -413     -387     -362     -    294 +      }
997     -    2876 +    479 +442     -414     -388     -363     -    295 +    },
998     -    2877 +    480 +443     -415     -389     -364     -    296 +    "node_modules/@babel/helpers": {
999     -    2878 +    481 +444     -416     -390     -365     -    297 +      "version": "7.28.4",
1000     -    2879 +    482 +445     -417     -391     -366     -    298 +      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
1001     -    2880 +    483 +446     -418     -392     -367     -    299 +      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
1002     -    2881 +    484 +447     -419     -393     -368     -    300 +      "dev": true,
1003     -    2882 +    485 +448     -420     -394     -369     -    301 +      "license": "MIT",
1004     -    2883 +    486 +449     -421     -395     -370     -    302 +      "dependencies": {
1005     -    2884 +    487 +450     -422     -396     -371     -    303 +        "@babel/template": "^7.27.2",
1006     -    2885 +    488 +451     -423     -397     -372     -    304 +        "@babel/types": "^7.28.4"
1007     -    2886 +    489 +452     -424     -398     -373     -    305 +      },
1008     -    2887 +    490 +453     -425     -399     -374     -    306 +      "engines": {
1009     -    2888 +    491 +454     -426     -400     -375     -    307 +        "node": ">=6.9.0"
1010     -    2889 +    492 +455     -427     -401     -376     -    308 +      }
1011     -    2890 +    493 +456     -428     -402     -377     -    309 +    },
1012     -    2891 +    494 +457     -429     -403     -378     -116 310      "node_modules/@babel/parser": {
1013     -    2892 +    495 +458     -430     -404     -379     -117 311        "version": "7.28.5",
1014     -    2893 +    496 +459     -431     -405     -380     -118 312        "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
1015     -    2894 +    497 +460     -432     -406     -381     -@@ -138,6 +332,40 @@
1016     -    2895 +    498 +461     -433     -407     -382     -138 332          "node": ">=6.9.0"
1017     -    2896 +    499 +462     -434     -408     -383     -139 333        }
1018     -    2897 +    500 +463     -435     -409     -384     -140 334      },
1019     -    2898 +    501 +464     -436     -410     -385     -    335 +    "node_modules/@babel/template": {
1020     -    2899 +    502 +465     -437     -411     -386     -    336 +      "version": "7.27.2",
1021     -    2900 +    503 +466     -438     -412     -387     -    337 +      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
1022     -    2901 +    504 +467     -439     -413     -388     -    338 +      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
1023     -    2902 +    505 +468     -440     -414     -389     -    339 +      "dev": true,
1024     -    2903 +    506 +469     -441     -415     -390     -    340 +      "license": "MIT",
1025     -    2904 +    507 +470     -442     -416     -391     -    341 +      "dependencies": {
1026     -    2905 +    508 +471     -443     -417     -392     -    342 +        "@babel/code-frame": "^7.27.1",
1027     -    2906 +    509 +472     -444     -418     -393     -    343 +        "@babel/parser": "^7.27.2",
1028     -    2907 +    510 +473     -445     -419     -394     -    344 +        "@babel/types": "^7.27.1"
1029     -    2908 +    511 +474     -446     -420     -395     -    345 +      },
1030     -    2909 +    512 +475     -447     -421     -396     -    346 +      "engines": {
1031     -    2910 +    513 +476     -448     -422     -397     -    347 +        "node": ">=6.9.0"
1032     -    2911 +    514 +477     -449     -423     -398     -    348 +      }
1033     -    2912 +    515 +478     -450     -424     -399     -    349 +    },
1034     -    2913 +    516 +479     -451     -425     -400     -    350 +    "node_modules/@babel/traverse": {
1035     -    2914 +    517 +480     -452     -426     -401     -    351 +      "version": "7.28.5",
1036     -    2915 +    518 +481     -453     -427     -402     -    352 +      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
1037     -    2916 +    519 +482     -454     -428     -403     -    353 +      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
1038     -    2917 +    520 +483     -455     -429     -404     -    354 +      "dev": true,
1039     -    2918 +    521 +484     -456     -430     -405     -    355 +      "license": "MIT",
1040     -    2919 +    522 +485     -457     -431     -406     -    356 +      "dependencies": {
1041     -    2920 +    523 +486     -458     -432     -407     -    357 +        "@babel/code-frame": "^7.27.1",
1042     -    2921 +    524 +487     -459     -433     -408     -    358 +        "@babel/generator": "^7.28.5",
1043     -    2922 +    525 +488     -460     -434     -409     -    359 +        "@babel/helper-globals": "^7.28.0",
1044     -    2923 +    526 +489     -461     -435     -410     -    360 +        "@babel/parser": "^7.28.5",
1045     -    2924 +    527 +490     -462     -436     -411     -    361 +        "@babel/template": "^7.27.2",
1046     -    2925 +    528 +491     -463     -437     -412     -    362 +        "@babel/types": "^7.28.5",
1047     -    2926 +    529 +492     -464     -438     -413     -    363 +        "debug": "^4.3.1"
1048     -    2927 +    530 +493     -465     -439     -414     -    364 +      },
1049     -    2928 +    531 +494     -466     -440     -415     -    365 +      "engines": {
1050     -    2929 +    532 +495     -467     -441     -416     -    366 +        "node": ">=6.9.0"
1051     -    2930 +    533 +496     -468     -442     -417     -    367 +      }
1052     -    2931 +    534 +497     -469     -443     -418     -    368 +    },
1053     -    2932 +    535 +498     -470     -444     -419     -141 369      "node_modules/@babel/types": {
1054     -    2933 +    536 +499     -471     -445     -420     -142 370        "version": "7.28.5",
1055     -    2934 +    537 +500     -472     -446     -421     -143 371        "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
1056     -    2935 +    538 +501     -473     -447     -422     -@@ -997,6 +1225,28 @@
1057     -    2936 +    539 +502     -474     -448     -423     -997 1225          "mlly": "^1.8.0"
1058     -    2937 +    540 +503     -475     -449     -424     -998 1226        }
1059     -    2938 +    541 +504     -476     -450     -425     -999 1227      },
1060     -    2939 +    542 +505     -477     -451     -426     -    1228 +    "node_modules/@jridgewell/gen-mapping": {
1061     -    2940 +    543 +506     -478     -452     -427     -    1229 +      "version": "0.3.13",
1062     -    2941 +    544 +507     -479     -453     -428     -    1230 +      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
1063     -    2942 +    545 +508     -480     -454     -429     -    1231 +      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
1064     -    2943 +    546 +509     -481     -455     -430     -    1232 +      "dev": true,
1065     -    2944 +    547 +510     -482     -456     -431     -    1233 +      "license": "MIT",
1066     -    2945 +    548 +511     -483     -457     -432     -    1234 +      "dependencies": {
1067     -    2946 +    549 +512     -484     -458     -433     -    1235 +        "@jridgewell/sourcemap-codec": "^1.5.0",
1068     -    2947 +    550 +513     -485     -459     -434     -    1236 +        "@jridgewell/trace-mapping": "^0.3.24"
1069     -    2948 +    551 +514     -486     -460     -435     -    1237 +      }
1070     -    2949 +    552 +515     -487     -461     -436     -    1238 +    },
1071     -    2950 +    553 +516     -488     -462     -437     -    1239 +    "node_modules/@jridgewell/remapping": {
1072     -    2951 +    554 +517     -489     -463     -438     -    1240 +      "version": "2.3.5",
1073     -    2952 +    555 +518     -490     -464     -439     -    1241 +      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
1074     -    2953 +    556 +519     -491     -465     -440     -    1242 +      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
1075     -    2954 +    557 +520     -492     -466     -441     -    1243 +      "dev": true,
1076     -    2955 +    558 +521     -493     -467     -442     -    1244 +      "license": "MIT",
1077     -    2956 +    559 +522     -494     -468     -443     -    1245 +      "dependencies": {
1078     -    2957 +    560 +523     -495     -469     -444     -    1246 +        "@jridgewell/gen-mapping": "^0.3.5",
1079     -    2958 +    561 +524     -496     -470     -445     -    1247 +        "@jridgewell/trace-mapping": "^0.3.24"
1080     -    2959 +    562 +525     -497     -471     -446     -    1248 +      }
1081     -    2960 +    563 +526     -498     -472     -447     -    1249 +    },
1082     -    2961 +    564 +527     -499     -473     -448     -1000 1250      "node_modules/@jridgewell/resolve-uri": {
1083     -    2962 +    565 +528     -500     -474     -449     -1001 1251        "version": "3.1.2",
1084     -    2963 +    566 +529     -501     -475     -450     -1002 1252        "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
1085     -    2964 +    567 +530     -502     -476     -451     -@@ -1965,6 +2215,16 @@
1086     -    2965 +    568 +531     -503     -477     -452     -1965 2215          "js-tokens": "^9.0.1"
1087     -    2966 +    569 +532     -504     -478     -453     -1966 2216        }
1088     -    2967 +    570 +533     -505     -479     -454     -1967 2217      },
1089     -    2968 +    571 +534     -506     -480     -455     -    2218 +    "node_modules/babel-plugin-prismjs": {
1090     -    2969 +    572 +535     -507     -481     -456     -    2219 +      "version": "2.1.0",
1091     -    2970 +    573 +536     -508     -482     -457     -    2220 +      "resolved": "https://registry.npmjs.org/babel-plugin-prismjs/-/babel-plugin-prismjs-2.1.0.tgz",
1092     -    2971 +    574 +537     -509     -483     -458     -    2221 +      "integrity": "sha512-ehzSKYfeAz4U78zi/sfwsjDPlq0LvDKxNefcZTJ/iKBu+plsHsLqZhUeGf1+82LAcA35UZGbU6ksEx2Utphc/g==",
1093     -    2972 +    575 +538     -510     -484     -459     -    2222 +      "dev": true,
1094     -    2973 +    576 +539     -511     -485     -460     -    2223 +      "license": "MIT",
1095     -    2974 +    577 +540     -512     -486     -461     -    2224 +      "peerDependencies": {
1096     -    2975 +    578 +541     -513     -487     -462     -    2225 +        "prismjs": "^1.18.0"
1097     -    2976 +    579 +542     -514     -488     -463     -    2226 +      }
1098     -    2977 +    580 +543     -515     -489     -464     -    2227 +    },
1099     -    2978 +    581 +544     -516     -490     -465     -1968 2228      "node_modules/balanced-match": {
1100     -    2979 +    582 +545     -517     -491     -466     -1969 2229        "version": "1.0.2",
1101     -    2980 +    583 +546     -518     -492     -467     -1970 2230        "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
1102     -    2981 +    584 +547     -519     -493     -468     -@@ -1981,6 +2241,16 @@
1103     -    2982 +    585 +548     -520     -494     -469     -1981 2241          "node": ">= 0.6.0"
1104     -    2983 +    586 +549     -521     -495     -470     -1982 2242        }
1105     -    2984 +    587 +550     -522     -496     -471     -1983 2243      },
1106     -    2985 +    588 +551     -523     -497     -472     -    2244 +    "node_modules/baseline-browser-mapping": {
1107     -    2986 +    589 +552     -524     -498     -473     -    2245 +      "version": "2.9.5",
1108     -    2987 +    590 +553     -525     -499     -474     -    2246 +      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.5.tgz",
1109     -    2988 +    591 +554     -526     -500     -475     -    2247 +      "integrity": "sha512-D5vIoztZOq1XM54LUdttJVc96ggEsIfju2JBvht06pSzpckp3C7HReun67Bghzrtdsq9XdMGbSSB3v3GhMNmAA==",
1110     -    2989 +    592 +555     -527     -501     -476     -    2248 +      "dev": true,
1111     -    2990 +    593 +556     -528     -502     -477     -    2249 +      "license": "Apache-2.0",
1112     -    2991 +    594 +557     -529     -503     -478     -    2250 +      "bin": {
1113     -    2992 +    595 +558     -530     -504     -479     -    2251 +        "baseline-browser-mapping": "dist/cli.js"
1114     -    2993 +    596 +559     -531     -505     -480     -    2252 +      }
1115     -    2994 +    597 +560     -532     -506     -481     -    2253 +    },
1116     -    2995 +    598 +561     -533     -507     -482     -1984 2254      "node_modules/bidi-js": {
1117     -    2996 +    599 +562     -534     -508     -483     -1985 2255        "version": "1.0.3",
1118     -    2997 +    600 +563     -535     -509     -484     -1986 2256        "resolved": "https://registry.npmjs.org/bidi-js/-/bidi-js-1.0.3.tgz",
1119     -    2998 +    601 +564     -536     -510     -485     -@@ -2057,6 +2327,40 @@
1120     -    2999 +    602 +565     -537     -511     -486     -2057 2327          "concat-map": "0.0.1"
1121     -    3000 +    603 +566     -538     -512     -487     -2058 2328        }
1122     -    3001 +    604 +567     -539     -513     -488     -2059 2329      },
1123     -    3002 +    605 +568     -540     -514     -489     -    2330 +    "node_modules/browserslist": {
1124     -    3003 +    606 +569     -541     -515     -490     -    2331 +      "version": "4.28.1",
1125     -    3004 +    607 +570     -542     -516     -491     -    2332 +      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
1126     -    3005 +    608 +571     -543     -517     -492     -    2333 +      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
1127     -    3006 +    609 +572     -544     -518     -493     -    2334 +      "dev": true,
1128     -    3007 +    610 +573     -545     -519     -494     -    2335 +      "funding": [
1129     -    3008 +    611 +574     -546     -520     -495     -    2336 +        {
1130     -    3009 +    612 +575     -547     -521     -496     -    2337 +          "type": "opencollective",
1131     -    3010 +    613 +576     -548     -522     -497     -    2338 +          "url": "https://opencollective.com/browserslist"
1132     -    3011 +    614 +577     -549     -523     -498     -    2339 +        },
1133     -    3012 +    615 +578     -550     -524     -499     -    2340 +        {
1134     -    3013 +    616 +579     -551     -525     -500     -    2341 +          "type": "tidelift",
1135     -    3014 +    617 +580     -552     -526     -501     -    2342 +          "url": "https://tidelift.com/funding/github/npm/browserslist"
1136     -    3015 +    618 +581     -553     -527     -502     -    2343 +        },
1137     -    3016 +    619 +582     -554     -528     -503     -    2344 +        {
1138     -    3017 +    620 +583     -555     -529     -504     -    2345 +          "type": "github",
1139     -    3018 +    621 +584     -556     -530     -505     -    2346 +          "url": "https://github.com/sponsors/ai"
1140     -    3019 +    622 +585     -557     -531     -506     -    2347 +        }
1141     -    3020 +    623 +586     -558     -532     -507     -    2348 +      ],
1142     -    3021 +    624 +587     -559     -533     -508     -    2349 +      "license": "MIT",
1143     -    3022 +    625 +588     -560     -534     -509     -    2350 +      "dependencies": {
1144     -    3023 +    626 +589     -561     -535     -510     -    2351 +        "baseline-browser-mapping": "^2.9.0",
1145     -    3024 +    627 +590     -562     -536     -511     -    2352 +        "caniuse-lite": "^1.0.30001759",
1146     -    3025 +    628 +591     -563     -537     -512     -    2353 +        "electron-to-chromium": "^1.5.263",
1147     -    3026 +    629 +592     -564     -538     -513     -    2354 +        "node-releases": "^2.0.27",
1148     -    3027 +    630 +593     -565     -539     -514     -    2355 +        "update-browserslist-db": "^1.2.0"
1149     -    3028 +    631 +594     -566     -540     -515     -    2356 +      },
1150     -    3029 +    632 +595     -567     -541     -516     -    2357 +      "bin": {
1151     -    3030 +    633 +596     -568     -542     -517     -    2358 +        "browserslist": "cli.js"
1152     -    3031 +    634 +597     -569     -543     -518     -    2359 +      },
1153     -    3032 +    635 +598     -570     -544     -519     -    2360 +      "engines": {
1154     -    3033 +    636 +599     -571     -545     -520     -    2361 +        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
1155     -    3034 +    637 +600     -572     -546     -521     -    2362 +      }
1156     -    3035 +    638 +601     -573     -547     -522     -    2363 +    },
1157     -    3036 +    639 +602     -574     -548     -523     -2060 2364      "node_modules/bytes": {
1158     -    3037 +    640 +603     -575     -549     -524     -2061 2365        "version": "3.1.2",
1159     -    3038 +    641 +604     -576     -550     -525     -2062 2366        "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
1160     -    3039 +    642 +605     -577     -551     -526     -@@ -2108,6 +2412,27 @@
1161     -    3040 +    643 +606     -578     -552     -527     -2108 2412          "node": ">=6"
1162     -    3041 +    644 +607     -579     -553     -528     -2109 2413        }
1163     -    3042 +    645 +608     -580     -554     -529     -2110 2414      },
1164     -    3043 +    646 +609     -581     -555     -530     -    2415 +    "node_modules/caniuse-lite": {
1165     -    3044 +    647 +610     -582     -556     -531     -    2416 +      "version": "1.0.30001759",
1166     -    3045 +    648 +611     -583     -557     -532     -    2417 +      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001759.tgz",
1167     -    3046 +    649 +612     -584     -558     -533     -    2418 +      "integrity": "sha512-Pzfx9fOKoKvevQf8oCXoyNRQ5QyxJj+3O0Rqx2V5oxT61KGx8+n6hV/IUyJeifUci2clnmmKVpvtiqRzgiWjSw==",
1168     -    3047 +    650 +613     -585     -559     -534     -    2419 +      "dev": true,
1169     -    3048 +    651 +614     -586     -560     -535     -    2420 +      "funding": [
1170     -    3049 +    652 +615     -587     -561     -536     -    2421 +        {
1171     -    3050 +    653 +616     -588     -562     -537     -    2422 +          "type": "opencollective",
1172     -    3051 +    654 +617     -589     -563     -538     -    2423 +          "url": "https://opencollective.com/browserslist"
1173     -    3052 +    655 +618     -590     -564     -539     -    2424 +        },
1174     -    3053 +    656 +619     -591     -565     -540     -    2425 +        {
1175     -    3054 +    657 +620     -592     -566     -541     -    2426 +          "type": "tidelift",
1176     -    3055 +    658 +621     -593     -567     -542     -    2427 +          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
1177     -    3056 +    659 +622     -594     -568     -543     -    2428 +        },
1178     -    3057 +    660 +623     -595     -569     -544     -    2429 +        {
1179     -    3058 +    661 +624     -596     -570     -545     -    2430 +          "type": "github",
1180     -    3059 +    662 +625     -597     -571     -546     -    2431 +          "url": "https://github.com/sponsors/ai"
1181     -    3060 +    663 +626     -598     -572     -547     -    2432 +        }
1182     -    3061 +    664 +627     -599     -573     -548     -    2433 +      ],
1183     -    3062 +    665 +628     -600     -574     -549     -    2434 +      "license": "CC-BY-4.0"
1184     -    3063 +    666 +629     -601     -575     -550     -    2435 +    },
1185     -    3064 +    667 +630     -602     -576     -551     -2111 2436      "node_modules/canvg": {
1186     -    3065 +    668 +631     -603     -577     -552     -2112 2437        "version": "3.0.11",
1187     -    3066 +    669 +632     -604     -578     -553     -2113 2438        "resolved": "https://registry.npmjs.org/canvg/-/canvg-3.0.11.tgz",
1188     -    3067 +    670 +633     -605     -579     -554     -@@ -2246,6 +2571,13 @@
1189     -    3068 +    671 +634     -606     -580     -555     -2246 2571          "node": ">= 0.6"
1190     -    3069 +    672 +635     -607     -581     -556     -2247 2572        }
1191     -    3070 +    673 +636     -608     -582     -557     -2248 2573      },
1192     -    3071 +    674 +637     -609     -583     -558     -    2574 +    "node_modules/convert-source-map": {
1193     -    3072 +    675 +638     -610     -584     -559     -    2575 +      "version": "2.0.0",
1194     -    3073 +    676 +639     -611     -585     -560     -    2576 +      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
1195     -    3074 +    677 +640     -612     -586     -561     -    2577 +      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
1196     -    3075 +    678 +641     -613     -587     -562     -    2578 +      "dev": true,
1197     -    3076 +    679 +642     -614     -588     -563     -    2579 +      "license": "MIT"
1198     -    3077 +    680 +643     -615     -589     -564     -    2580 +    },
1199     -    3078 +    681 +644     -616     -590     -565     -2249 2581      "node_modules/cookie": {
1200     -    3079 +    682 +645     -617     -591     -566     -2250 2582        "version": "0.7.1",
1201     -    3080 +    683 +646     -618     -592     -567     -2251 2583        "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
1202     -    3081 +    684 +647     -619     -593     -568     -@@ -2972,6 +3304,13 @@
1203     -    3082 +    685 +648     -620     -594     -569     -2972 3304        "dev": true,
1204     -    3083 +    686 +649     -621     -595     -570     -2973 3305        "license": "MIT"
1205     -    3084 +    687 +650     -622     -596     -571     -2974 3306      },
1206     -    3085 +    688 +651     -623     -597     -572     -    3307 +    "node_modules/electron-to-chromium": {
1207     -    3086 +    689 +652     -624     -598     -573     -    3308 +      "version": "1.5.267",
1208     -    3087 +    690 +653     -625     -599     -574     -    3309 +      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.267.tgz",
1209     -    3088 +    691 +654     -626     -600     -575     -    3310 +      "integrity": "sha512-0Drusm6MVRXSOJpGbaSVgcQsuB4hEkMpHXaVstcPmhu5LIedxs1xNK/nIxmQIU/RPC0+1/o0AVZfBTkTNJOdUw==",
1210     -    3089 +    692 +655     -627     -601     -576     -    3311 +      "dev": true,
1211     -    3090 +    693 +656     -628     -602     -577     -    3312 +      "license": "ISC"
1212     -    3091 +    694 +657     -629     -603     -578     -    3313 +    },
1213     -    3092 +    695 +658     -630     -604     -579     -2975 3314      "node_modules/encodeurl": {
1214     -    3093 +    696 +659     -631     -605     -580     -2976 3315        "version": "2.0.0",
1215     -    3094 +    697 +660     -632     -606     -581     -2977 3316        "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
1216     -    3095 +    698 +661     -633     -607     -582     -@@ -3077,6 +3416,16 @@
1217     -    3096 +    699 +662     -634     -608     -583     -3077 3416          "@esbuild/win32-x64": "0.25.12"
1218     -    3097 +    700 +663     -635     -609     -584     -3078 3417        }
1219     -    3098 +    701 +664     -636     -610     -585     -3079 3418      },
1220     -    3099 +    702 +665     -637     -611     -586     -    3419 +    "node_modules/escalade": {
1221     -    3100 +    703 +666     -638     -612     -587     -    3420 +      "version": "3.2.0",
1222     -    3101 +    704 +667     -639     -613     -588     -    3421 +      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
1223     -    3102 +    705 +668     -640     -614     -589     -    3422 +      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
1224     -    3103 +    706 +669     -641     -615     -590     -    3423 +      "dev": true,
1225     -    3104 +    707 +670     -642     -616     -591     -    3424 +      "license": "MIT",
1226     -    3105 +    708 +671     -643     -617     -592     -    3425 +      "engines": {
1227     -    3106 +    709 +672     -644     -618     -593     -    3426 +        "node": ">=6"
1228     -    3107 +    710 +673     -645     -619     -594     -    3427 +      }
1229     -    3108 +    711 +674     -646     -620     -595     -    3428 +    },
1230     -    3109 +    712 +675     -647     -621     -596     -3080 3429      "node_modules/escape-html": {
1231     -    3110 +    713 +676     -648     -622     -597     -3081 3430        "version": "1.0.3",
1232     -    3111 +    714 +677     -649     -623     -598     -3082 3431        "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
1233     -    3112 +    715 +678     -650     -624     -599     -@@ -3533,6 +3882,16 @@
1234     -    3113 +    716 +679     -651     -625     -600     -3533 3882          "url": "https://github.com/sponsors/ljharb"
1235     -    3114 +    717 +680     -652     -626     -601     -3534 3883        }
1236     -    3115 +    718 +681     -653     -627     -602     -3535 3884      },
1237     -    3116 +    719 +682     -654     -628     -603     -    3885 +    "node_modules/gensync": {
1238     -    3117 +    720 +683     -655     -629     -604     -    3886 +      "version": "1.0.0-beta.2",
1239     -    3118 +    721 +684     -656     -630     -605     -    3887 +      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
1240     -    3119 +    722 +685     -657     -631     -606     -    3888 +      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
1241     -    3120 +    723 +686     -658     -632     -607     -    3889 +      "dev": true,
1242     -    3121 +    724 +687     -659     -633     -608     -    3890 +      "license": "MIT",
1243     -    3122 +    725 +688     -660     -634     -609     -    3891 +      "engines": {
1244     -    3123 +    726 +689     -661     -635     -610     -    3892 +        "node": ">=6.9.0"
1245     -    3124 +    727 +690     -662     -636     -611     -    3893 +      }
1246     -    3125 +    728 +691     -663     -637     -612     -    3894 +    },
1247     -    3126 +    729 +692     -664     -638     -613     -3536 3895      "node_modules/get-intrinsic": {
1248     -    3127 +    730 +693     -665     -639     -614     -3537 3896        "version": "1.3.0",
1249     -    3128 +    731 +694     -666     -640     -615     -3538 3897        "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
1250     -    3129 +    732 +695     -667     -641     -616     -@@ -3973,6 +4332,19 @@
1251     -    3130 +    733 +696     -668     -642     -617     -3973 4332          }
1252     -    3131 +    734 +697     -669     -643     -618     -3974 4333        }
1253     -    3132 +    735 +698     -670     -644     -619     -3975 4334      },
1254     -    3133 +    736 +699     -671     -645     -620     -    4335 +    "node_modules/jsesc": {
1255     -    3134 +    737 +700     -672     -646     -621     -    4336 +      "version": "3.1.0",
1256     -    3135 +    738 +701     -673     -647     -622     -    4337 +      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
1257     -    3136 +    739 +702     -674     -648     -623     -    4338 +      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
1258     -    3137 +    740 +703     -675     -649     -624     -    4339 +      "dev": true,
1259     -    3138 +    741 +704     -676     -650     -625     -    4340 +      "license": "MIT",
1260     -    3139 +    742 +705     -677     -651     -626     -    4341 +      "bin": {
1261     -    3140 +    743 +706     -678     -652     -627     -    4342 +        "jsesc": "bin/jsesc"
1262     -    3141 +    744 +707     -679     -653     -628     -    4343 +      },
1263     -    3142 +    745 +708     -680     -654     -629     -    4344 +      "engines": {
1264     -    3143 +    746 +709     -681     -655     -630     -    4345 +        "node": ">=6"
1265     -    3144 +    747 +710     -682     -656     -631     -    4346 +      }
1266     -    3145 +    748 +711     -683     -657     -632     -    4347 +    },
1267     -    3146 +    749 +712     -684     -658     -633     -3976 4348      "node_modules/json-buffer": {
1268     -    3147 +    750 +713     -685     -659     -634     -3977 4349        "version": "3.0.1",
1269     -    3148 +    751 +714     -686     -660     -635     -3978 4350        "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
1270     -    3149 +    752 +715     -687     -661     -636     -@@ -3994,6 +4366,19 @@
1271     -    3150 +    753 +716     -688     -662     -637     -3994 4366        "dev": true,
1272     -    3151 +    754 +717     -689     -663     -638     -3995 4367        "license": "MIT"
1273     -    3152 +    755 +718     -690     -664     -639     -3996 4368      },
1274     -    3153 +    756 +719     -691     -665     -640     -    4369 +    "node_modules/json5": {
1275     -    3154 +    757 +720     -692     -666     -641     -    4370 +      "version": "2.2.3",
1276     -    3155 +    758 +721     -693     -667     -642     -    4371 +      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
1277     -    3156 +    759 +722     -694     -668     -643     -    4372 +      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
1278     -    3157 +    760 +723     -695     -669     -644     -    4373 +      "dev": true,
1279     -    3158 +    761 +724     -696     -670     -645     -    4374 +      "license": "MIT",
1280     -    3159 +    762 +725     -697     -671     -646     -    4375 +      "bin": {
1281     -    3160 +    763 +726     -698     -672     -647     -    4376 +        "json5": "lib/cli.js"
1282     -    3161 +    764 +727     -699     -673     -648     -    4377 +      },
1283     -    3162 +    765 +728     -700     -674     -649     -    4378 +      "engines": {
1284     -    3163 +    766 +729     -701     -675     -650     -    4379 +        "node": ">=6"
1285     -    3164 +    767 +730     -702     -676     -651     -    4380 +      }
1286     -    3165 +    768 +731     -703     -677     -652     -    4381 +    },
1287     -    3166 +    769 +732     -704     -678     -653     -3997 4382      "node_modules/jspdf": {
1288     -    3167 +    770 +733     -705     -679     -654     -3998 4383        "version": "3.0.4",
1289     -    3168 +    771 +734     -706     -680     -655     -3999 4384        "resolved": "https://registry.npmjs.org/jspdf/-/jspdf-3.0.4.tgz",
1290     -    3169 +    772 +735     -707     -681     -656     -@@ -4377,6 +4762,13 @@
1291     -    3170 +    773 +736     -708     -682     -657     -4377 4762          "node": ">= 0.6"
1292     -    3171 +    774 +737     -709     -683     -658     -4378 4763        }
1293     -    3172 +    775 +738     -710     -684     -659     -4379 4764      },
1294     -    3173 +    776 +739     -711     -685     -660     -    4765 +    "node_modules/node-releases": {
1295     -    3174 +    777 +740     -712     -686     -661     -    4766 +      "version": "2.0.27",
1296     -    3175 +    778 +741     -713     -687     -662     -    4767 +      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
1297     -    3176 +    779 +742     -714     -688     -663     -    4768 +      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
1298     -    3177 +    780 +743     -715     -689     -664     -    4769 +      "dev": true,
1299     -    3178 +    781 +744     -716     -690     -665     -    4770 +      "license": "MIT"
1300     -    3179 +    782 +745     -717     -691     -666     -    4771 +    },
1301     -    3180 +    783 +746     -718     -692     -667     -4380 4772      "node_modules/object-assign": {
1302     -    3181 +    784 +747     -719     -693     -668     -4381 4773        "version": "4.1.1",
1303     -    3182 +    785 +748     -720     -694     -669     -4382 4774        "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
1304     -    3183 +    786 +749     -721     -695     -670     -@@ -5384,6 +5776,37 @@
1305     -    3184 +    787 +750     -722     -696     -671     -5384 5776          "node": ">= 0.8"
1306     -    3185 +    788 +751     -723     -697     -672     -5385 5777        }
1307     -    3186 +    789 +752     -724     -698     -673     -5386 5778      },
1308     -    3187 +    790 +753     -725     -699     -674     -    5779 +    "node_modules/update-browserslist-db": {
1309     -    3188 +    791 +754     -726     -700     -675     -    5780 +      "version": "1.2.2",
1310     -    3189 +    792 +755     -727     -701     -676     -    5781 +      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.2.tgz",
1311     -    3190 +    793 +756     -728     -702     -677     -    5782 +      "integrity": "sha512-E85pfNzMQ9jpKkA7+TJAi4TJN+tBCuWh5rUcS/sv6cFi+1q9LYDwDI5dpUL0u/73EElyQ8d3TEaeW4sPedBqYA==",
1312     -    3191 +    794 +757     -729     -703     -678     -    5783 +      "dev": true,
1313     -    3192 +    795 +758     -730     -704     -679     -    5784 +      "funding": [
1314     -    3193 +    796 +759     -731     -705     -680     -    5785 +        {
1315     -    3194 +    797 +760     -732     -706     -681     -    5786 +          "type": "opencollective",
1316     -    3195 +    798 +761     -733     -707     -682     -    5787 +          "url": "https://opencollective.com/browserslist"
1317     -    3196 +    799 +762     -734     -708     -683     -    5788 +        },
1318     -    3197 +    800 +763     -735     -709     -684     -    5789 +        {
1319     -    3198 +    801 +764     -736     -710     -685     -    5790 +          "type": "tidelift",
1320     -    3199 +    802 +765     -737     -711     -686     -    5791 +          "url": "https://tidelift.com/funding/github/npm/browserslist"
1321     -    3200 +    803 +766     -738     -712     -687     -    5792 +        },
1322     -    3201 +    804 +767     -739     -713     -688     -    5793 +        {
1323     -    3202 +    805 +768     -740     -714     -689     -    5794 +          "type": "github",
1324     -    3203 +    806 +769     -741     -715     -690     -    5795 +          "url": "https://github.com/sponsors/ai"
1325     -    3204 +    807 +770     -742     -716     -691     -    5796 +        }
1326     -    3205 +    808 +771     -743     -717     -692     -    5797 +      ],
1327     -    3206 +    809 +772     -744     -718     -693     -    5798 +      "license": "MIT",
1328     -    3207 +    810 +773     -745     -719     -694     -    5799 +      "dependencies": {
1329     -    3208 +    811 +774     -746     -720     -695     -    5800 +        "escalade": "^3.2.0",
1330     -    3209 +    812 +775     -747     -721     -696     -    5801 +        "picocolors": "^1.1.1"
1331     -    3210 +    813 +776     -748     -722     -697     -    5802 +      },
1332     -    3211 +    814 +777     -749     -723     -698     -    5803 +      "bin": {
1333     -    3212 +    815 +778     -750     -724     -699     -    5804 +        "update-browserslist-db": "cli.js"
1334     -    3213 +    816 +779     -751     -725     -700     -    5805 +      },
1335     -    3214 +    817 +780     -752     -726     -701     -    5806 +      "peerDependencies": {
1336     -    3215 +    818 +781     -753     -727     -702     -    5807 +        "browserslist": ">= 4.21.0"
1337     -    3216 +    819 +782     -754     -728     -703     -    5808 +      }
1338     -    3217 +    820 +783     -755     -729     -704     -    5809 +    },
1339     -    3218 +    821 +784     -756     -730     -705     -5387 5810      "node_modules/uri-js": {
1340     -    3219 +    822 +785     -757     -731     -706     -5388 5811        "version": "4.4.1",
1341     -    3220 +    823 +786     -758     -732     -707     -5389 5812        "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
1342     -    3221 +    824 +787     -759     -733     -708     -@@ -5511,6 +5934,20 @@
1343     -    3222 +    825 +788     -760     -734     -709     -5511 5934          }
1344     -    3223 +    826 +789     -761     -735     -710     -5512 5935        }
1345     -    3224 +    827 +790     -762     -736     -711     -5513 5936      },
1346     -    3225 +    828 +791     -763     -737     -712     -    5937 +    "node_modules/vite-plugin-prismjs": {
1347     -    3226 +    829 +792     -764     -738     -713     -    5938 +      "version": "0.0.11",
1348     -    3227 +    830 +793     -765     -739     -714     -    5939 +      "resolved": "https://registry.npmjs.org/vite-plugin-prismjs/-/vite-plugin-prismjs-0.0.11.tgz",
1349     -    3228 +    831 +794     -766     -740     -715     -    5940 +      "integrity": "sha512-20NBQxg/zH+3FTrlU6BQTob720xkuXNYtrx7psAQ4E6pMcRDeLEK77QU9kXURU587+f2To7ASH1JVTGbXVV/vQ==",
1350     -    3229 +    832 +795     -767     -741     -716     -    5941 +      "dev": true,
1351     -    3230 +    833 +796     -768     -742     -717     -    5942 +      "license": "MIT",
1352     -    3231 +    834 +797     -769     -743     -718     -    5943 +      "dependencies": {
1353     -    3232 +    835 +798     -770     -744     -719     -    5944 +        "@babel/core": "^7.15.5",
1354     -    3233 +    836 +799     -771     -745     -720     -    5945 +        "babel-plugin-prismjs": "^2.1.0"
1355     -    3234 +    837 +800     -772     -746     -721     -    5946 +      },
1356     -    3235 +    838 +801     -773     -747     -722     -    5947 +      "engines": {
1357     -    3236 +    839 +802     -774     -748     -723     -    5948 +        "node": ">=12.0.0"
1358     -    3237 +    840 +803     -775     -749     -724     -    5949 +      }
1359     -    3238 +    841 +804     -776     -750     -725     -    5950 +    },
1360     -    3239 +    842 +805     -777     -751     -726     -5514 5951      "node_modules/vitest": {
1361     -    3240 +    843 +806     -778     -752     -727     -5515 5952        "version": "4.0.8",
1362     -    3241 +    844 +807     -779     -753     -728     -5516 5953        "resolved": "https://registry.npmjs.org/vitest/-/vitest-4.0.8.tgz",
1363     -    3242 +    845 +808     -780     -754     -729     -@@ -5780,6 +6217,13 @@
1364     -    3243 +    846 +809     -781     -755     -730     -5780 6217        "dev": true,
1365     -    3244 +    847 +810     -782     -756     -731     -5781 6218        "license": "MIT"
1366     -    3245 +    848 +811     -783     -757     -732     -5782 6219      },
1367     -    3246 +    849 +812     -784     -758     -733     -    6220 +    "node_modules/yallist": {
1368     -    3247 +    850 +813     -785     -759     -734     -    6221 +      "version": "3.1.1",
1369     -    3248 +    851 +814     -786     -760     -735     -    6222 +      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
1370     -    3249 +    852 +815     -787     -761     -736     -    6223 +      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
1371     -    3250 +    853 +816     -788     -762     -737     -    6224 +      "dev": true,
1372     -    3251 +    854 +817     -789     -763     -738     -    6225 +      "license": "ISC"
1373     -    3252 +    855 +818     -790     -764     -739     -    6226 +    },
1374     -    3253 +    856 +819     -791     -765     -740     -5783 6227      "node_modules/yocto-queue": {
1375     -    3254 +    857 +820     -792     -766     -741     -5784 6228        "version": "0.1.0",
1376     -    3255 +    858 +821     -793     -767     -742     -5785 6229        "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
1377     -    3256 +    859 +822     -794     -768     -743     -5786 6230  
1378     -    3257 +    860 +823     -795     -769     -744     -
1379     -    3258 +    861 +824     -796     -770     -745     -```
1380     -    3259 +    862 +825     -797     -771     -746     -
1381     -    3260 +    863 +826     -798     -772     -747     -
1382     -    3261 +    864 +827     -799     -773     -748     -### üìÑ `package.json`
1383     -    3262 +    865 +828     -800     -774     -749     -
1384     -    3263 +    866 +829     -801     -775     -750     -**Type:** Configuration/Data File üìã
1385     -    3264 +    867 +830     -802     -776     -751     -
1386     -    3265 +    868 +831     -803     -777     -752     -```diff
1387     -    3266 +    869 +832     -804     -778     -753     -@@ -38,6 +38,7 @@
1388     -    3267 +    870 +833     -805     -779     -754     - 38  38      "prettier": "3.6.2",
1389     -    3268 +    871 +834     -806     -780     -755     - 39  39      "typescript": "5.9.3",
1390     -    3269 +    872 +835     -807     -781     -756     - 40  40      "vite": "7.2.2",
1391     -    3270 +    873 +836     -808     -782     -757     -     41 +    "vite-plugin-prismjs": "0.0.11",
1392     -    3271 +    874 +837     -809     -783     -758     - 41  42      "vitest": "4.0.8"
1393     -    3272 +    875 +838     -810     -784     -759     - 42  43    },
1394     -    3273 +    876 +839     -811     -785     -760     - 43  44    "dependencies": {
1395     -    3274 +    877 +840     -812     -786     -761     - 44  45  
1396     -    3275 +    878 +841     -813     -787     -762     -
1397     -    3276 +    879 +842     -814     -788     -763     -```
1398     -    3277 +    880 +843     -815     -789     -     13 +## üìù Files Changed (1/1 selected)
1399     -    3278 +    881 +844     -816     -790     -764  14  
1400     -    3279 +    882 +845     -817     -791     -765  15  
1401     -    3280 +    883 +846     -818     -792     -766  16  ### üìÑ `script.js`
1402     -    3281 +    884 +847     -819     -793     -@@ -768,119 +18,32 @@ AI_REVIEW.md      | 107 ++++++++++---
1403     -    3282 +    885 +848     -820     -794     -768  18  **Type:** JavaScript Source File üü®
1404     -    3283 +    886 +849     -821     -795     -769  19  
1405     -    3284 +    887 +850     -822     -796     -770  20  ```diff
1406     -    3285 +    888 +851     -823     -797     -771     -@@ -9,26 +9,9 @@ import { marked } from 'marked';
1407     -    3286 +    889 +852     -824     -798     -772     -  9   9  import markedFootnote from 'marked-footnote';
1408     -    3287 +    890 +853     -825     -799     -773     - 10  10  import mermaid from 'mermaid';
1409     -    3288 +    891 +854     -826     -800     -774     - 11  11  import Prism from 'prismjs';
1410     -    3289 +    892 +855     -827     -801     -775     - 12     -import 'prismjs/components/prism-bash';
1411     -    3290 +    893 +856     -828     -802     -776     - 13     -import 'prismjs/components/prism-batch';
1412     -    3291 +    894 +857     -829     -803     -777     - 14     -import 'prismjs/components/prism-c';
1413     -    3292 +    895 +858     -830     -804     -778     - 15     -import 'prismjs/components/prism-cpp';
1414     -    3293 +    896 +859     -831     -805     -779     - 16     -import 'prismjs/components/prism-css';
1415     -    3294 +    897 +860     -832     -806     -780     - 17     -import 'prismjs/components/prism-diff';
1416     -    3295 +    898 +861     -833     -807     -781     - 18     -import 'prismjs/components/prism-go';
1417     -    3296 +    899 +862     -834     -808     -782     - 19     -import 'prismjs/components/prism-ini';
1418     -    3297 +    900 +863     -835     -809     -783     - 20     -import 'prismjs/components/prism-java';
1419     -    3298 +    901 +864     -836     -810     -784     - 21     -import 'prismjs/components/prism-javascript';
1420     -    3299 +    902 +865     -837     -811     -785     - 22     -import 'prismjs/components/prism-json';
1421     -    3300 +    903 +866     -838     -812     -786     - 23     -import 'prismjs/components/prism-markdown';
1422     -    3301 +    904 +867     -839     -813     -787     - 24     -import 'prismjs/components/prism-python';
1423     -    3302 +    905 +868     -840     -814     -788     - 25     -import 'prismjs/components/prism-r';
1424     -    3303 +    906 +869     -841     -815     -789     - 26     -import 'prismjs/components/prism-rust';
1425     -    3304 +    907 +870     -842     -816     -790     - 27     -import 'prismjs/components/prism-scss';
1426     -    3305 +    908 +871     -843     -817     -791     - 28     -import 'prismjs/components/prism-sql';
1427     -    3306 +    909 +872     -844     -818     -792     - 29     -import 'prismjs/components/prism-typescript';
1428     -    3307 +    910 +873     -845     -819     -793     - 30     -import 'prismjs/components/prism-yaml';
1429     -    3308 +    911 +874     -846     -820     -794     - 31     -import 'prismjs/themes/prism-tomorrow.css'; // Import Prism CSS
1430     -    3309 +    912 +875     -847     -821     -795     -     12 +
1431     -    3310 +    913 +876     -848     -822     -796     -     13 +// PrismJS is now handled by vite-plugin-prismjs
1432     -    3311 +    914 +877     -849     -823     -797     -     14 +// which automatically loads all languages and themes
1433     -    3312 +    915 +878     -850     -824     -798     - 32  15  
1434     -    3313 +    916 +879     -851     -825     -799     - 33  16  import { StorageManager } from './src/js/core/StorageManager.js';
1435     -    3314 +    917 +880     -852     -826     -800     - 34  17  import { ThemeManager } from './src/js/core/ThemeManager.js';
1436     -    3315 +    918 +881     -853     -827     -801     -@@ -189,6 +172,9 @@ function configureMarkedExtensions() {
1437     -    3316 +    919 +882     -854     -828     -802     -189 172                  throwOnError: false,
1438     -    3317 +    920 +883     -855     -829     -803     -190 173                  output: 'html',
1439     -    3318 +    921 +884     -856     -830     -804     -191 174                  trust: true, // Allow custom styling
1440     -    3319 +    922 +885     -857     -831     -805     -    175 +                macros: {
1441     -    3320 +    923 +886     -858     -832     -806     -    176 +                  '\\label': '\\phantom', // Hide \label
1442     -    3321 +    924 +887     -859     -833     -807     -    177 +                },
1443     -    3322 +    925 +888     -860     -834     -808     -192 178                }) +
1444     -    3323 +    926 +889     -861     -835     -809     -193 179                '</div>'
1445     -    3324 +    927 +890     -862     -836     -810     -194 180              );
1446     -    3325 +    928 +891     -863     -837     -811     -@@ -206,8 +192,8 @@ function configureMarkedExtensions() {
1447     -    3326 +    929 +892     -864     -838     -812     -206 192            return src.match(/^\s*\\begin/)?.index;
1448     -    3327 +    930 +893     -865     -839     -813     -207 193          },
1449     -    3328 +    931 +894     -866     -840     -814     -208 194          tokenizer(src) {
1450     -    3329 +    932 +895     -867     -841     -815     -209     -          // Robust regex for LaTeX environments
1451     -    3330 +    933 +896     -868     -842     -816     -210     -          const match = src.match(/^\s*(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
1452     -    3331 +    934 +897     -869     -843     -817     -    195 +          // Robust regex for LaTeX environments (tolerant to whitespace)
1453     -    3332 +    935 +898     -870     -844     -818     -    196 +          const match = src.match(/^\s*(\\begin\s*\{\s*([a-zA-Z]+\*?)\s*\}\s*([\s\S]*?)\s*\\end\s*\{\s*\2\s*\})/);
1454     -    3333 +    936 +899     -871     -845     -819     -211 197            if (match) {
1455     -    3334 +    937 +900     -872     -846     -820     -212 198              return {
1456     -    3335 +    938 +901     -873     -847     -821     -213 199                type: 'mathEnvironment',
1457     -    3336 +    939 +902     -874     -848     -822     -@@ -225,6 +211,12 @@ function configureMarkedExtensions() {
1458     -    3337 +    940 +903     -875     -849     -823     -225 211                  throwOnError: false,
1459     -    3338 +    941 +904     -876     -850     -824     -226 212                  output: 'html',
1460     -    3339 +    942 +905     -877     -851     -825     -227 213                  trust: true,
1461     -    3340 +    943 +906     -878     -852     -826     -    214 +                macros: {
1462     -    3341 +    944 +907     -879     -853     -827     -    215 +                  '\\label': '\\phantom', // Hide \label
1463     -    3342 +    945 +908     -880     -854     -828     -    216 +                  '\\eqref': '\\text', // Plain text for refs (or link if needed)
1464     -    3343 +    946 +909     -881     -855     -829     -    217 +                  '\\cite': '\\text',
1465     -    3344 +    947 +910     -882     -856     -830     -    218 +                  '\\ref': '\\text',
1466     -    3345 +    948 +911     -883     -857     -831     -    219 +                },
1467     -    3346 +    949 +912     -884     -858     -832     -228 220                }) +
1468     -    3347 +    950 +913     -885     -859     -833     -229 221                '</div>'
1469     -    3348 +    951 +914     -886     -860     -834     -230 222              );
1470     -    3349 +    952 +915     -887     -861     -835     -@@ -269,6 +261,9 @@ function configureMarkedExtensions() {
1471     -    3350 +    953 +916     -888     -862     -836     -269 261                displayMode: token.displayMode || false,
1472     -    3351 +    954 +917     -889     -863     -837     -270 262                throwOnError: false,
1473     -    3352 +    955 +918     -890     -864     -838     -271 263                output: 'html',
1474     -    3353 +    956 +919     -891     -865     -839     -    264 +              macros: {
1475     -    3354 +    957 +920     -892     -866     -840     -    265 +                '\\label': '\\phantom',
1476     -    3355 +    958 +921     -893     -867     -841     -    266 +              },
1477     -    3356 +    959 +922     -894     -868     -842     -272 267              });
1478     -    3357 +    960 +923     -895     -869     -843     -273 268  
1479     -    3358 +    961 +924     -896     -870     -844     -274 269              // Wrap display math in a div for proper spacing
1480     -    3359 +    962 +925     -897     -871     -845     -275 270  
1481     -    3360 +    963 +926     -898     -872     -846     -
1482     -    3361 +    964 +927     -899     -873     -847     -```
1483     -    3362 +    965 +928     -900     -874     -848     -
1484     -    3363 +    966 +929     -901     -875     -849     -
1485     -    3364 +    967 +930     -902     -876     -850     -### üìÑ `vite.config.js`
1486     -    3365 +    968 +931     -903     -877     -851     -
1487     -    3366 +    969 +932     -904     -878     -852     -**Type:** JavaScript Source File üü®
1488     -    3367 +    970 +933     -905     -879     -853     -
1489     -    3368 +    971 +934     -906     -880     -854     -```diff
1490     -    3369 +    972 +935     -907     -881     -855     -@@ -1,20 +1,25 @@
1491     -    3370 +    973 +936     -908     -882     -856     -  1   1  import { copyFileSync, mkdirSync, readdirSync } from 'fs';
1492     -    3371 +    974 +937     -909     -883     -857     -  2   2  import { join } from 'path';
1493     -    3372 +    975 +938     -910     -884     -858     -  3   3  import { defineConfig } from 'vite';
1494     -    3373 +    976 +939     -911     -885     -859     -      4 +import prism from 'vite-plugin-prismjs';
1495     -    3374 +    977 +940     -912     -886     -860     -  4   5  
1496     -    3375 +    978 +941     -913     -887     -861     -  5   6  export default defineConfig({
1497     -    3376 +    979 +942     -914     -888     -862     -  6   7    root: './',
1498     -    3377 +    980 +943     -915     -889     -863     -  7   8    base: '/markdown-viewer-app/',
1499     -    3378 +    981 +944     -916     -890     -864     -  8   9    build: {
1500     -    3379 +    982 +945     -917     -891     -865     -  9  10      outDir: 'dist',
1501     -    3380 +    983 +946     -918     -892     -866     - 10     -    // Note: marked, prismjs, and mermaid are loaded via CDN in index.html
1502     -    3381 +    984 +947     -919     -893     -867     - 11     -    // No need for manualChunks as they are not npm dependencies
1503     -    3382 +    985 +948     -920     -894     -868     - 12  11    },
1504     -    3383 +    986 +949     -921     -895     -869     - 13  12    server: {
1505     -    3384 +    987 +950     -922     -896     -870     - 14  13      port: 3000,
1506     -    3385 +    988 +951     -923     -897     -871     - 15  14      open: true,
1507     -    3386 +    989 +952     -924     -898     -872     - 16  15    },
1508     -    3387 +    990 +953     -925     -899     -873     - 17  16    plugins: [
1509     -    3388 +    991 +954     -926     -900     -874     -     17 +    prism({
1510     -    3389 +    992 +955     -927     -901     -875     -     18 +      languages: 'all', // Load ALL languages for future-proofing
1511     -    3390 +    993 +956     -928     -902     -876     -     19 +      plugins: ['line-numbers', 'copy-to-clipboard'],
1512     -    3391 +    994 +957     -929     -903     -877     -     20 +      theme: 'tomorrow',
1513     -    3392 +    995 +958     -930     -904     -878     -     21 +      css: true,
1514     -    3393 +    996 +959     -931     -905     -879     -     22 +    }),
1515     -    3394 +    997 +960     -932     -906     -880     - 18  23      {
1516     -    3395 +    998 +961     -933     -907     -881     - 19  24        name: 'copy-themes',
1517     -    3396 +    999 +962     -934     -908     -882     - 20  25        closeBundle() {
1518     -    3397 +    1000 +963     -935     -909     -883     - 21  26  
1519     -    3398 +    1001 +964     -936     -910     -     21 +@@ -544,6 +544,11 @@ graph TD
1520     -    3399 +    1002 +965     -937     -911     -     22 +544 544          const id = element.id;
1521     -    3400 +    1003 +966     -938     -912     -     23 +545 545          const code = decodeURIComponent(element.dataset.code);
1522     -    3401 +    1004 +967     -939     -913     -     24 +546 546  
1523     -    3402 +    1005 +968     -940     -914     -     25 +    547 +        if (!code || !code.trim()) {
1524     -    3403 +    1006 +969     -941     -915     -     26 +    548 +          element.innerHTML = '';
1525     -    3404 +    1007 +970     -942     -916     -     27 +    549 +          return;
1526     -    3405 +    1008 +971     -943     -917     -     28 +    550 +        }
1527     -    3406 +    1009 +972     -944     -918     -     29 +    551 +
1528     -    3407 +    1010 +973     -945     -919     -     30 +547 552          if (typeof mermaid !== 'undefined') {
1529     -    3408 +    1011 +974     -946     -920     -     31 +548 553            mermaid
1530     -    3409 +    1012 +975     -947     -921     -     32 +549 554              .render('mermaid-svg-' + id, code)
1531     -    3410 +    1013 +976     -948     -922     -     33 +@@ -551,7 +556,11 @@ graph TD
1532     -    3411 +    1014 +977     -949     -923     -     34 +551 556                element.innerHTML = result.svg;
1533     -    3412 +    1015 +978     -950     -924     -     35 +552 557              })
1534     -    3413 +    1016 +979     -951     -925     -     36 +553 558              .catch(err => {
1535     -    3414 +    1017 +980     -952     -926     -     37 +554     -              element.innerHTML = `<p style="color: red;">Mermaid diagram error: ${err.message}</p>`;
1536     -    3415 +    1018 +981     -953     -927     -     38 +    559 +              console.warn('Mermaid error:', err);
1537     -    3416 +    1019 +982     -954     -928     -     39 +    560 +              // Graceful failure: small warning instead of giant red text
1538     -    3417 +    1020 +983     -955     -929     -     40 +    561 +              element.innerHTML = `<div style="color: var(--text-secondary); font-size: 0.8em; text-align: center; border: 1px dashed var(--border-color); padding: 8px; border-radius: 6px; opacity: 0.8; margin: 10px 0;">
1539     -    3418 +    1021 +984     -956     -930     -     41 +    562 +                <span style="font-size: 1.2em;">‚ö†Ô∏è</span> Invalid Mermaid Syntax
1540     -    3419 +    1022 +985     -957     -931     -     42 +    563 +              </div>`;
1541     -    3420 +    1023 +986     -958     -932     -     43 +555 564              });
1542     -    3421 +    1024 +987     -959     -933     -     44 +556 565          }
1543     -    3422 +    1025 +988     -960     -934     -     45 +557 566        });
1544     -    3423 +    1026 +989     -961     -935     -     46 +558 567  
1545     -    3424 +    1027 +990     -962     -936     -884  47  
1546     -    3425 +    1028 +991     -963     -937     -885  48  ```
1547     -    3426 +    1029 +992     -964     -938     -886  49  
1548     -    3427 +    1030 +993     -965     -939     -@@ -926,4 +89,4 @@ Please provide specific feedback on:
1549     -    3428 +    1031 +994     -966     -940     -926  89  
1550     -    3429 +    1032 +995     -967     -941     -927  90  ---
1551     -    3430 +    1033 +996     -968     -942     -928  91  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
1552     -    3431 +    1034 +997     -969     -943     -929     -*Files processed: 5/5 | Errors: 0 | Generated: 2025-12-09T02:07:02.257Z*
1553     -    3432 +    1035 +998     -970     -944     -     92 +*Files processed: 1/1 | Errors: 0 | Generated: 2025-12-09T03:47:49.443Z*
1554     -    3433 +    1036 +999     -971     -945     -930  93  
1555     -    3434 +    1037 +1000     -972     -     32 +  9     -script.js | 11 ++++++++++-
1556     -    3435 +    1038 +1001     -973     -     33 + 10     - 1 file changed, 10 insertions(+), 1 deletion(-)
1557     -    3436 +    1039 +1002     -974     -     34 +      9 +AI_REVIEW.md | 899 +++--------------------------------------------------------
1558     -    3437 +    1040 +1003     -975     -     35 +     10 + style.css    |  44 ++-
1559     -    3438 +    1041 +1004     -976     -     36 +     11 + 2 files changed, 71 insertions(+), 872 deletions(-)
1560     -    3439 +    1042 +1005     -977     -     37 + 11  12  ```
1561     -    3440 +    1043 +1006     -978     -     38 + 12  13  
1562     -    3441 +    1044 +1007     -979     -     39 + 13     -## üìù Files Changed (1/1 selected)
1563     -    3442 +    1045 +1008     -980     -     40 +     14 +## üìù Files Changed (2/2 selected)
1564     -    3443 +    1046 +1009     -981     -     41 + 14  15  
1565     -    3444 +    1047 +1010     -982     -     42 + 15  16  
1566     -    3445 +    1048 +1011     -983     -     43 + 16     -### üìÑ `script.js`
1567     -    3446 +    1049 +1012     -984     -     44 +     17 +### üìÑ `AI_REVIEW.md`
1568     -    3447 +    1050 +1013     -985     -     45 + 17  18  
1569     -    3448 +    1051 +1014     -986     -     46 + 18     -**Type:** JavaScript Source File üü®
1570     -    3449 +    1052 +1015     -987     -     47 +     19 +**Type:** Documentation üìñ
1571     -    3450 +    1053 +1016     -988     -     48 + 19  20  
1572     -    3451 +    1054 +1017     -989     -     49 + 20  21  ```diff
1573     -    3452 +    1055 +1018     -990     -     50 + 21     -@@ -544,6 +544,11 @@ graph TD
1574     -    3453 +    1056 +1019     -991     -     51 + 22     -544 544          const id = element.id;
1575     -    3454 +    1057 +1020     -992     -     52 + 23     -545 545          const code = decodeURIComponent(element.dataset.code);
1576     -    3455 +    1058 +1021     -993     -     53 + 24     -546 546  
1577     -    3456 +    1059 +1022     -994     -     54 + 25     -    547 +        if (!code || !code.trim()) {
1578     -    3457 +    1060 +1023     -995     -     55 + 26     -    548 +          element.innerHTML = '';
1579     -    3458 +    1061 +1024     -996     -     56 + 27     -    549 +          return;
1580     -    3459 +    1062 +1025     -997     -     57 + 28     -    550 +        }
1581     -    3460 +    1063 +1026     -998     -     58 + 29     -    551 +
1582     -    3461 +    1064 +1027     -999     -     59 + 30     -547 552          if (typeof mermaid !== 'undefined') {
1583     -    3462 +    1065 +1028     -1000     -     60 + 31     -548 553            mermaid
1584     -    3463 +    1066 +1029     -1001     -     61 + 32     -549 554              .render('mermaid-svg-' + id, code)
1585     -    3464 +    1067 +1030     -1002     -     62 + 33     -@@ -551,7 +556,11 @@ graph TD
1586     -    3465 +    1068 +1031     -1003     -     63 + 34     -551 556                element.innerHTML = result.svg;
1587     -    3466 +    1069 +1032     -1004     -     64 + 35     -552 557              })
1588     -    3467 +    1070 +1033     -1005     -     65 + 36     -553 558              .catch(err => {
1589     -    3468 +    1071 +1034     -1006     -     66 + 37     -554     -              element.innerHTML = `<p style="color: red;">Mermaid diagram error: ${err.message}</p>`;
1590     -    3469 +    1072 +1035     -1007     -     67 + 38     -    559 +              console.warn('Mermaid error:', err);
1591     -    3470 +    1073 +1036     -1008     -     68 + 39     -    560 +              // Graceful failure: small warning instead of giant red text
1592     -    3471 +    1074 +1037     -1009     -     69 + 40     -    561 +              element.innerHTML = `<div style="color: var(--text-secondary); font-size: 0.8em; text-align: center; border: 1px dashed var(--border-color); padding: 8px; border-radius: 6px; opacity: 0.8; margin: 10px 0;">
1593     -    3472 +    1075 +1038     -1010     -     70 + 41     -    562 +                <span style="font-size: 1.2em;">‚ö†Ô∏è</span> Invalid Mermaid Syntax
1594     -    3473 +    1076 +1039     -1011     -     71 + 42     -    563 +              </div>`;
1595     -    3474 +    1077 +1040     -1012     -     72 + 43     -555 564              });
1596     -    3475 +    1078 +1041     -1013     -     73 + 44     -556 565          }
1597     -    3476 +    1079 +1042     -1014     -     74 + 45     -557 566        });
1598     -    3477 +    1080 +1043     -1015     -     75 + 46     -558 567  
1599     -    3478 +    1081 +1044     -1016     -     76 +     22 +@@ -1,4 +1,4 @@
1600     -    3479 +    1082 +1045     -1017     -     77 +     23 +  1     -# üîç Code Review - 12/9/2025, 7:37:02 AM
1601     -    3480 +    1083 +1046     -1018     -     78 +     24 +      1 +# üîç Code Review - 12/9/2025, 9:17:49 AM
1602     -    3481 +    1084 +1047     -1019     -     79 +     25 +  2   2  
1603     -    3482 +    1085 +1048     -1020     -     80 +     26 +  3   3  **Project:** AI Visual Code Review
1604     -    3483 +    1086 +1049     -1021     -     81 +     27 +  4   4  **Generated by:** AI Visual Code Review v2.0
1605     -    3484 +    1087 +1050     -1022     -     82 +     28 +@@ -6,761 +6,11 @@
1606     -    3485 +    1088 +1051     -1023     -     83 +     29 +  6   6  ## üìä Change Summary
1607     -    3486 +    1089 +1052     -1024     -     84 +     30 +  7   7  
1608     -    3487 +    1090 +1053     -1025     -     85 +     31 +  8   8  ```
1609     -    3488 +    1091 +1054     -1026     -     86 +     32 +  9     -AI_REVIEW.md      | 107 ++++++++++---
1610     -    3489 +    1092 +1055     -1027     -     87 +     33 + 10     - package-lock.json | 444 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
1611     -    3490 +    1093 +1056     -1028     -     88 +     34 + 11     - package.json      |   1 +
1612     -    3491 +    1094 +1057     -1029     -     89 +     35 + 12     - script.js         |  39 +++--
1613     -    3492 +    1095 +1058     -1030     -     90 +     36 + 13     - vite.config.js    |   9 +-
1614     -    3493 +    1096 +1059     -1031     -     91 +     37 + 14     - 5 files changed, 555 insertions(+), 45 deletions(-)
1615     -    3494 +    1097 +1060     -1032     -     92 +     38 +      9 +script.js | 11 ++++++++++-
1616     -    3495 +    1098 +1061     -1033     -     93 +     39 +     10 + 1 file changed, 10 insertions(+), 1 deletion(-)
1617     -    3496 +    1099 +1062     -1034     -     94 +     40 + 15  11  ```
1618     -    3497 +    1100 +1063     -1035     -     95 +     41 + 16  12  
1619     -    3498 +    1101 +1064     -1036     -     96 +     42 + 17     -## üìù Files Changed (5/5 selected)
1620     -    3499 +    1102 +1065     -1037     -     97 +     43 + 18     -
1621     -    3500 +    1103 +1066     -1038     -     98 +     44 + 19     -
1622     -    3501 +    1104 +1067     -1039     -     99 +     45 + 20     -### üìÑ `AI_REVIEW.md`
1623     -    3502 +    1105 +1068     -1040     -    100 +     46 + 21     -
1624     -    3503 +    1106 +1069     -1041     -    101 +     47 + 22     -**Type:** Documentation üìñ
1625     -    3504 +    1107 +1070     -1042     -    102 +     48 + 23     -
1626     -    3505 +    1108 +1071     -1043     -    103 +     49 + 24     -```diff
1627     -    3506 +    1109 +1072     -1044     -    104 +     50 + 25     -@@ -1,4 +1,4 @@
1628     -    3507 +    1110 +1073     -1045     -    105 +     51 + 26     -  1     -# üîç Code Review - 12/9/2025, 7:27:41 AM
1629     -    3508 +    1111 +1074     -1046     -    106 +     52 + 27     -      1 +# üîç Code Review - 12/9/2025, 7:32:58 AM
1630     -    3509 +    1112 +1075     -1047     -    107 +     53 + 28     -  2   2  
1631     -    3510 +    1113 +1076     -1048     -    108 +     54 + 29     -  3   3  **Project:** AI Visual Code Review
1632     -    3511 +    1114 +1077     -1049     -    109 +     55 + 30     -  4   4  **Generated by:** AI Visual Code Review v2.0
1633     -    3512 +    1115 +1078     -1050     -    110 +     56 + 31     -@@ -6,12 +6,13 @@
1634     -    3513 +    1116 +1079     -1051     -    111 +     57 + 32     -  6   6  ## üìä Change Summary
1635     -    3514 +    1117 +1080     -1052     -    112 +     58 + 33     -  7   7  
1636     -    3515 +    1118 +1081     -1053     -    113 +     59 + 34     -  8   8  ```
1637     -    3516 +    1119 +1082     -1054     -    114 +     60 + 35     -  9     -AI_REVIEW.md | 18009 ++++++++++++++++++++++++++++++++++++++++++++++++++-------
1638     -    3517 +    1120 +1083     -1055     -    115 +     61 + 36     - 10     - script.js    |     5 +-
1639     -    3518 +    1121 +1084     -1056     -    116 +     62 + 37     - 11     - 2 files changed, 15932 insertions(+), 2082 deletions(-)
1640     -    3519 +    1122 +1085     -1057     -    117 +     63 + 38     -      9 +AI_REVIEW.md | 15943 +--------------------------------------------------------
1641     -    3520 +    1123 +1086     -1058     -    118 +     64 + 39     -     10 + script.js    |    14 +-
1642     -    3521 +    1124 +1087     -1059     -    119 +     65 + 40     -     11 + style.css    |     2 +-
1643     -    3522 +    1125 +1088     -1060     -    120 +     66 + 41     -     12 + 3 files changed, 32 insertions(+), 15927 deletions(-)
1644     -    3523 +    1126 +1089     -1061     -    121 +     67 + 42     - 12  13  ```
1645     -    3524 +    1127 +1090     -1062     -    122 +     68 + 43     - 13  14  
1646     -    3525 +    1128 +1091     -1063     -    123 +     69 + 44     - 14     -## üìù Files Changed (2/2 selected)
1647     -    3526 +    1129 +1092     -1064     -    124 +     70 + 45     -     15 +## üìù Files Changed (3/3 selected)
1648     -    3527 +    1130 +1093     -1065     -    125 +     71 + 46     - 15  16  
1649     -    3528 +    1131 +1094     -1066     -    126 +     72 + 47     - 16  17  
1650     -    3529 +    1132 +1095     -1067     -    127 +     73 + 48     - 17  18  ### üìÑ `AI_REVIEW.md`
1651     -    3530 +    1133 +1096     -1068     -    128 +     74 + 49     -@@ -26,21 +27,85 @@ AI_REVIEW.md | 18009 ++++++++++++++++++++++++++++++++++++++++++++++++++-------
1652     -    3531 +    1134 +1097     -1069     -    129 +     75 + 50     - 26  27  **Type:** JavaScript Source File üü®
1653     -    3532 +    1135 +1098     -1070     -    130 +     76 + 51     - 27  28  
1654     -    3533 +    1136 +1099     -1071     -    131 +     77 + 52     - 28  29  ```diff
1655     -    3534 +    1137 +1100     -1072     -    132 +     78 + 53     - 29     -@@ -199,10 +199,11 @@ function configureMarkedExtensions() {
1656     -    3535 +    1138 +1101     -1073     -    133 +     79 + 54     - 30     -199 199          name: 'mathEnvironment',
1657     -    3536 +    1139 +1102     -1074     -    134 +     80 + 55     - 31     -200 200          level: 'block',
1658     -    3537 +    1140 +1103     -1075     -    135 +     81 + 56     - 32     -201 201          start(src) {
1659     -    3538 +    1141 +1104     -1076     -    136 +     82 + 57     - 33     -202     -          return src.match(/^\\begin/)?.index;
1660     -    3539 +    1142 +1105     -1077     -    137 +     83 + 58     - 34     -    202 +          // Allow whitespace before \begin
1661     -    3540 +    1143 +1106     -1078     -    138 +     84 + 59     - 35     -    203 +          return src.match(/^\s*\\begin/)?.[0]?.length ? src.search(/\S/) : undefined;
1662     -    3541 +    1144 +1107     -1079     -    139 +     85 + 60     - 36     -203 204          },
1663     -    3542 +    1145 +1108     -1080     -    140 +     86 + 61     - 37     -204 205          tokenizer(src) {
1664     -    3543 +    1146 +1109     -1081     -    141 +     87 + 62     - 38     -205     -          const match = src.match(/^(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
1665     -    3544 +    1147 +1110     -1082     -    142 +     88 + 63     - 39     -    206 +          const match = src.match(/^\s*(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
1666     -    3545 +    1148 +1111     -1083     -    143 +     89 + 64     - 40     -206 207            if (match) {
1667     -    3546 +    1149 +1112     -1084     -    144 +     90 + 65     - 41     -207 208              return {
1668     -    3547 +    1150 +1113     -1085     -    145 +     91 + 66     - 42     -208 209                type: 'mathEnvironment',
1669     -    3548 +    1151 +1114     -1086     -    146 +     92 + 67     - 43     -209 210  
1670     -    3549 +    1152 +1115     -1087     -    147 +     93 + 68     -     30 +@@ -10,10 +10,13 @@ import markedFootnote from 'marked-footnote';
1671     -    3550 +    1153 +1116     -1088     -    148 +     94 + 69     -     31 + 10  10  import mermaid from 'mermaid';
1672     -    3551 +    1154 +1117     -1089     -    149 +     95 + 70     -     32 + 11  11  import Prism from 'prismjs';
1673     -    3552 +    1155 +1118     -1090     -    150 +     96 + 71     -     33 + 12  12  import 'prismjs/components/prism-bash';
1674     -    3553 +    1156 +1119     -1091     -    151 +     97 + 72     -     34 +     13 +import 'prismjs/components/prism-batch';
1675     -    3554 +    1157 +1120     -1092     -    152 +     98 + 73     -     35 + 13  14  import 'prismjs/components/prism-c';
1676     -    3555 +    1158 +1121     -1093     -    153 +     99 + 74     -     36 + 14  15  import 'prismjs/components/prism-cpp';
1677     -    3556 +    1159 +1122     -1094     -    154 +    100 + 75     -     37 + 15  16  import 'prismjs/components/prism-css';
1678     -    3557 +    1160 +1123     -1095     -    155 +    101 + 76     -     38 +     17 +import 'prismjs/components/prism-diff';
1679     -    3558 +    1161 +1124     -1096     -    156 +    102 + 77     -     39 + 16  18  import 'prismjs/components/prism-go';
1680     -    3559 +    1162 +1125     -1097     -    157 +    103 + 78     -     40 +     19 +import 'prismjs/components/prism-ini';
1681     -    3560 +    1163 +1126     -1098     -    158 +    104 + 79     -     41 + 17  20  import 'prismjs/components/prism-java';
1682     -    3561 +    1164 +1127     -1099     -    159 +    105 + 80     -     42 + 18  21  import 'prismjs/components/prism-javascript';
1683     -    3562 +    1165 +1128     -1100     -    160 +    106 + 81     -     43 + 19  22  import 'prismjs/components/prism-json';
1684     -    3563 +    1166 +1129     -1101     -    161 +    107 + 82     -     44 +@@ -200,15 +203,16 @@ function configureMarkedExtensions() {
1685     -    3564 +    1167 +1130     -1102     -    162 +    108 + 83     -     45 +200 203          level: 'block',
1686     -    3565 +    1168 +1131     -1103     -    163 +    109 + 84     -     46 +201 204          start(src) {
1687     -    3566 +    1169 +1132     -1104     -    164 +    110 + 85     -     47 +202 205            // Allow whitespace before \begin
1688     -    3567 +    1170 +1133     -1105     -    165 +    111 + 86     -     48 +203     -          return src.match(/^\s*\\begin/)?.[0]?.length ? src.search(/\S/) : undefined;
1689     -    3568 +    1171 +1134     -1106     -    166 +    112 + 87     -     49 +    206 +          return src.match(/^\s*\\begin/)?.index;
1690     -    3569 +    1172 +1135     -1107     -    167 +    113 + 88     -     50 +204 207          },
1691     -    3570 +    1173 +1136     -1108     -    168 +    114 + 89     -     51 +205 208          tokenizer(src) {
1692     -    3571 +    1174 +1137     -1109     -    169 +    115 + 90     -     52 +    209 +          // Robust regex for LaTeX environments
1693     -    3572 +    1175 +1138     -1110     -    170 +    116 + 91     -     53 +206 210            const match = src.match(/^\s*(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
1694     -    3573 +    1176 +1139     -1111     -    171 +    117 + 92     -     54 +207 211            if (match) {
1695     -    3574 +    1177 +1140     -1112     -    172 +    118 + 93     -     55 +208 212              return {
1696     -    3575 +    1178 +1141     -1113     -    173 +    119 + 94     -     56 +209 213                type: 'mathEnvironment',
1697     -    3576 +    1179 +1142     -1114     -    174 +    120 + 95     -     57 +210 214                raw: match[0],
1698     -    3577 +    1180 +1143     -1115     -    175 +    121 + 96     -     58 +211     -              text: match[1], // Capture the inner content or full block? KaTeX needs full block for environments
1699     -    3578 +    1181 +1144     -1116     -    176 +    122 + 97     -     59 +    215 +              text: match[1],
1700     -    3579 +    1182 +1145     -1117     -    177 +    123 + 98     -     60 +212 216              };
1701     -    3580 +    1183 +1146     -1118     -    178 +    124 + 99     -     61 +213 217            }
1702     -    3581 +    1184 +1147     -1119     -    179 +    125 +100     -     62 +214 218          },
1703     -    3582 +    1185 +1148     -1120     -    180 +    126 +101     -     63 +@@ -518,13 +522,15 @@ graph TD
1704     -    3583 +    1186 +1149     -1121     -    181 +    127 +102     -     64 +518 522        let html = marked.parse(markdownText);
1705     -    3584 +    1187 +1150     -1122     -    182 +    128 +103     -     65 +519 523  
1706     -    3585 +    1188 +1151     -1123     -    183 +    129 +104     -     66 +520 524        // Replace mermaid code blocks with placeholders
1707     -    3586 +    1189 +1152     -1124     -    184 +    130 +105     -     67 +    525 +      // Use 'mermaid-diagram' class to avoid auto-rendering conflicts
1708     -    3587 +    1190 +1153     -1125     -    185 +    131 +106     -     68 +521 526        html = html.replace(
1709     -    3588 +    1191 +1154     -1126     -    186 +    132 +107     -     69 +522 527          /<pre><code class="language-mermaid">([\s\S]*?)<\/code><\/pre>/g,
1710     -    3589 +    1192 +1155     -1127     -    187 +    133 +108     -     70 +523 528          (match, code) => {
1711     -    3590 +    1193 +1156     -1128     -    188 +    134 +109     -     71 +    529 +          // Decode HTML entities before passing to Mermaid
1712     -    3591 +    1194 +1157     -1129     -    189 +    135 +110     -     72 +524 530            const decodedCode = decodeHtmlEntities(code);
1713     -    3592 +    1195 +1158     -1130     -    190 +    136 +111     -     73 +525 531            const id = 'mermaid-' + Math.random().toString(36).substr(2, 9);
1714     -    3593 +    1196 +1159     -1131     -    191 +    137 +112     -     74 +526 532            // Return placeholder div
1715     -    3594 +    1197 +1160     -1132     -    192 +    138 +113     -     75 +527     -          return `<div class="mermaid" id="${id}" data-code="${encodeURIComponent(decodedCode)}">${code}</div>`;
1716     -    3595 +    1198 +1161     -1133     -    193 +    139 +114     -     76 +    533 +          return `<div class="mermaid-diagram" id="${id}" data-code="${encodeURIComponent(decodedCode)}">${code}</div>`;
1717     -    3596 +    1199 +1162     -1134     -    194 +    140 +115     -     77 +528 534          }
1718     -    3597 +    1200 +1163     -1135     -    195 +    141 +116     -     78 +529 535        );
1719     -    3598 +    1201 +1164     -1136     -    196 +    142 +117     -     79 +530 536  
1720     -    3599 +    1202 +1165     -1137     -    197 +    143 +118     -     80 +@@ -538,7 +544,7 @@ graph TD
1721     -    3600 +    1203 +1166     -1138     -    198 +    144 +119     -     81 +538 544        preview.innerHTML = cleanHtml;
1722     -    3601 +    1204 +1167     -1139     -    199 +    145 +120     -     82 +539 545  
1723     -    3602 +    1205 +1168     -1140     -    200 +    146 +121     -     83 +540 546        // Render Mermaid diagrams synchronously after DOM update
1724     -    3603 +    1206 +1169     -1141     -    201 +    147 +122     -     84 +541     -      const mermaidElements = preview.querySelectorAll('.mermaid');
1725     -    3604 +    1207 +1170     -1142     -    202 +    148 +123     -     85 +    547 +      const mermaidElements = preview.querySelectorAll('.mermaid-diagram');
1726     -    3605 +    1208 +1171     -1143     -    203 +    149 +124     -     86 +542 548        mermaidElements.forEach(element => {
1727     -    3606 +    1209 +1172     -1144     -    204 +    150 +125     -     87 +543 549          const id = element.id;
1728     -    3607 +    1210 +1173     -1145     -    205 +    151 +126     -     88 +544 550          const code = decodeURIComponent(element.dataset.code);
1729     -    3608 +    1211 +1174     -1146     -    206 +    152 +127     -     89 +545 551  
1730     -    3609 +    1212 +1175     -1147     -    207 +    153 +128     -     90 +
1731     -    3610 +    1213 +1176     -1148     -    208 +    154 +129     -     91 +```
1732     -    3611 +    1214 +1177     -1149     -    209 +    155 +130     -     92 +
1733     -    3612 +    1215 +1178     -1150     -    210 +    156 +131     -     93 +
1734     -    3613 +    1216 +1179     -1151     -    211 +    157 +132     -     94 +### üìÑ `style.css`
1735     -    3614 +    1217 +1180     -1152     -    212 +    158 +133     -     95 +
1736     -    3615 +    1218 +1181     -1153     -    213 +    159 +134     -     96 +**Type:** Stylesheet üé®
1737     -    3616 +    1219 +1182     -1154     -    214 +    160 +135     -     97 +
1738     -    3617 +    1220 +1183     -1155     -    215 +    161 +136     -     98 +```diff
1739     -    3618 +    1221 +1184     -1156     -    216 +    162 +137     -     99 +@@ -630,7 +630,7 @@ body {
1740     -    3619 +    1222 +1185     -1157     -    217 +    163 +138     -    100 +630 630  }
1741     -    3620 +    1223 +1186     -1158     -    218 +    164 +139     -    101 +631 631  
1742     -    3621 +    1224 +1187     -1159     -    219 +    165 +140     -    102 +632 632  /* ==================== MERMAID DIAGRAMS ==================== */
1743     -    3622 +    1225 +1188     -1160     -    220 +    166 +141     -    103 +633     -.mermaid {
1744     -    3623 +    1226 +1189     -1161     -    221 +    167 +142     -    104 +    633 +.mermaid-diagram {
1745     -    3624 +    1227 +1190     -1162     -    222 +    168 +143     -    105 +634 634    margin: 2em 0;
1746     -    3625 +    1228 +1191     -1163     -    223 +    169 +144     -    106 +635 635    display: flex;
1747     -    3626 +    1229 +1192     -1164     -    224 +    170 +145     -    107 +636 636    justify-content: center;
1748     -    3627 +    1230 +1193     -1165     -    225 +    171 +146     -    108 +637 637  
1749     -    3628 +    1231 +1194     -1166     -    226 +    172 +147     - 44 109  
1750     -    3629 +    1232 +1195     -1167     -    227 +    173 +148     - 45 110  ```
1751     -    3630 +    1233 +1196     -1168     -    228 +    174 +149     - 46 111  
1752     -    3631 +    1234 +1197     -1169     -    229 +    175 +150     -@@ -86,4 +151,4 @@ Please provide specific feedback on:
1753     -    3632 +    1235 +1198     -1170     -    230 +    176 +151     - 86 151  
1754     -    3633 +    1236 +1199     -1171     -    231 +    177 +152     - 87 152  ---
1755     -    3634 +    1237 +1200     -1172     -    232 +    178 +153     - 88 153  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
1756     -    3635 +    1238 +1201     -1173     -    233 +    179 +154     - 89     -*Files processed: 1/2 | Errors: 1 | Generated: 2025-12-09T01:57:41.998Z*
1757     -    3636 +    1239 +1202     -1174     -    234 +    180 +155     -    154 +*Files processed: 2/3 | Errors: 1 | Generated: 2025-12-09T02:02:58.836Z*
1758     -    3637 +    1240 +1203     -1175     -    235 +    181 +156     - 90 155  
1759     -    3638 +    1241 +1204     -1176     -    236 +    182 +157     -
1760     -    3639 +    1242 +1205     -1177     -    237 +    183 +158     -```
1761     -    3640 +    1243 +1206     -1178     -    238 +    184 +159     -
1762     -    3641 +    1244 +1207     -1179     -    239 +    185 +160     -
1763     -    3642 +    1245 +1208     -1180     -    240 +    186 +161     -### üìÑ `package-lock.json`
1764     -    3643 +    1246 +1209     -1181     -    241 +    187 +162     -
1765     -    3644 +    1247 +1210     -1182     -    242 +    188 +163     -**Type:** Configuration/Data File üìã
1766     -    3645 +    1248 +1211     -1183     -    243 +    189 +164     -
1767     -    3646 +    1249 +1212     -1184     -    244 +    190 +165     -```diff
1768     -    3647 +    1250 +1213     -1185     -    245 +    191 +166     -@@ -26,6 +26,7 @@
1769     -    3648 +    1251 +1214     -1186     -    246 +    192 +167     - 26  26          "prettier": "3.6.2",
1770     -    3649 +    1252 +1215     -1187     -    247 +    193 +168     - 27  27          "typescript": "5.9.3",
1771     -    3650 +    1253 +1216     -1188     -    248 +    194 +169     - 28  28          "vite": "7.2.2",
1772     -    3651 +    1254 +1217     -1189     -    249 +    195 +170     -     29 +        "vite-plugin-prismjs": "0.0.11",
1773     -    3652 +    1255 +1218     -1190     -    250 +    196 +171     - 29  30          "vitest": "4.0.8"
1774     -    3653 +    1256 +1219     -1191     -    251 +    197 +172     - 30  31        }
1775     -    3654 +    1257 +1220     -1192     -    252 +    198 +173     - 31  32      },
1776     -    3655 +    1258 +1221     -1193     -    253 +    199 +174     -@@ -93,6 +94,175 @@
1777     -    3656 +    1259 +1222     -1194     -    254 +    200 +175     - 93  94        "dev": true,
1778     -    3657 +    1260 +1223     -1195     -    255 +    201 +176     - 94  95        "license": "MIT"
1779     -    3658 +    1261 +1224     -1196     -    256 +    202 +177     - 95  96      },
1780     -    3659 +    1262 +1225     -1197     -    257 +    203 +178     -     97 +    "node_modules/@babel/code-frame": {
1781     -    3660 +    1263 +1226     -1198     -    258 +    204 +179     -     98 +      "version": "7.27.1",
1782     -    3661 +    1264 +1227     -1199     -    259 +    205 +180     -     99 +      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
1783     -    3662 +    1265 +1228     -1200     -    260 +    206 +181     -    100 +      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
1784     -    3663 +    1266 +1229     -1201     -    261 +    207 +182     -    101 +      "dev": true,
1785     -    3664 +    1267 +1230     -1202     -    262 +    208 +183     -    102 +      "license": "MIT",
1786     -    3665 +    1268 +1231     -1203     -    263 +    209 +184     -    103 +      "dependencies": {
1787     -    3666 +    1269 +1232     -1204     -    264 +    210 +185     -    104 +        "@babel/helper-validator-identifier": "^7.27.1",
1788     -    3667 +    1270 +1233     -1205     -    265 +    211 +186     -    105 +        "js-tokens": "^4.0.0",
1789     -    3668 +    1271 +1234     -1206     -    266 +    212 +187     -    106 +        "picocolors": "^1.1.1"
1790     -    3669 +    1272 +1235     -1207     -    267 +    213 +188     -    107 +      },
1791     -    3670 +    1273 +1236     -1208     -    268 +    214 +189     -    108 +      "engines": {
1792     -    3671 +    1274 +1237     -1209     -    269 +    215 +190     -    109 +        "node": ">=6.9.0"
1793     -    3672 +    1275 +1238     -1210     -    270 +    216 +191     -    110 +      }
1794     -    3673 +    1276 +1239     -1211     -    271 +    217 +192     -    111 +    },
1795     -    3674 +    1277 +1240     -1212     -    272 +    218 +193     -    112 +    "node_modules/@babel/code-frame/node_modules/js-tokens": {
1796     -    3675 +    1278 +1241     -1213     -    273 +    219 +194     -    113 +      "version": "4.0.0",
1797     -    3676 +    1279 +1242     -1214     -    274 +    220 +195     -    114 +      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
1798     -    3677 +    1280 +1243     -1215     -    275 +    221 +196     -    115 +      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
1799     -    3678 +    1281 +1244     -1216     -    276 +    222 +197     -    116 +      "dev": true,
1800     -    3679 +    1282 +1245     -1217     -    277 +    223 +198     -    117 +      "license": "MIT"
1801     -    3680 +    1283 +1246     -1218     -    278 +    224 +199     -    118 +    },
1802     -    3681 +    1284 +1247     -1219     -    279 +    225 +200     -    119 +    "node_modules/@babel/compat-data": {
1803     -    3682 +    1285 +1248     -1220     -    280 +    226 +201     -    120 +      "version": "7.28.5",
1804     -    3683 +    1286 +1249     -1221     -    281 +    227 +202     -    121 +      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
1805     -    3684 +    1287 +1250     -1222     -    282 +    228 +203     -    122 +      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
1806     -    3685 +    1288 +1251     -1223     -    283 +    229 +204     -    123 +      "dev": true,
1807     -    3686 +    1289 +1252     -1224     -    284 +    230 +205     -    124 +      "license": "MIT",
1808     -    3687 +    1290 +1253     -1225     -    285 +    231 +206     -    125 +      "engines": {
1809     -    3688 +    1291 +1254     -1226     -    286 +    232 +207     -    126 +        "node": ">=6.9.0"
1810     -    3689 +    1292 +1255     -1227     -    287 +    233 +208     -    127 +      }
1811     -    3690 +    1293 +1256     -1228     -    288 +    234 +209     -    128 +    },
1812     -    3691 +    1294 +1257     -1229     -    289 +    235 +210     -    129 +    "node_modules/@babel/core": {
1813     -    3692 +    1295 +1258     -1230     -    290 +    236 +211     -    130 +      "version": "7.28.5",
1814     -    3693 +    1296 +1259     -1231     -    291 +    237 +212     -    131 +      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
1815     -    3694 +    1297 +1260     -1232     -    292 +    238 +213     -    132 +      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
1816     -    3695 +    1298 +1261     -1233     -    293 +    239 +214     -    133 +      "dev": true,
1817     -    3696 +    1299 +1262     -1234     -    294 +    240 +215     -    134 +      "license": "MIT",
1818     -    3697 +    1300 +1263     -1235     -    295 +    241 +216     -    135 +      "dependencies": {
1819     -    3698 +    1301 +1264     -1236     -    296 +    242 +217     -    136 +        "@babel/code-frame": "^7.27.1",
1820     -    3699 +    1302 +1265     -1237     -    297 +    243 +218     -    137 +        "@babel/generator": "^7.28.5",
1821     -    3700 +    1303 +1266     -1238     -    298 +    244 +219     -    138 +        "@babel/helper-compilation-targets": "^7.27.2",
1822     -    3701 +    1304 +1267     -1239     -    299 +    245 +220     -    139 +        "@babel/helper-module-transforms": "^7.28.3",
1823     -    3702 +    1305 +1268     -1240     -    300 +    246 +221     -    140 +        "@babel/helpers": "^7.28.4",
1824     -    3703 +    1306 +1269     -1241     -    301 +    247 +222     -    141 +        "@babel/parser": "^7.28.5",
1825     -    3704 +    1307 +1270     -1242     -    302 +    248 +223     -    142 +        "@babel/template": "^7.27.2",
1826     -    3705 +    1308 +1271     -1243     -    303 +    249 +224     -    143 +        "@babel/traverse": "^7.28.5",
1827     -    3706 +    1309 +1272     -1244     -    304 +    250 +225     -    144 +        "@babel/types": "^7.28.5",
1828     -    3707 +    1310 +1273     -1245     -    305 +    251 +226     -    145 +        "@jridgewell/remapping": "^2.3.5",
1829     -    3708 +    1311 +1274     -1246     -    306 +    252 +227     -    146 +        "convert-source-map": "^2.0.0",
1830     -    3709 +    1312 +1275     -1247     -    307 +    253 +228     -    147 +        "debug": "^4.1.0",
1831     -    3710 +    1313 +1276     -1248     -    308 +    254 +229     -    148 +        "gensync": "^1.0.0-beta.2",
1832     -    3711 +    1314 +1277     -1249     -    309 +    255 +230     -    149 +        "json5": "^2.2.3",
1833     -    3712 +    1315 +1278     -1250     -    310 +    256 +231     -    150 +        "semver": "^6.3.1"
1834     -    3713 +    1316 +1279     -1251     -    311 +    257 +232     -    151 +      },
1835     -    3714 +    1317 +1280     -1252     -    312 +    258 +233     -    152 +      "engines": {
1836     -    3715 +    1318 +1281     -1253     -    313 +    259 +234     -    153 +        "node": ">=6.9.0"
1837     -    3716 +    1319 +1282     -1254     -    314 +    260 +235     -    154 +      },
1838     -    3717 +    1320 +1283     -1255     -    315 +    261 +236     -    155 +      "funding": {
1839     -    3718 +    1321 +1284     -1256     -    316 +    262 +237     -    156 +        "type": "opencollective",
1840     -    3719 +    1322 +1285     -1257     -    317 +    263 +238     -    157 +        "url": "https://opencollective.com/babel"
1841     -    3720 +    1323 +1286     -1258     -    318 +    264 +239     -    158 +      }
1842     -    3721 +    1324 +1287     -1259     -    319 +    265 +240     -    159 +    },
1843     -    3722 +    1325 +1288     -1260     -    320 +    266 +241     -    160 +    "node_modules/@babel/core/node_modules/semver": {
1844     -    3723 +    1326 +1289     -1261     -    321 +    267 +242     -    161 +      "version": "6.3.1",
1845     -    3724 +    1327 +1290     -1262     -    322 +    268 +243     -    162 +      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
1846     -    3725 +    1328 +1291     -1263     -    323 +    269 +244     -    163 +      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
1847     -    3726 +    1329 +1292     -1264     -    324 +    270 +245     -    164 +      "dev": true,
1848     -    3727 +    1330 +1293     -1265     -    325 +    271 +246     -    165 +      "license": "ISC",
1849     -    3728 +    1331 +1294     -1266     -    326 +    272 +247     -    166 +      "bin": {
1850     -    3729 +    1332 +1295     -1267     -    327 +    273 +248     -    167 +        "semver": "bin/semver.js"
1851     -    3730 +    1333 +1296     -1268     -    328 +    274 +249     -    168 +      }
1852     -    3731 +    1334 +1297     -1269     -    329 +    275 +250     -    169 +    },
1853     -    3732 +    1335 +1298     -1270     -    330 +    276 +251     -    170 +    "node_modules/@babel/generator": {
1854     -    3733 +    1336 +1299     -1271     -    331 +    277 +252     -    171 +      "version": "7.28.5",
1855     -    3734 +    1337 +1300     -1272     -    332 +    278 +253     -    172 +      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
1856     -    3735 +    1338 +1301     -1273     -    333 +    279 +254     -    173 +      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
1857     -    3736 +    1339 +1302     -1274     -    334 +    280 +255     -    174 +      "dev": true,
1858     -    3737 +    1340 +1303     -1275     -    335 +    281 +256     -    175 +      "license": "MIT",
1859     -    3738 +    1341 +1304     -1276     -    336 +    282 +257     -    176 +      "dependencies": {
1860     -    3739 +    1342 +1305     -1277     -    337 +    283 +258     -    177 +        "@babel/parser": "^7.28.5",
1861     -    3740 +    1343 +1306     -1278     -    338 +    284 +259     -    178 +        "@babel/types": "^7.28.5",
1862     -    3741 +    1344 +1307     -1279     -    339 +    285 +260     -    179 +        "@jridgewell/gen-mapping": "^0.3.12",
1863     -    3742 +    1345 +1308     -1280     -    340 +    286 +261     -    180 +        "@jridgewell/trace-mapping": "^0.3.28",
1864     -    3743 +    1346 +1309     -1281     -    341 +    287 +262     -    181 +        "jsesc": "^3.0.2"
1865     -    3744 +    1347 +1310     -1282     -    342 +    288 +263     -    182 +      },
1866     -    3745 +    1348 +1311     -1283     -    343 +    289 +264     -    183 +      "engines": {
1867     -    3746 +    1349 +1312     -1284     -    344 +    290 +265     -    184 +        "node": ">=6.9.0"
1868     -    3747 +    1350 +1313     -1285     -    345 +    291 +266     -    185 +      }
1869     -    3748 +    1351 +1314     -1286     -    346 +    292 +267     -    186 +    },
1870     -    3749 +    1352 +1315     -1287     -    347 +    293 +268     -    187 +    "node_modules/@babel/helper-compilation-targets": {
1871     -    3750 +    1353 +1316     -1288     -    348 +    294 +269     -    188 +      "version": "7.27.2",
1872     -    3751 +    1354 +1317     -1289     -    349 +    295 +270     -    189 +      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
1873     -    3752 +    1355 +1318     -1290     -    350 +    296 +271     -    190 +      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
1874     -    3753 +    1356 +1319     -1291     -    351 +    297 +272     -    191 +      "dev": true,
1875     -    3754 +    1357 +1320     -1292     -    352 +    298 +273     -    192 +      "license": "MIT",
1876     -    3755 +    1358 +1321     -1293     -    353 +    299 +274     -    193 +      "dependencies": {
1877     -    3756 +    1359 +1322     -1294     -    354 +    300 +275     -    194 +        "@babel/compat-data": "^7.27.2",
1878     -    3757 +    1360 +1323     -1295     -    355 +    301 +276     -    195 +        "@babel/helper-validator-option": "^7.27.1",
1879     -    3758 +    1361 +1324     -1296     -    356 +    302 +277     -    196 +        "browserslist": "^4.24.0",
1880     -    3759 +    1362 +1325     -1297     -    357 +    303 +278     -    197 +        "lru-cache": "^5.1.1",
1881     -    3760 +    1363 +1326     -1298     -    358 +    304 +279     -    198 +        "semver": "^6.3.1"
1882     -    3761 +    1364 +1327     -1299     -    359 +    305 +280     -    199 +      },
1883     -    3762 +    1365 +1328     -1300     -    360 +    306 +281     -    200 +      "engines": {
1884     -    3763 +    1366 +1329     -1301     -    361 +    307 +282     -    201 +        "node": ">=6.9.0"
1885     -    3764 +    1367 +1330     -1302     -    362 +    308 +283     -    202 +      }
1886     -    3765 +    1368 +1331     -1303     -    363 +    309 +284     -    203 +    },
1887     -    3766 +    1369 +1332     -1304     -    364 +    310 +285     -    204 +    "node_modules/@babel/helper-compilation-targets/node_modules/lru-cache": {
1888     -    3767 +    1370 +1333     -1305     -    365 +    311 +286     -    205 +      "version": "5.1.1",
1889     -    3768 +    1371 +1334     -1306     -    366 +    312 +287     -    206 +      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
1890     -    3769 +    1372 +1335     -1307     -    367 +    313 +288     -    207 +      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
1891     -    3770 +    1373 +1336     -1308     -    368 +    314 +289     -    208 +      "dev": true,
1892     -    3771 +    1374 +1337     -1309     -    369 +    315 +290     -    209 +      "license": "ISC",
1893     -    3772 +    1375 +1338     -1310     -    370 +    316 +291     -    210 +      "dependencies": {
1894     -    3773 +    1376 +1339     -1311     -    371 +    317 +292     -    211 +        "yallist": "^3.0.2"
1895     -    3774 +    1377 +1340     -1312     -    372 +    318 +293     -    212 +      }
1896     -    3775 +    1378 +1341     -1313     -    373 +    319 +294     -    213 +    },
1897     -    3776 +    1379 +1342     -1314     -    374 +    320 +295     -    214 +    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
1898     -    3777 +    1380 +1343     -1315     -    375 +    321 +296     -    215 +      "version": "6.3.1",
1899     -    3778 +    1381 +1344     -1316     -    376 +    322 +297     -    216 +      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
1900     -    3779 +    1382 +1345     -1317     -    377 +    323 +298     -    217 +      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
1901     -    3780 +    1383 +1346     -1318     -    378 +    324 +299     -    218 +      "dev": true,
1902     -    3781 +    1384 +1347     -1319     -    379 +    325 +300     -    219 +      "license": "ISC",
1903     -    3782 +    1385 +1348     -1320     -    380 +    326 +301     -    220 +      "bin": {
1904     -    3783 +    1386 +1349     -1321     -    381 +    327 +302     -    221 +        "semver": "bin/semver.js"
1905     -    3784 +    1387 +1350     -1322     -    382 +    328 +303     -    222 +      }
1906     -    3785 +    1388 +1351     -1323     -    383 +    329 +304     -    223 +    },
1907     -    3786 +    1389 +1352     -1324     -    384 +    330 +305     -    224 +    "node_modules/@babel/helper-globals": {
1908     -    3787 +    1390 +1353     -1325     -    385 +    331 +306     -    225 +      "version": "7.28.0",
1909     -    3788 +    1391 +1354     -1326     -    386 +    332 +307     -    226 +      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
1910     -    3789 +    1392 +1355     -1327     -    387 +    333 +308     -    227 +      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
1911     -    3790 +    1393 +1356     -1328     -    388 +    334 +309     -    228 +      "dev": true,
1912     -    3791 +    1394 +1357     -1329     -    389 +    335 +310     -    229 +      "license": "MIT",
1913     -    3792 +    1395 +1358     -1330     -    390 +    336 +311     -    230 +      "engines": {
1914     -    3793 +    1396 +1359     -1331     -    391 +    337 +312     -    231 +        "node": ">=6.9.0"
1915     -    3794 +    1397 +1360     -1332     -    392 +    338 +313     -    232 +      }
1916     -    3795 +    1398 +1361     -1333     -    393 +    339 +314     -    233 +    },
1917     -    3796 +    1399 +1362     -1334     -    394 +    340 +315     -    234 +    "node_modules/@babel/helper-module-imports": {
1918     -    3797 +    1400 +1363     -1335     -    395 +    341 +316     -    235 +      "version": "7.27.1",
1919     -    3798 +    1401 +1364     -1336     -    396 +    342 +317     -    236 +      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
1920     -    3799 +    1402 +1365     -1337     -    397 +    343 +318     -    237 +      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
1921     -    3800 +    1403 +1366     -1338     -    398 +    344 +319     -    238 +      "dev": true,
1922     -    3801 +    1404 +1367     -1339     -    399 +    345 +320     -    239 +      "license": "MIT",
1923     -    3802 +    1405 +1368     -1340     -    400 +    346 +321     -    240 +      "dependencies": {
1924     -    3803 +    1406 +1369     -1341     -    401 +    347 +322     -    241 +        "@babel/traverse": "^7.27.1",
1925     -    3804 +    1407 +1370     -1342     -    402 +    348 +323     -    242 +        "@babel/types": "^7.27.1"
1926     -    3805 +    1408 +1371     -1343     -    403 +    349 +324     -    243 +      },
1927     -    3806 +    1409 +1372     -1344     -    404 +    350 +325     -    244 +      "engines": {
1928     -    3807 +    1410 +1373     -1345     -    405 +    351 +326     -    245 +        "node": ">=6.9.0"
1929     -    3808 +    1411 +1374     -1346     -    406 +    352 +327     -    246 +      }
1930     -    3809 +    1412 +1375     -1347     -    407 +    353 +328     -    247 +    },
1931     -    3810 +    1413 +1376     -1348     -    408 +    354 +329     -    248 +    "node_modules/@babel/helper-module-transforms": {
1932     -    3811 +    1414 +1377     -1349     -    409 +    355 +330     -    249 +      "version": "7.28.3",
1933     -    3812 +    1415 +1378     -1350     -    410 +    356 +331     -    250 +      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
1934     -    3813 +    1416 +1379     -1351     -    411 +    357 +332     -    251 +      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
1935     -    3814 +    1417 +1380     -1352     -    412 +    358 +333     -    252 +      "dev": true,
1936     -    3815 +    1418 +1381     -1353     -    413 +    359 +334     -    253 +      "license": "MIT",
1937     -    3816 +    1419 +1382     -1354     -    414 +    360 +335     -    254 +      "dependencies": {
1938     -    3817 +    1420 +1383     -1355     -    415 +    361 +336     -    255 +        "@babel/helper-module-imports": "^7.27.1",
1939     -    3818 +    1421 +1384     -1356     -    416 +    362 +337     -    256 +        "@babel/helper-validator-identifier": "^7.27.1",
1940     -    3819 +    1422 +1385     -1357     -    417 +    363 +338     -    257 +        "@babel/traverse": "^7.28.3"
1941     -    3820 +    1423 +1386     -1358     -    418 +    364 +339     -    258 +      },
1942     -    3821 +    1424 +1387     -1359     -    419 +    365 +340     -    259 +      "engines": {
1943     -    3822 +    1425 +1388     -1360     -    420 +    366 +341     -    260 +        "node": ">=6.9.0"
1944     -    3823 +    1426 +1389     -1361     -    421 +    367 +342     -    261 +      },
1945     -    3824 +    1427 +1390     -1362     -    422 +    368 +343     -    262 +      "peerDependencies": {
1946     -    3825 +    1428 +1391     -1363     -    423 +    369 +344     -    263 +        "@babel/core": "^7.0.0"
1947     -    3826 +    1429 +1392     -1364     -    424 +    370 +345     -    264 +      }
1948     -    3827 +    1430 +1393     -1365     -    425 +    371 +346     -    265 +    },
1949     -    3828 +    1431 +1394     -1366     -    426 +    372 +347     - 96 266      "node_modules/@babel/helper-string-parser": {
1950     -    3829 +    1432 +1395     -1367     -    427 +    373 +348     - 97 267        "version": "7.27.1",
1951     -    3830 +    1433 +1396     -1368     -    428 +    374 +349     - 98 268        "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
1952     -    3831 +    1434 +1397     -1369     -    429 +    375 +350     -@@ -113,6 +283,30 @@
1953     -    3832 +    1435 +1398     -1370     -    430 +    376 +351     -113 283          "node": ">=6.9.0"
1954     -    3833 +    1436 +1399     -1371     -    431 +    377 +352     -114 284        }
1955     -    3834 +    1437 +1400     -1372     -    432 +    378 +353     -115 285      },
1956     -    3835 +    1438 +1401     -1373     -    433 +    379 +354     -    286 +    "node_modules/@babel/helper-validator-option": {
1957     -    3836 +    1439 +1402     -1374     -    434 +    380 +355     -    287 +      "version": "7.27.1",
1958     -    3837 +    1440 +1403     -1375     -    435 +    381 +356     -    288 +      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
1959     -    3838 +    1441 +1404     -1376     -    436 +    382 +357     -    289 +      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
1960     -    3839 +    1442 +1405     -1377     -    437 +    383 +358     -    290 +      "dev": true,
1961     -    3840 +    1443 +1406     -1378     -    438 +    384 +359     -    291 +      "license": "MIT",
1962     -    3841 +    1444 +1407     -1379     -    439 +    385 +360     -    292 +      "engines": {
1963     -    3842 +    1445 +1408     -1380     -    440 +    386 +361     -    293 +        "node": ">=6.9.0"
1964     -    3843 +    1446 +1409     -1381     -    441 +    387 +362     -    294 +      }
1965     -    3844 +    1447 +1410     -1382     -    442 +    388 +363     -    295 +    },
1966     -    3845 +    1448 +1411     -1383     -    443 +    389 +364     -    296 +    "node_modules/@babel/helpers": {
1967     -    3846 +    1449 +1412     -1384     -    444 +    390 +365     -    297 +      "version": "7.28.4",
1968     -    3847 +    1450 +1413     -1385     -    445 +    391 +366     -    298 +      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
1969     -    3848 +    1451 +1414     -1386     -    446 +    392 +367     -    299 +      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
1970     -    3849 +    1452 +1415     -1387     -    447 +    393 +368     -    300 +      "dev": true,
1971     -    3850 +    1453 +1416     -1388     -    448 +    394 +369     -    301 +      "license": "MIT",
1972     -    3851 +    1454 +1417     -1389     -    449 +    395 +370     -    302 +      "dependencies": {
1973     -    3852 +    1455 +1418     -1390     -    450 +    396 +371     -    303 +        "@babel/template": "^7.27.2",
1974     -    3853 +    1456 +1419     -1391     -    451 +    397 +372     -    304 +        "@babel/types": "^7.28.4"
1975     -    3854 +    1457 +1420     -1392     -    452 +    398 +373     -    305 +      },
1976     -    3855 +    1458 +1421     -1393     -    453 +    399 +374     -    306 +      "engines": {
1977     -    3856 +    1459 +1422     -1394     -    454 +    400 +375     -    307 +        "node": ">=6.9.0"
1978     -    3857 +    1460 +1423     -1395     -    455 +    401 +376     -    308 +      }
1979     -    3858 +    1461 +1424     -1396     -    456 +    402 +377     -    309 +    },
1980     -    3859 +    1462 +1425     -1397     -    457 +    403 +378     -116 310      "node_modules/@babel/parser": {
1981     -    3860 +    1463 +1426     -1398     -    458 +    404 +379     -117 311        "version": "7.28.5",
1982     -    3861 +    1464 +1427     -1399     -    459 +    405 +380     -118 312        "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
1983     -    3862 +    1465 +1428     -1400     -    460 +    406 +381     -@@ -138,6 +332,40 @@
1984     -    3863 +    1466 +1429     -1401     -    461 +    407 +382     -138 332          "node": ">=6.9.0"
1985     -    3864 +    1467 +1430     -1402     -    462 +    408 +383     -139 333        }
1986     -    3865 +    1468 +1431     -1403     -    463 +    409 +384     -140 334      },
1987     -    3866 +    1469 +1432     -1404     -    464 +    410 +385     -    335 +    "node_modules/@babel/template": {
1988     -    3867 +    1470 +1433     -1405     -    465 +    411 +386     -    336 +      "version": "7.27.2",
1989     -    3868 +    1471 +1434     -1406     -    466 +    412 +387     -    337 +      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
1990     -    3869 +    1472 +1435     -1407     -    467 +    413 +388     -    338 +      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
1991     -    3870 +    1473 +1436     -1408     -    468 +    414 +389     -    339 +      "dev": true,
1992     -    3871 +    1474 +1437     -1409     -    469 +    415 +390     -    340 +      "license": "MIT",
1993     -    3872 +    1475 +1438     -1410     -    470 +    416 +391     -    341 +      "dependencies": {
1994     -    3873 +    1476 +1439     -1411     -    471 +    417 +392     -    342 +        "@babel/code-frame": "^7.27.1",
1995     -    3874 +    1477 +1440     -1412     -    472 +    418 +393     -    343 +        "@babel/parser": "^7.27.2",
1996     -    3875 +    1478 +1441     -1413     -    473 +    419 +394     -    344 +        "@babel/types": "^7.27.1"
1997     -    3876 +    1479 +1442     -1414     -    474 +    420 +395     -    345 +      },
1998     -    3877 +    1480 +1443     -1415     -    475 +    421 +396     -    346 +      "engines": {
1999     -    3878 +    1481 +1444     -1416     -    476 +    422 +397     -    347 +        "node": ">=6.9.0"
2000     -    3879 +    1482 +1445     -1417     -    477 +    423 +398     -    348 +      }
2001     -    3880 +    1483 +1446     -1418     -    478 +    424 +399     -    349 +    },
2002     -    3881 +    1484 +1447     -1419     -    479 +    425 +400     -    350 +    "node_modules/@babel/traverse": {
2003     -    3882 +    1485 +1448     -1420     -    480 +    426 +401     -    351 +      "version": "7.28.5",
2004     -    3883 +    1486 +1449     -1421     -    481 +    427 +402     -    352 +      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
2005     -    3884 +    1487 +1450     -1422     -    482 +    428 +403     -    353 +      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
2006     -    3885 +    1488 +1451     -1423     -    483 +    429 +404     -    354 +      "dev": true,
2007     -    3886 +    1489 +1452     -1424     -    484 +    430 +405     -    355 +      "license": "MIT",
2008     -    3887 +    1490 +1453     -1425     -    485 +    431 +406     -    356 +      "dependencies": {
2009     -    3888 +    1491 +1454     -1426     -    486 +    432 +407     -    357 +        "@babel/code-frame": "^7.27.1",
2010     -    3889 +    1492 +1455     -1427     -    487 +    433 +408     -    358 +        "@babel/generator": "^7.28.5",
2011     -    3890 +    1493 +1456     -1428     -    488 +    434 +409     -    359 +        "@babel/helper-globals": "^7.28.0",
2012     -    3891 +    1494 +1457     -1429     -    489 +    435 +410     -    360 +        "@babel/parser": "^7.28.5",
2013     -    3892 +    1495 +1458     -1430     -    490 +    436 +411     -    361 +        "@babel/template": "^7.27.2",
2014     -    3893 +    1496 +1459     -1431     -    491 +    437 +412     -    362 +        "@babel/types": "^7.28.5",
2015     -    3894 +    1497 +1460     -1432     -    492 +    438 +413     -    363 +        "debug": "^4.3.1"
2016     -    3895 +    1498 +1461     -1433     -    493 +    439 +414     -    364 +      },
2017     -    3896 +    1499 +1462     -1434     -    494 +    440 +415     -    365 +      "engines": {
2018     -    3897 +    1500 +1463     -1435     -    495 +    441 +416     -    366 +        "node": ">=6.9.0"
2019     -    3898 +    1501 +1464     -1436     -    496 +    442 +417     -    367 +      }
2020     -    3899 +    1502 +1465     -1437     -    497 +    443 +418     -    368 +    },
2021     -    3900 +    1503 +1466     -1438     -    498 +    444 +419     -141 369      "node_modules/@babel/types": {
2022     -    3901 +    1504 +1467     -1439     -    499 +    445 +420     -142 370        "version": "7.28.5",
2023     -    3902 +    1505 +1468     -1440     -    500 +    446 +421     -143 371        "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
2024     -    3903 +    1506 +1469     -1441     -    501 +    447 +422     -@@ -997,6 +1225,28 @@
2025     -    3904 +    1507 +1470     -1442     -    502 +    448 +423     -997 1225          "mlly": "^1.8.0"
2026     -    3905 +    1508 +1471     -1443     -    503 +    449 +424     -998 1226        }
2027     -    3906 +    1509 +1472     -1444     -    504 +    450 +425     -999 1227      },
2028     -    3907 +    1510 +1473     -1445     -    505 +    451 +426     -    1228 +    "node_modules/@jridgewell/gen-mapping": {
2029     -    3908 +    1511 +1474     -1446     -    506 +    452 +427     -    1229 +      "version": "0.3.13",
2030     -    3909 +    1512 +1475     -1447     -    507 +    453 +428     -    1230 +      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
2031     -    3910 +    1513 +1476     -1448     -    508 +    454 +429     -    1231 +      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
2032     -    3911 +    1514 +1477     -1449     -    509 +    455 +430     -    1232 +      "dev": true,
2033     -    3912 +    1515 +1478     -1450     -    510 +    456 +431     -    1233 +      "license": "MIT",
2034     -    3913 +    1516 +1479     -1451     -    511 +    457 +432     -    1234 +      "dependencies": {
2035     -    3914 +    1517 +1480     -1452     -    512 +    458 +433     -    1235 +        "@jridgewell/sourcemap-codec": "^1.5.0",
2036     -    3915 +    1518 +1481     -1453     -    513 +    459 +434     -    1236 +        "@jridgewell/trace-mapping": "^0.3.24"
2037     -    3916 +    1519 +1482     -1454     -    514 +    460 +435     -    1237 +      }
2038     -    3917 +    1520 +1483     -1455     -    515 +    461 +436     -    1238 +    },
2039     -    3918 +    1521 +1484     -1456     -    516 +    462 +437     -    1239 +    "node_modules/@jridgewell/remapping": {
2040     -    3919 +    1522 +1485     -1457     -    517 +    463 +438     -    1240 +      "version": "2.3.5",
2041     -    3920 +    1523 +1486     -1458     -    518 +    464 +439     -    1241 +      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
2042     -    3921 +    1524 +1487     -1459     -    519 +    465 +440     -    1242 +      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
2043     -    3922 +    1525 +1488     -1460     -    520 +    466 +441     -    1243 +      "dev": true,
2044     -    3923 +    1526 +1489     -1461     -    521 +    467 +442     -    1244 +      "license": "MIT",
2045     -    3924 +    1527 +1490     -1462     -    522 +    468 +443     -    1245 +      "dependencies": {
2046     -    3925 +    1528 +1491     -1463     -    523 +    469 +444     -    1246 +        "@jridgewell/gen-mapping": "^0.3.5",
2047     -    3926 +    1529 +1492     -1464     -    524 +    470 +445     -    1247 +        "@jridgewell/trace-mapping": "^0.3.24"
2048     -    3927 +    1530 +1493     -1465     -    525 +    471 +446     -    1248 +      }
2049     -    3928 +    1531 +1494     -1466     -    526 +    472 +447     -    1249 +    },
2050     -    3929 +    1532 +1495     -1467     -    527 +    473 +448     -1000 1250      "node_modules/@jridgewell/resolve-uri": {
2051     -    3930 +    1533 +1496     -1468     -    528 +    474 +449     -1001 1251        "version": "3.1.2",
2052     -    3931 +    1534 +1497     -1469     -    529 +    475 +450     -1002 1252        "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
2053     -    3932 +    1535 +1498     -1470     -    530 +    476 +451     -@@ -1965,6 +2215,16 @@
2054     -    3933 +    1536 +1499     -1471     -    531 +    477 +452     -1965 2215          "js-tokens": "^9.0.1"
2055     -    3934 +    1537 +1500     -1472     -    532 +    478 +453     -1966 2216        }
2056     -    3935 +    1538 +1501     -1473     -    533 +    479 +454     -1967 2217      },
2057     -    3936 +    1539 +1502     -1474     -    534 +    480 +455     -    2218 +    "node_modules/babel-plugin-prismjs": {
2058     -    3937 +    1540 +1503     -1475     -    535 +    481 +456     -    2219 +      "version": "2.1.0",
2059     -    3938 +    1541 +1504     -1476     -    536 +    482 +457     -    2220 +      "resolved": "https://registry.npmjs.org/babel-plugin-prismjs/-/babel-plugin-prismjs-2.1.0.tgz",
2060     -    3939 +    1542 +1505     -1477     -    537 +    483 +458     -    2221 +      "integrity": "sha512-ehzSKYfeAz4U78zi/sfwsjDPlq0LvDKxNefcZTJ/iKBu+plsHsLqZhUeGf1+82LAcA35UZGbU6ksEx2Utphc/g==",
2061     -    3940 +    1543 +1506     -1478     -    538 +    484 +459     -    2222 +      "dev": true,
2062     -    3941 +    1544 +1507     -1479     -    539 +    485 +460     -    2223 +      "license": "MIT",
2063     -    3942 +    1545 +1508     -1480     -    540 +    486 +461     -    2224 +      "peerDependencies": {
2064     -    3943 +    1546 +1509     -1481     -    541 +    487 +462     -    2225 +        "prismjs": "^1.18.0"
2065     -    3944 +    1547 +1510     -1482     -    542 +    488 +463     -    2226 +      }
2066     -    3945 +    1548 +1511     -1483     -    543 +    489 +464     -    2227 +    },
2067     -    3946 +    1549 +1512     -1484     -    544 +    490 +465     -1968 2228      "node_modules/balanced-match": {
2068     -    3947 +    1550 +1513     -1485     -    545 +    491 +466     -1969 2229        "version": "1.0.2",
2069     -    3948 +    1551 +1514     -1486     -    546 +    492 +467     -1970 2230        "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
2070     -    3949 +    1552 +1515     -1487     -    547 +    493 +468     -@@ -1981,6 +2241,16 @@
2071     -    3950 +    1553 +1516     -1488     -    548 +    494 +469     -1981 2241          "node": ">= 0.6.0"
2072     -    3951 +    1554 +1517     -1489     -    549 +    495 +470     -1982 2242        }
2073     -    3952 +    1555 +1518     -1490     -    550 +    496 +471     -1983 2243      },
2074     -    3953 +    1556 +1519     -1491     -    551 +    497 +472     -    2244 +    "node_modules/baseline-browser-mapping": {
2075     -    3954 +    1557 +1520     -1492     -    552 +    498 +473     -    2245 +      "version": "2.9.5",
2076     -    3955 +    1558 +1521     -1493     -    553 +    499 +474     -    2246 +      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.5.tgz",
2077     -    3956 +    1559 +1522     -1494     -    554 +    500 +475     -    2247 +      "integrity": "sha512-D5vIoztZOq1XM54LUdttJVc96ggEsIfju2JBvht06pSzpckp3C7HReun67Bghzrtdsq9XdMGbSSB3v3GhMNmAA==",
2078     -    3957 +    1560 +1523     -1495     -    555 +    501 +476     -    2248 +      "dev": true,
2079     -    3958 +    1561 +1524     -1496     -    556 +    502 +477     -    2249 +      "license": "Apache-2.0",
2080     -    3959 +    1562 +1525     -1497     -    557 +    503 +478     -    2250 +      "bin": {
2081     -    3960 +    1563 +1526     -1498     -    558 +    504 +479     -    2251 +        "baseline-browser-mapping": "dist/cli.js"
2082     -    3961 +    1564 +1527     -1499     -    559 +    505 +480     -    2252 +      }
2083     -    3962 +    1565 +1528     -1500     -    560 +    506 +481     -    2253 +    },
2084     -    3963 +    1566 +1529     -1501     -    561 +    507 +482     -1984 2254      "node_modules/bidi-js": {
2085     -    3964 +    1567 +1530     -1502     -    562 +    508 +483     -1985 2255        "version": "1.0.3",
2086     -    3965 +    1568 +1531     -1503     -    563 +    509 +484     -1986 2256        "resolved": "https://registry.npmjs.org/bidi-js/-/bidi-js-1.0.3.tgz",
2087     -    3966 +    1569 +1532     -1504     -    564 +    510 +485     -@@ -2057,6 +2327,40 @@
2088     -    3967 +    1570 +1533     -1505     -    565 +    511 +486     -2057 2327          "concat-map": "0.0.1"
2089     -    3968 +    1571 +1534     -1506     -    566 +    512 +487     -2058 2328        }
2090     -    3969 +    1572 +1535     -1507     -    567 +    513 +488     -2059 2329      },
2091     -    3970 +    1573 +1536     -1508     -    568 +    514 +489     -    2330 +    "node_modules/browserslist": {
2092     -    3971 +    1574 +1537     -1509     -    569 +    515 +490     -    2331 +      "version": "4.28.1",
2093     -    3972 +    1575 +1538     -1510     -    570 +    516 +491     -    2332 +      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
2094     -    3973 +    1576 +1539     -1511     -    571 +    517 +492     -    2333 +      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
2095     -    3974 +    1577 +1540     -1512     -    572 +    518 +493     -    2334 +      "dev": true,
2096     -    3975 +    1578 +1541     -1513     -    573 +    519 +494     -    2335 +      "funding": [
2097     -    3976 +    1579 +1542     -1514     -    574 +    520 +495     -    2336 +        {
2098     -    3977 +    1580 +1543     -1515     -    575 +    521 +496     -    2337 +          "type": "opencollective",
2099     -    3978 +    1581 +1544     -1516     -    576 +    522 +497     -    2338 +          "url": "https://opencollective.com/browserslist"
2100     -    3979 +    1582 +1545     -1517     -    577 +    523 +498     -    2339 +        },
2101     -    3980 +    1583 +1546     -1518     -    578 +    524 +499     -    2340 +        {
2102     -    3981 +    1584 +1547     -1519     -    579 +    525 +500     -    2341 +          "type": "tidelift",
2103     -    3982 +    1585 +1548     -1520     -    580 +    526 +501     -    2342 +          "url": "https://tidelift.com/funding/github/npm/browserslist"
2104     -    3983 +    1586 +1549     -1521     -    581 +    527 +502     -    2343 +        },
2105     -    3984 +    1587 +1550     -1522     -    582 +    528 +503     -    2344 +        {
2106     -    3985 +    1588 +1551     -1523     -    583 +    529 +504     -    2345 +          "type": "github",
2107     -    3986 +    1589 +1552     -1524     -    584 +    530 +505     -    2346 +          "url": "https://github.com/sponsors/ai"
2108     -    3987 +    1590 +1553     -1525     -    585 +    531 +506     -    2347 +        }
2109     -    3988 +    1591 +1554     -1526     -    586 +    532 +507     -    2348 +      ],
2110     -    3989 +    1592 +1555     -1527     -    587 +    533 +508     -    2349 +      "license": "MIT",
2111     -    3990 +    1593 +1556     -1528     -    588 +    534 +509     -    2350 +      "dependencies": {
2112     -    3991 +    1594 +1557     -1529     -    589 +    535 +510     -    2351 +        "baseline-browser-mapping": "^2.9.0",
2113     -    3992 +    1595 +1558     -1530     -    590 +    536 +511     -    2352 +        "caniuse-lite": "^1.0.30001759",
2114     -    3993 +    1596 +1559     -1531     -    591 +    537 +512     -    2353 +        "electron-to-chromium": "^1.5.263",
2115     -    3994 +    1597 +1560     -1532     -    592 +    538 +513     -    2354 +        "node-releases": "^2.0.27",
2116     -    3995 +    1598 +1561     -1533     -    593 +    539 +514     -    2355 +        "update-browserslist-db": "^1.2.0"
2117     -    3996 +    1599 +1562     -1534     -    594 +    540 +515     -    2356 +      },
2118     -    3997 +    1600 +1563     -1535     -    595 +    541 +516     -    2357 +      "bin": {
2119     -    3998 +    1601 +1564     -1536     -    596 +    542 +517     -    2358 +        "browserslist": "cli.js"
2120     -    3999 +    1602 +1565     -1537     -    597 +    543 +518     -    2359 +      },
2121     -    4000 +    1603 +1566     -1538     -    598 +    544 +519     -    2360 +      "engines": {
2122     -    4001 +    1604 +1567     -1539     -    599 +    545 +520     -    2361 +        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
2123     -    4002 +    1605 +1568     -1540     -    600 +    546 +521     -    2362 +      }
2124     -    4003 +    1606 +1569     -1541     -    601 +    547 +522     -    2363 +    },
2125     -    4004 +    1607 +1570     -1542     -    602 +    548 +523     -2060 2364      "node_modules/bytes": {
2126     -    4005 +    1608 +1571     -1543     -    603 +    549 +524     -2061 2365        "version": "3.1.2",
2127     -    4006 +    1609 +1572     -1544     -    604 +    550 +525     -2062 2366        "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
2128     -    4007 +    1610 +1573     -1545     -    605 +    551 +526     -@@ -2108,6 +2412,27 @@
2129     -    4008 +    1611 +1574     -1546     -    606 +    552 +527     -2108 2412          "node": ">=6"
2130     -    4009 +    1612 +1575     -1547     -    607 +    553 +528     -2109 2413        }
2131     -    4010 +    1613 +1576     -1548     -    608 +    554 +529     -2110 2414      },
2132     -    4011 +    1614 +1577     -1549     -    609 +    555 +530     -    2415 +    "node_modules/caniuse-lite": {
2133     -    4012 +    1615 +1578     -1550     -    610 +    556 +531     -    2416 +      "version": "1.0.30001759",
2134     -    4013 +    1616 +1579     -1551     -    611 +    557 +532     -    2417 +      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001759.tgz",
2135     -    4014 +    1617 +1580     -1552     -    612 +    558 +533     -    2418 +      "integrity": "sha512-Pzfx9fOKoKvevQf8oCXoyNRQ5QyxJj+3O0Rqx2V5oxT61KGx8+n6hV/IUyJeifUci2clnmmKVpvtiqRzgiWjSw==",
2136     -    4015 +    1618 +1581     -1553     -    613 +    559 +534     -    2419 +      "dev": true,
2137     -    4016 +    1619 +1582     -1554     -    614 +    560 +535     -    2420 +      "funding": [
2138     -    4017 +    1620 +1583     -1555     -    615 +    561 +536     -    2421 +        {
2139     -    4018 +    1621 +1584     -1556     -    616 +    562 +537     -    2422 +          "type": "opencollective",
2140     -    4019 +    1622 +1585     -1557     -    617 +    563 +538     -    2423 +          "url": "https://opencollective.com/browserslist"
2141     -    4020 +    1623 +1586     -1558     -    618 +    564 +539     -    2424 +        },
2142     -    4021 +    1624 +1587     -1559     -    619 +    565 +540     -    2425 +        {
2143     -    4022 +    1625 +1588     -1560     -    620 +    566 +541     -    2426 +          "type": "tidelift",
2144     -    4023 +    1626 +1589     -1561     -    621 +    567 +542     -    2427 +          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
2145     -    4024 +    1627 +1590     -1562     -    622 +    568 +543     -    2428 +        },
2146     -    4025 +    1628 +1591     -1563     -    623 +    569 +544     -    2429 +        {
2147     -    4026 +    1629 +1592     -1564     -    624 +    570 +545     -    2430 +          "type": "github",
2148     -    4027 +    1630 +1593     -1565     -    625 +    571 +546     -    2431 +          "url": "https://github.com/sponsors/ai"
2149     -    4028 +    1631 +1594     -1566     -    626 +    572 +547     -    2432 +        }
2150     -    4029 +    1632 +1595     -1567     -    627 +    573 +548     -    2433 +      ],
2151     -    4030 +    1633 +1596     -1568     -    628 +    574 +549     -    2434 +      "license": "CC-BY-4.0"
2152     -    4031 +    1634 +1597     -1569     -    629 +    575 +550     -    2435 +    },
2153     -    4032 +    1635 +1598     -1570     -    630 +    576 +551     -2111 2436      "node_modules/canvg": {
2154     -    4033 +    1636 +1599     -1571     -    631 +    577 +552     -2112 2437        "version": "3.0.11",
2155     -    4034 +    1637 +1600     -1572     -    632 +    578 +553     -2113 2438        "resolved": "https://registry.npmjs.org/canvg/-/canvg-3.0.11.tgz",
2156     -    4035 +    1638 +1601     -1573     -    633 +    579 +554     -@@ -2246,6 +2571,13 @@
2157     -    4036 +    1639 +1602     -1574     -    634 +    580 +555     -2246 2571          "node": ">= 0.6"
2158     -    4037 +    1640 +1603     -1575     -    635 +    581 +556     -2247 2572        }
2159     -    4038 +    1641 +1604     -1576     -    636 +    582 +557     -2248 2573      },
2160     -    4039 +    1642 +1605     -1577     -    637 +    583 +558     -    2574 +    "node_modules/convert-source-map": {
2161     -    4040 +    1643 +1606     -1578     -    638 +    584 +559     -    2575 +      "version": "2.0.0",
2162     -    4041 +    1644 +1607     -1579     -    639 +    585 +560     -    2576 +      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
2163     -    4042 +    1645 +1608     -1580     -    640 +    586 +561     -    2577 +      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
2164     -    4043 +    1646 +1609     -1581     -    641 +    587 +562     -    2578 +      "dev": true,
2165     -    4044 +    1647 +1610     -1582     -    642 +    588 +563     -    2579 +      "license": "MIT"
2166     -    4045 +    1648 +1611     -1583     -    643 +    589 +564     -    2580 +    },
2167     -    4046 +    1649 +1612     -1584     -    644 +    590 +565     -2249 2581      "node_modules/cookie": {
2168     -    4047 +    1650 +1613     -1585     -    645 +    591 +566     -2250 2582        "version": "0.7.1",
2169     -    4048 +    1651 +1614     -1586     -    646 +    592 +567     -2251 2583        "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
2170     -    4049 +    1652 +1615     -1587     -    647 +    593 +568     -@@ -2972,6 +3304,13 @@
2171     -    4050 +    1653 +1616     -1588     -    648 +    594 +569     -2972 3304        "dev": true,
2172     -    4051 +    1654 +1617     -1589     -    649 +    595 +570     -2973 3305        "license": "MIT"
2173     -    4052 +    1655 +1618     -1590     -    650 +    596 +571     -2974 3306      },
2174     -    4053 +    1656 +1619     -1591     -    651 +    597 +572     -    3307 +    "node_modules/electron-to-chromium": {
2175     -    4054 +    1657 +1620     -1592     -    652 +    598 +573     -    3308 +      "version": "1.5.267",
2176     -    4055 +    1658 +1621     -1593     -    653 +    599 +574     -    3309 +      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.267.tgz",
2177     -    4056 +    1659 +1622     -1594     -    654 +    600 +575     -    3310 +      "integrity": "sha512-0Drusm6MVRXSOJpGbaSVgcQsuB4hEkMpHXaVstcPmhu5LIedxs1xNK/nIxmQIU/RPC0+1/o0AVZfBTkTNJOdUw==",
2178     -    4057 +    1660 +1623     -1595     -    655 +    601 +576     -    3311 +      "dev": true,
2179     -    4058 +    1661 +1624     -1596     -    656 +    602 +577     -    3312 +      "license": "ISC"
2180     -    4059 +    1662 +1625     -1597     -    657 +    603 +578     -    3313 +    },
2181     -    4060 +    1663 +1626     -1598     -    658 +    604 +579     -2975 3314      "node_modules/encodeurl": {
2182     -    4061 +    1664 +1627     -1599     -    659 +    605 +580     -2976 3315        "version": "2.0.0",
2183     -    4062 +    1665 +1628     -1600     -    660 +    606 +581     -2977 3316        "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
2184     -    4063 +    1666 +1629     -1601     -    661 +    607 +582     -@@ -3077,6 +3416,16 @@
2185     -    4064 +    1667 +1630     -1602     -    662 +    608 +583     -3077 3416          "@esbuild/win32-x64": "0.25.12"
2186     -    4065 +    1668 +1631     -1603     -    663 +    609 +584     -3078 3417        }
2187     -    4066 +    1669 +1632     -1604     -    664 +    610 +585     -3079 3418      },
2188     -    4067 +    1670 +1633     -1605     -    665 +    611 +586     -    3419 +    "node_modules/escalade": {
2189     -    4068 +    1671 +1634     -1606     -    666 +    612 +587     -    3420 +      "version": "3.2.0",
2190     -    4069 +    1672 +1635     -1607     -    667 +    613 +588     -    3421 +      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
2191     -    4070 +    1673 +1636     -1608     -    668 +    614 +589     -    3422 +      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
2192     -    4071 +    1674 +1637     -1609     -    669 +    615 +590     -    3423 +      "dev": true,
2193     -    4072 +    1675 +1638     -1610     -    670 +    616 +591     -    3424 +      "license": "MIT",
2194     -    4073 +    1676 +1639     -1611     -    671 +    617 +592     -    3425 +      "engines": {
2195     -    4074 +    1677 +1640     -1612     -    672 +    618 +593     -    3426 +        "node": ">=6"
2196     -    4075 +    1678 +1641     -1613     -    673 +    619 +594     -    3427 +      }
2197     -    4076 +    1679 +1642     -1614     -    674 +    620 +595     -    3428 +    },
2198     -    4077 +    1680 +1643     -1615     -    675 +    621 +596     -3080 3429      "node_modules/escape-html": {
2199     -    4078 +    1681 +1644     -1616     -    676 +    622 +597     -3081 3430        "version": "1.0.3",
2200     -    4079 +    1682 +1645     -1617     -    677 +    623 +598     -3082 3431        "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
2201     -    4080 +    1683 +1646     -1618     -    678 +    624 +599     -@@ -3533,6 +3882,16 @@
2202     -    4081 +    1684 +1647     -1619     -    679 +    625 +600     -3533 3882          "url": "https://github.com/sponsors/ljharb"
2203     -    4082 +    1685 +1648     -1620     -    680 +    626 +601     -3534 3883        }
2204     -    4083 +    1686 +1649     -1621     -    681 +    627 +602     -3535 3884      },
2205     -    4084 +    1687 +1650     -1622     -    682 +    628 +603     -    3885 +    "node_modules/gensync": {
2206     -    4085 +    1688 +1651     -1623     -    683 +    629 +604     -    3886 +      "version": "1.0.0-beta.2",
2207     -    4086 +    1689 +1652     -1624     -    684 +    630 +605     -    3887 +      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
2208     -    4087 +    1690 +1653     -1625     -    685 +    631 +606     -    3888 +      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
2209     -    4088 +    1691 +1654     -1626     -    686 +    632 +607     -    3889 +      "dev": true,
2210     -    4089 +    1692 +1655     -1627     -    687 +    633 +608     -    3890 +      "license": "MIT",
2211     -    4090 +    1693 +1656     -1628     -    688 +    634 +609     -    3891 +      "engines": {
2212     -    4091 +    1694 +1657     -1629     -    689 +    635 +610     -    3892 +        "node": ">=6.9.0"
2213     -    4092 +    1695 +1658     -1630     -    690 +    636 +611     -    3893 +      }
2214     -    4093 +    1696 +1659     -1631     -    691 +    637 +612     -    3894 +    },
2215     -    4094 +    1697 +1660     -1632     -    692 +    638 +613     -3536 3895      "node_modules/get-intrinsic": {
2216     -    4095 +    1698 +1661     -1633     -    693 +    639 +614     -3537 3896        "version": "1.3.0",
2217     -    4096 +    1699 +1662     -1634     -    694 +    640 +615     -3538 3897        "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
2218     -    4097 +    1700 +1663     -1635     -    695 +    641 +616     -@@ -3973,6 +4332,19 @@
2219     -    4098 +    1701 +1664     -1636     -    696 +    642 +617     -3973 4332          }
2220     -    4099 +    1702 +1665     -1637     -    697 +    643 +618     -3974 4333        }
2221     -    4100 +    1703 +1666     -1638     -    698 +    644 +619     -3975 4334      },
2222     -    4101 +    1704 +1667     -1639     -    699 +    645 +620     -    4335 +    "node_modules/jsesc": {
2223     -    4102 +    1705 +1668     -1640     -    700 +    646 +621     -    4336 +      "version": "3.1.0",
2224     -    4103 +    1706 +1669     -1641     -    701 +    647 +622     -    4337 +      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
2225     -    4104 +    1707 +1670     -1642     -    702 +    648 +623     -    4338 +      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
2226     -    4105 +    1708 +1671     -1643     -    703 +    649 +624     -    4339 +      "dev": true,
2227     -    4106 +    1709 +1672     -1644     -    704 +    650 +625     -    4340 +      "license": "MIT",
2228     -    4107 +    1710 +1673     -1645     -    705 +    651 +626     -    4341 +      "bin": {
2229     -    4108 +    1711 +1674     -1646     -    706 +    652 +627     -    4342 +        "jsesc": "bin/jsesc"
2230     -    4109 +    1712 +1675     -1647     -    707 +    653 +628     -    4343 +      },
2231     -    4110 +    1713 +1676     -1648     -    708 +    654 +629     -    4344 +      "engines": {
2232     -    4111 +    1714 +1677     -1649     -    709 +    655 +630     -    4345 +        "node": ">=6"
2233     -    4112 +    1715 +1678     -1650     -    710 +    656 +631     -    4346 +      }
2234     -    4113 +    1716 +1679     -1651     -    711 +    657 +632     -    4347 +    },
2235     -    4114 +    1717 +1680     -1652     -    712 +    658 +633     -3976 4348      "node_modules/json-buffer": {
2236     -    4115 +    1718 +1681     -1653     -    713 +    659 +634     -3977 4349        "version": "3.0.1",
2237     -    4116 +    1719 +1682     -1654     -    714 +    660 +635     -3978 4350        "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
2238     -    4117 +    1720 +1683     -1655     -    715 +    661 +636     -@@ -3994,6 +4366,19 @@
2239     -    4118 +    1721 +1684     -1656     -    716 +    662 +637     -3994 4366        "dev": true,
2240     -    4119 +    1722 +1685     -1657     -    717 +    663 +638     -3995 4367        "license": "MIT"
2241     -    4120 +    1723 +1686     -1658     -    718 +    664 +639     -3996 4368      },
2242     -    4121 +    1724 +1687     -1659     -    719 +    665 +640     -    4369 +    "node_modules/json5": {
2243     -    4122 +    1725 +1688     -1660     -    720 +    666 +641     -    4370 +      "version": "2.2.3",
2244     -    4123 +    1726 +1689     -1661     -    721 +    667 +642     -    4371 +      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
2245     -    4124 +    1727 +1690     -1662     -    722 +    668 +643     -    4372 +      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
2246     -    4125 +    1728 +1691     -1663     -    723 +    669 +644     -    4373 +      "dev": true,
2247     -    4126 +    1729 +1692     -1664     -    724 +    670 +645     -    4374 +      "license": "MIT",
2248     -    4127 +    1730 +1693     -1665     -    725 +    671 +646     -    4375 +      "bin": {
2249     -    4128 +    1731 +1694     -1666     -    726 +    672 +647     -    4376 +        "json5": "lib/cli.js"
2250     -    4129 +    1732 +1695     -1667     -    727 +    673 +648     -    4377 +      },
2251     -    4130 +    1733 +1696     -1668     -    728 +    674 +649     -    4378 +      "engines": {
2252     -    4131 +    1734 +1697     -1669     -    729 +    675 +650     -    4379 +        "node": ">=6"
2253     -    4132 +    1735 +1698     -1670     -    730 +    676 +651     -    4380 +      }
2254     -    4133 +    1736 +1699     -1671     -    731 +    677 +652     -    4381 +    },
2255     -    4134 +    1737 +1700     -1672     -    732 +    678 +653     -3997 4382      "node_modules/jspdf": {
2256     -    4135 +    1738 +1701     -1673     -    733 +    679 +654     -3998 4383        "version": "3.0.4",
2257     -    4136 +    1739 +1702     -1674     -    734 +    680 +655     -3999 4384        "resolved": "https://registry.npmjs.org/jspdf/-/jspdf-3.0.4.tgz",
2258     -    4137 +    1740 +1703     -1675     -    735 +    681 +656     -@@ -4377,6 +4762,13 @@
2259     -    4138 +    1741 +1704     -1676     -    736 +    682 +657     -4377 4762          "node": ">= 0.6"
2260     -    4139 +    1742 +1705     -1677     -    737 +    683 +658     -4378 4763        }
2261     -    4140 +    1743 +1706     -1678     -    738 +    684 +659     -4379 4764      },
2262     -    4141 +    1744 +1707     -1679     -    739 +    685 +660     -    4765 +    "node_modules/node-releases": {
2263     -    4142 +    1745 +1708     -1680     -    740 +    686 +661     -    4766 +      "version": "2.0.27",
2264     -    4143 +    1746 +1709     -1681     -    741 +    687 +662     -    4767 +      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
2265     -    4144 +    1747 +1710     -1682     -    742 +    688 +663     -    4768 +      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
2266     -    4145 +    1748 +1711     -1683     -    743 +    689 +664     -    4769 +      "dev": true,
2267     -    4146 +    1749 +1712     -1684     -    744 +    690 +665     -    4770 +      "license": "MIT"
2268     -    4147 +    1750 +1713     -1685     -    745 +    691 +666     -    4771 +    },
2269     -    4148 +    1751 +1714     -1686     -    746 +    692 +667     -4380 4772      "node_modules/object-assign": {
2270     -    4149 +    1752 +1715     -1687     -    747 +    693 +668     -4381 4773        "version": "4.1.1",
2271     -    4150 +    1753 +1716     -1688     -    748 +    694 +669     -4382 4774        "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
2272     -    4151 +    1754 +1717     -1689     -    749 +    695 +670     -@@ -5384,6 +5776,37 @@
2273     -    4152 +    1755 +1718     -1690     -    750 +    696 +671     -5384 5776          "node": ">= 0.8"
2274     -    4153 +    1756 +1719     -1691     -    751 +    697 +672     -5385 5777        }
2275     -    4154 +    1757 +1720     -1692     -    752 +    698 +673     -5386 5778      },
2276     -    4155 +    1758 +1721     -1693     -    753 +    699 +674     -    5779 +    "node_modules/update-browserslist-db": {
2277     -    4156 +    1759 +1722     -1694     -    754 +    700 +675     -    5780 +      "version": "1.2.2",
2278     -    4157 +    1760 +1723     -1695     -    755 +    701 +676     -    5781 +      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.2.tgz",
2279     -    4158 +    1761 +1724     -1696     -    756 +    702 +677     -    5782 +      "integrity": "sha512-E85pfNzMQ9jpKkA7+TJAi4TJN+tBCuWh5rUcS/sv6cFi+1q9LYDwDI5dpUL0u/73EElyQ8d3TEaeW4sPedBqYA==",
2280     -    4159 +    1762 +1725     -1697     -    757 +    703 +678     -    5783 +      "dev": true,
2281     -    4160 +    1763 +1726     -1698     -    758 +    704 +679     -    5784 +      "funding": [
2282     -    4161 +    1764 +1727     -1699     -    759 +    705 +680     -    5785 +        {
2283     -    4162 +    1765 +1728     -1700     -    760 +    706 +681     -    5786 +          "type": "opencollective",
2284     -    4163 +    1766 +1729     -1701     -    761 +    707 +682     -    5787 +          "url": "https://opencollective.com/browserslist"
2285     -    4164 +    1767 +1730     -1702     -    762 +    708 +683     -    5788 +        },
2286     -    4165 +    1768 +1731     -1703     -    763 +    709 +684     -    5789 +        {
2287     -    4166 +    1769 +1732     -1704     -    764 +    710 +685     -    5790 +          "type": "tidelift",
2288     -    4167 +    1770 +1733     -1705     -    765 +    711 +686     -    5791 +          "url": "https://tidelift.com/funding/github/npm/browserslist"
2289     -    4168 +    1771 +1734     -1706     -    766 +    712 +687     -    5792 +        },
2290     -    4169 +    1772 +1735     -1707     -    767 +    713 +688     -    5793 +        {
2291     -    4170 +    1773 +1736     -1708     -    768 +    714 +689     -    5794 +          "type": "github",
2292     -    4171 +    1774 +1737     -1709     -    769 +    715 +690     -    5795 +          "url": "https://github.com/sponsors/ai"
2293     -    4172 +    1775 +1738     -1710     -    770 +    716 +691     -    5796 +        }
2294     -    4173 +    1776 +1739     -1711     -    771 +    717 +692     -    5797 +      ],
2295     -    4174 +    1777 +1740     -1712     -    772 +    718 +693     -    5798 +      "license": "MIT",
2296     -    4175 +    1778 +1741     -1713     -    773 +    719 +694     -    5799 +      "dependencies": {
2297     -    4176 +    1779 +1742     -1714     -    774 +    720 +695     -    5800 +        "escalade": "^3.2.0",
2298     -    4177 +    1780 +1743     -1715     -    775 +    721 +696     -    5801 +        "picocolors": "^1.1.1"
2299     -    4178 +    1781 +1744     -1716     -    776 +    722 +697     -    5802 +      },
2300     -    4179 +    1782 +1745     -1717     -    777 +    723 +698     -    5803 +      "bin": {
2301     -    4180 +    1783 +1746     -1718     -    778 +    724 +699     -    5804 +        "update-browserslist-db": "cli.js"
2302     -    4181 +    1784 +1747     -1719     -    779 +    725 +700     -    5805 +      },
2303     -    4182 +    1785 +1748     -1720     -    780 +    726 +701     -    5806 +      "peerDependencies": {
2304     -    4183 +    1786 +1749     -1721     -    781 +    727 +702     -    5807 +        "browserslist": ">= 4.21.0"
2305     -    4184 +    1787 +1750     -1722     -    782 +    728 +703     -    5808 +      }
2306     -    4185 +    1788 +1751     -1723     -    783 +    729 +704     -    5809 +    },
2307     -    4186 +    1789 +1752     -1724     -    784 +    730 +705     -5387 5810      "node_modules/uri-js": {
2308     -    4187 +    1790 +1753     -1725     -    785 +    731 +706     -5388 5811        "version": "4.4.1",
2309     -    4188 +    1791 +1754     -1726     -    786 +    732 +707     -5389 5812        "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
2310     -    4189 +    1792 +1755     -1727     -    787 +    733 +708     -@@ -5511,6 +5934,20 @@
2311     -    4190 +    1793 +1756     -1728     -    788 +    734 +709     -5511 5934          }
2312     -    4191 +    1794 +1757     -1729     -    789 +    735 +710     -5512 5935        }
2313     -    4192 +    1795 +1758     -1730     -    790 +    736 +711     -5513 5936      },
2314     -    4193 +    1796 +1759     -1731     -    791 +    737 +712     -    5937 +    "node_modules/vite-plugin-prismjs": {
2315     -    4194 +    1797 +1760     -1732     -    792 +    738 +713     -    5938 +      "version": "0.0.11",
2316     -    4195 +    1798 +1761     -1733     -    793 +    739 +714     -    5939 +      "resolved": "https://registry.npmjs.org/vite-plugin-prismjs/-/vite-plugin-prismjs-0.0.11.tgz",
2317     -    4196 +    1799 +1762     -1734     -    794 +    740 +715     -    5940 +      "integrity": "sha512-20NBQxg/zH+3FTrlU6BQTob720xkuXNYtrx7psAQ4E6pMcRDeLEK77QU9kXURU587+f2To7ASH1JVTGbXVV/vQ==",
2318     -    4197 +    1800 +1763     -1735     -    795 +    741 +716     -    5941 +      "dev": true,
2319     -    4198 +    1801 +1764     -1736     -    796 +    742 +717     -    5942 +      "license": "MIT",
2320     -    4199 +    1802 +1765     -1737     -    797 +    743 +718     -    5943 +      "dependencies": {
2321     -    4200 +    1803 +1766     -1738     -    798 +    744 +719     -    5944 +        "@babel/core": "^7.15.5",
2322     -    4201 +    1804 +1767     -1739     -    799 +    745 +720     -    5945 +        "babel-plugin-prismjs": "^2.1.0"
2323     -    4202 +    1805 +1768     -1740     -    800 +    746 +721     -    5946 +      },
2324     -    4203 +    1806 +1769     -1741     -    801 +    747 +722     -    5947 +      "engines": {
2325     -    4204 +    1807 +1770     -1742     -    802 +    748 +723     -    5948 +        "node": ">=12.0.0"
2326     -    4205 +    1808 +1771     -1743     -    803 +    749 +724     -    5949 +      }
2327     -    4206 +    1809 +1772     -1744     -    804 +    750 +725     -    5950 +    },
2328     -    4207 +    1810 +1773     -1745     -    805 +    751 +726     -5514 5951      "node_modules/vitest": {
2329     -    4208 +    1811 +1774     -1746     -    806 +    752 +727     -5515 5952        "version": "4.0.8",
2330     -    4209 +    1812 +1775     -1747     -    807 +    753 +728     -5516 5953        "resolved": "https://registry.npmjs.org/vitest/-/vitest-4.0.8.tgz",
2331     -    4210 +    1813 +1776     -1748     -    808 +    754 +729     -@@ -5780,6 +6217,13 @@
2332     -    4211 +    1814 +1777     -1749     -    809 +    755 +730     -5780 6217        "dev": true,
2333     -    4212 +    1815 +1778     -1750     -    810 +    756 +731     -5781 6218        "license": "MIT"
2334     -    4213 +    1816 +1779     -1751     -    811 +    757 +732     -5782 6219      },
2335     -    4214 +    1817 +1780     -1752     -    812 +    758 +733     -    6220 +    "node_modules/yallist": {
2336     -    4215 +    1818 +1781     -1753     -    813 +    759 +734     -    6221 +      "version": "3.1.1",
2337     -    4216 +    1819 +1782     -1754     -    814 +    760 +735     -    6222 +      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
2338     -    4217 +    1820 +1783     -1755     -    815 +    761 +736     -    6223 +      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
2339     -    4218 +    1821 +1784     -1756     -    816 +    762 +737     -    6224 +      "dev": true,
2340     -    4219 +    1822 +1785     -1757     -    817 +    763 +738     -    6225 +      "license": "ISC"
2341     -    4220 +    1823 +1786     -1758     -    818 +    764 +739     -    6226 +    },
2342     -    4221 +    1824 +1787     -1759     -    819 +    765 +740     -5783 6227      "node_modules/yocto-queue": {
2343     -    4222 +    1825 +1788     -1760     -    820 +    766 +741     -5784 6228        "version": "0.1.0",
2344     -    4223 +    1826 +1789     -1761     -    821 +    767 +742     -5785 6229        "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
2345     -    4224 +    1827 +1790     -1762     -    822 +    768 +743     -5786 6230  
2346     -    4225 +    1828 +1791     -1763     -    823 +    769 +744     -
2347     -    4226 +    1829 +1792     -1764     -    824 +    770 +745     -```
2348     -    4227 +    1830 +1793     -1765     -    825 +    771 +746     -
2349     -    4228 +    1831 +1794     -1766     -    826 +    772 +747     -
2350     -    4229 +    1832 +1795     -1767     -    827 +    773 +748     -### üìÑ `package.json`
2351     -    4230 +    1833 +1796     -1768     -    828 +    774 +749     -
2352     -    4231 +    1834 +1797     -1769     -    829 +    775 +750     -**Type:** Configuration/Data File üìã
2353     -    4232 +    1835 +1798     -1770     -    830 +    776 +751     -
2354     -    4233 +    1836 +1799     -1771     -    831 +    777 +752     -```diff
2355     -    4234 +    1837 +1800     -1772     -    832 +    778 +753     -@@ -38,6 +38,7 @@
2356     -    4235 +    1838 +1801     -1773     -    833 +    779 +754     - 38  38      "prettier": "3.6.2",
2357     -    4236 +    1839 +1802     -1774     -    834 +    780 +755     - 39  39      "typescript": "5.9.3",
2358     -    4237 +    1840 +1803     -1775     -    835 +    781 +756     - 40  40      "vite": "7.2.2",
2359     -    4238 +    1841 +1804     -1776     -    836 +    782 +757     -     41 +    "vite-plugin-prismjs": "0.0.11",
2360     -    4239 +    1842 +1805     -1777     -    837 +    783 +758     - 41  42      "vitest": "4.0.8"
2361     -    4240 +    1843 +1806     -1778     -    838 +    784 +759     - 42  43    },
2362     -    4241 +    1844 +1807     -1779     -    839 +    785 +760     - 43  44    "dependencies": {
2363     -    4242 +    1845 +1808     -1780     -    840 +    786 +761     - 44  45  
2364     -    4243 +    1846 +1809     -1781     -    841 +    787 +762     -
2365     -    4244 +    1847 +1810     -1782     -    842 +    788 +763     -```
2366     -    4245 +    1848 +1811     -1783     -    843 +    789 +     13 +## üìù Files Changed (1/1 selected)
2367     -    4246 +    1849 +1812     -1784     -    844 +    790 +764  14  
2368     -    4247 +    1850 +1813     -1785     -    845 +    791 +765  15  
2369     -    4248 +    1851 +1814     -1786     -    846 +    792 +766  16  ### üìÑ `script.js`
2370     -    4249 +    1852 +1815     -1787     -    847 +    793 +@@ -768,119 +18,32 @@ AI_REVIEW.md      | 107 ++++++++++---
2371     -    4250 +    1853 +1816     -1788     -    848 +    794 +768  18  **Type:** JavaScript Source File üü®
2372     -    4251 +    1854 +1817     -1789     -    849 +    795 +769  19  
2373     -    4252 +    1855 +1818     -1790     -    850 +    796 +770  20  ```diff
2374     -    4253 +    1856 +1819     -1791     -    851 +    797 +771     -@@ -9,26 +9,9 @@ import { marked } from 'marked';
2375     -    4254 +    1857 +1820     -1792     -    852 +    798 +772     -  9   9  import markedFootnote from 'marked-footnote';
2376     -    4255 +    1858 +1821     -1793     -    853 +    799 +773     - 10  10  import mermaid from 'mermaid';
2377     -    4256 +    1859 +1822     -1794     -    854 +    800 +774     - 11  11  import Prism from 'prismjs';
2378     -    4257 +    1860 +1823     -1795     -    855 +    801 +775     - 12     -import 'prismjs/components/prism-bash';
2379     -    4258 +    1861 +1824     -1796     -    856 +    802 +776     - 13     -import 'prismjs/components/prism-batch';
2380     -    4259 +    1862 +1825     -1797     -    857 +    803 +777     - 14     -import 'prismjs/components/prism-c';
2381     -    4260 +    1863 +1826     -1798     -    858 +    804 +778     - 15     -import 'prismjs/components/prism-cpp';
2382     -    4261 +    1864 +1827     -1799     -    859 +    805 +779     - 16     -import 'prismjs/components/prism-css';
2383     -    4262 +    1865 +1828     -1800     -    860 +    806 +780     - 17     -import 'prismjs/components/prism-diff';
2384     -    4263 +    1866 +1829     -1801     -    861 +    807 +781     - 18     -import 'prismjs/components/prism-go';
2385     -    4264 +    1867 +1830     -1802     -    862 +    808 +782     - 19     -import 'prismjs/components/prism-ini';
2386     -    4265 +    1868 +1831     -1803     -    863 +    809 +783     - 20     -import 'prismjs/components/prism-java';
2387     -    4266 +    1869 +1832     -1804     -    864 +    810 +784     - 21     -import 'prismjs/components/prism-javascript';
2388     -    4267 +    1870 +1833     -1805     -    865 +    811 +785     - 22     -import 'prismjs/components/prism-json';
2389     -    4268 +    1871 +1834     -1806     -    866 +    812 +786     - 23     -import 'prismjs/components/prism-markdown';
2390     -    4269 +    1872 +1835     -1807     -    867 +    813 +787     - 24     -import 'prismjs/components/prism-python';
2391     -    4270 +    1873 +1836     -1808     -    868 +    814 +788     - 25     -import 'prismjs/components/prism-r';
2392     -    4271 +    1874 +1837     -1809     -    869 +    815 +789     - 26     -import 'prismjs/components/prism-rust';
2393     -    4272 +    1875 +1838     -1810     -    870 +    816 +790     - 27     -import 'prismjs/components/prism-scss';
2394     -    4273 +    1876 +1839     -1811     -    871 +    817 +791     - 28     -import 'prismjs/components/prism-sql';
2395     -    4274 +    1877 +1840     -1812     -    872 +    818 +792     - 29     -import 'prismjs/components/prism-typescript';
2396     -    4275 +    1878 +1841     -1813     -    873 +    819 +793     - 30     -import 'prismjs/components/prism-yaml';
2397     -    4276 +    1879 +1842     -1814     -    874 +    820 +794     - 31     -import 'prismjs/themes/prism-tomorrow.css'; // Import Prism CSS
2398     -    4277 +    1880 +1843     -1815     -    875 +    821 +795     -     12 +
2399     -    4278 +    1881 +1844     -1816     -    876 +    822 +796     -     13 +// PrismJS is now handled by vite-plugin-prismjs
2400     -    4279 +    1882 +1845     -1817     -    877 +    823 +797     -     14 +// which automatically loads all languages and themes
2401     -    4280 +    1883 +1846     -1818     -    878 +    824 +798     - 32  15  
2402     -    4281 +    1884 +1847     -1819     -    879 +    825 +799     - 33  16  import { StorageManager } from './src/js/core/StorageManager.js';
2403     -    4282 +    1885 +1848     -1820     -    880 +    826 +800     - 34  17  import { ThemeManager } from './src/js/core/ThemeManager.js';
2404     -    4283 +    1886 +1849     -1821     -    881 +    827 +801     -@@ -189,6 +172,9 @@ function configureMarkedExtensions() {
2405     -    4284 +    1887 +1850     -1822     -    882 +    828 +802     -189 172                  throwOnError: false,
2406     -    4285 +    1888 +1851     -1823     -    883 +    829 +803     -190 173                  output: 'html',
2407     -    4286 +    1889 +1852     -1824     -    884 +    830 +804     -191 174                  trust: true, // Allow custom styling
2408     -    4287 +    1890 +1853     -1825     -    885 +    831 +805     -    175 +                macros: {
2409     -    4288 +    1891 +1854     -1826     -    886 +    832 +806     -    176 +                  '\\label': '\\phantom', // Hide \label
2410     -    4289 +    1892 +1855     -1827     -    887 +    833 +807     -    177 +                },
2411     -    4290 +    1893 +1856     -1828     -    888 +    834 +808     -192 178                }) +
2412     -    4291 +    1894 +1857     -1829     -    889 +    835 +809     -193 179                '</div>'
2413     -    4292 +    1895 +1858     -1830     -    890 +    836 +810     -194 180              );
2414     -    4293 +    1896 +1859     -1831     -    891 +    837 +811     -@@ -206,8 +192,8 @@ function configureMarkedExtensions() {
2415     -    4294 +    1897 +1860     -1832     -    892 +    838 +812     -206 192            return src.match(/^\s*\\begin/)?.index;
2416     -    4295 +    1898 +1861     -1833     -    893 +    839 +813     -207 193          },
2417     -    4296 +    1899 +1862     -1834     -    894 +    840 +814     -208 194          tokenizer(src) {
2418     -    4297 +    1900 +1863     -1835     -    895 +    841 +815     -209     -          // Robust regex for LaTeX environments
2419     -    4298 +    1901 +1864     -1836     -    896 +    842 +816     -210     -          const match = src.match(/^\s*(\\begin\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\{\2\})/);
2420     -    4299 +    1902 +1865     -1837     -    897 +    843 +817     -    195 +          // Robust regex for LaTeX environments (tolerant to whitespace)
2421     -    4300 +    1903 +1866     -1838     -    898 +    844 +818     -    196 +          const match = src.match(/^\s*(\\begin\s*\{\s*([a-zA-Z]+\*?)\s*\}\s*([\s\S]*?)\s*\\end\s*\{\s*\2\s*\})/);
2422     -    4301 +    1904 +1867     -1839     -    899 +    845 +819     -211 197            if (match) {
2423     -    4302 +    1905 +1868     -1840     -    900 +    846 +820     -212 198              return {
2424     -    4303 +    1906 +1869     -1841     -    901 +    847 +821     -213 199                type: 'mathEnvironment',
2425     -    4304 +    1907 +1870     -1842     -    902 +    848 +822     -@@ -225,6 +211,12 @@ function configureMarkedExtensions() {
2426     -    4305 +    1908 +1871     -1843     -    903 +    849 +823     -225 211                  throwOnError: false,
2427     -    4306 +    1909 +1872     -1844     -    904 +    850 +824     -226 212                  output: 'html',
2428     -    4307 +    1910 +1873     -1845     -    905 +    851 +825     -227 213                  trust: true,
2429     -    4308 +    1911 +1874     -1846     -    906 +    852 +826     -    214 +                macros: {
2430     -    4309 +    1912 +1875     -1847     -    907 +    853 +827     -    215 +                  '\\label': '\\phantom', // Hide \label
2431     -    4310 +    1913 +1876     -1848     -    908 +    854 +828     -    216 +                  '\\eqref': '\\text', // Plain text for refs (or link if needed)
2432     -    4311 +    1914 +1877     -1849     -    909 +    855 +829     -    217 +                  '\\cite': '\\text',
2433     -    4312 +    1915 +1878     -1850     -    910 +    856 +830     -    218 +                  '\\ref': '\\text',
2434     -    4313 +    1916 +1879     -1851     -    911 +    857 +831     -    219 +                },
2435     -    4314 +    1917 +1880     -1852     -    912 +    858 +832     -228 220                }) +
2436     -    4315 +    1918 +1881     -1853     -    913 +    859 +833     -229 221                '</div>'
2437     -    4316 +    1919 +1882     -1854     -    914 +    860 +834     -230 222              );
2438     -    4317 +    1920 +1883     -1855     -    915 +    861 +835     -@@ -269,6 +261,9 @@ function configureMarkedExtensions() {
2439     -    4318 +    1921 +1884     -1856     -    916 +    862 +836     -269 261                displayMode: token.displayMode || false,
2440     -    4319 +    1922 +1885     -1857     -    917 +    863 +837     -270 262                throwOnError: false,
2441     -    4320 +    1923 +1886     -1858     -    918 +    864 +838     -271 263                output: 'html',
2442     -    4321 +    1924 +1887     -1859     -    919 +    865 +839     -    264 +              macros: {
2443     -    4322 +    1925 +1888     -1860     -    920 +    866 +840     -    265 +                '\\label': '\\phantom',
2444     -    4323 +    1926 +1889     -1861     -    921 +    867 +841     -    266 +              },
2445     -    4324 +    1927 +1890     -1862     -    922 +    868 +842     -272 267              });
2446     -    4325 +    1928 +1891     -1863     -    923 +    869 +843     -273 268  
2447     -    4326 +    1929 +1892     -1864     -    924 +    870 +844     -274 269              // Wrap display math in a div for proper spacing
2448     -    4327 +    1930 +1893     -1865     -    925 +    871 +845     -275 270  
2449     -    4328 +    1931 +1894     -1866     -    926 +    872 +846     -
2450     -    4329 +    1932 +1895     -1867     -    927 +    873 +847     -```
2451     -    4330 +    1933 +1896     -1868     -    928 +    874 +848     -
2452     -    4331 +    1934 +1897     -1869     -    929 +    875 +849     -
2453     -    4332 +    1935 +1898     -1870     -    930 +    876 +850     -### üìÑ `vite.config.js`
2454     -    4333 +    1936 +1899     -1871     -    931 +    877 +851     -
2455     -    4334 +    1937 +1900     -1872     -    932 +    878 +852     -**Type:** JavaScript Source File üü®
2456     -    4335 +    1938 +1901     -1873     -    933 +    879 +853     -
2457     -    4336 +    1939 +1902     -1874     -    934 +    880 +854     -```diff
2458     -    4337 +    1940 +1903     -1875     -    935 +    881 +855     -@@ -1,20 +1,25 @@
2459     -    4338 +    1941 +1904     -1876     -    936 +    882 +856     -  1   1  import { copyFileSync, mkdirSync, readdirSync } from 'fs';
2460     -    4339 +    1942 +1905     -1877     -    937 +    883 +857     -  2   2  import { join } from 'path';
2461     -    4340 +    1943 +1906     -1878     -    938 +    884 +858     -  3   3  import { defineConfig } from 'vite';
2462     -    4341 +    1944 +1907     -1879     -    939 +    885 +859     -      4 +import prism from 'vite-plugin-prismjs';
2463     -    4342 +    1945 +1908     -1880     -    940 +    886 +860     -  4   5  
2464     -    4343 +    1946 +1909     -1881     -    941 +    887 +861     -  5   6  export default defineConfig({
2465     -    4344 +    1947 +1910     -1882     -    942 +    888 +862     -  6   7    root: './',
2466     -    4345 +    1948 +1911     -1883     -    943 +    889 +863     -  7   8    base: '/markdown-viewer-app/',
2467     -    4346 +    1949 +1912     -1884     -    944 +    890 +864     -  8   9    build: {
2468     -    4347 +    1950 +1913     -1885     -    945 +    891 +865     -  9  10      outDir: 'dist',
2469     -    4348 +    1951 +1914     -1886     -    946 +    892 +866     - 10     -    // Note: marked, prismjs, and mermaid are loaded via CDN in index.html
2470     -    4349 +    1952 +1915     -1887     -    947 +    893 +867     - 11     -    // No need for manualChunks as they are not npm dependencies
2471     -    4350 +    1953 +1916     -1888     -    948 +    894 +868     - 12  11    },
2472     -    4351 +    1954 +1917     -1889     -    949 +    895 +869     - 13  12    server: {
2473     -    4352 +    1955 +1918     -1890     -    950 +    896 +870     - 14  13      port: 3000,
2474     -    4353 +    1956 +1919     -1891     -    951 +    897 +871     - 15  14      open: true,
2475     -    4354 +    1957 +1920     -1892     -    952 +    898 +872     - 16  15    },
2476     -    4355 +    1958 +1921     -1893     -    953 +    899 +873     - 17  16    plugins: [
2477     -    4356 +    1959 +1922     -1894     -    954 +    900 +874     -     17 +    prism({
2478     -    4357 +    1960 +1923     -1895     -    955 +    901 +875     -     18 +      languages: 'all', // Load ALL languages for future-proofing
2479     -    4358 +    1961 +1924     -1896     -    956 +    902 +876     -     19 +      plugins: ['line-numbers', 'copy-to-clipboard'],
2480     -    4359 +    1962 +1925     -1897     -    957 +    903 +877     -     20 +      theme: 'tomorrow',
2481     -    4360 +    1963 +1926     -1898     -    958 +    904 +878     -     21 +      css: true,
2482     -    4361 +    1964 +1927     -1899     -    959 +    905 +879     -     22 +    }),
2483     -    4362 +    1965 +1928     -1900     -    960 +    906 +880     - 18  23      {
2484     -    4363 +    1966 +1929     -1901     -    961 +    907 +881     - 19  24        name: 'copy-themes',
2485     -    4364 +    1967 +1930     -1902     -    962 +    908 +882     - 20  25        closeBundle() {
2486     -    4365 +    1968 +1931     -1903     -    963 +    909 +883     - 21  26  
2487     -    4366 +    1969 +1932     -1904     -    964 +    910 +     21 +@@ -544,6 +544,11 @@ graph TD
2488     -    4367 +    1970 +1933     -1905     -    965 +    911 +     22 +544 544          const id = element.id;
2489     -    4368 +    1971 +1934     -1906     -    966 +    912 +     23 +545 545          const code = decodeURIComponent(element.dataset.code);
2490     -    4369 +    1972 +1935     -1907     -    967 +    913 +     24 +546 546  
2491     -    4370 +    1973 +1936     -1908     -    968 +    914 +     25 +    547 +        if (!code || !code.trim()) {
2492     -    4371 +    1974 +1937     -1909     -    969 +    915 +     26 +    548 +          element.innerHTML = '';
2493     -    4372 +    1975 +1938     -1910     -    970 +    916 +     27 +    549 +          return;
2494     -    4373 +    1976 +1939     -1911     -    971 +    917 +     28 +    550 +        }
2495     -    4374 +    1977 +1940     -1912     -    972 +    918 +     29 +    551 +
2496     -    4375 +    1978 +1941     -1913     -    973 +    919 +     30 +547 552          if (typeof mermaid !== 'undefined') {
2497     -    4376 +    1979 +1942     -1914     -    974 +    920 +     31 +548 553            mermaid
2498     -    4377 +    1980 +1943     -1915     -    975 +    921 +     32 +549 554              .render('mermaid-svg-' + id, code)
2499     -    4378 +    1981 +1944     -1916     -    976 +    922 +     33 +@@ -551,7 +556,11 @@ graph TD
2500     -    4379 +    1982 +1945     -1917     -    977 +    923 +     34 +551 556                element.innerHTML = result.svg;
2501     -    4380 +    1983 +1946     -1918     -    978 +    924 +     35 +552 557              })
2502     -    4381 +    1984 +1947     -1919     -    979 +    925 +     36 +553 558              .catch(err => {
2503     -    4382 +    1985 +1948     -1920     -    980 +    926 +     37 +554     -              element.innerHTML = `<p style="color: red;">Mermaid diagram error: ${err.message}</p>`;
2504     -    4383 +    1986 +1949     -1921     -    981 +    927 +     38 +    559 +              console.warn('Mermaid error:', err);
2505     -    4384 +    1987 +1950     -1922     -    982 +    928 +     39 +    560 +              // Graceful failure: small warning instead of giant red text
2506     -    4385 +    1988 +1951     -1923     -    983 +    929 +     40 +    561 +              element.innerHTML = `<div style="color: var(--text-secondary); font-size: 0.8em; text-align: center; border: 1px dashed var(--border-color); padding: 8px; border-radius: 6px; opacity: 0.8; margin: 10px 0;">
2507     -    4386 +    1989 +1952     -1924     -    984 +    930 +     41 +    562 +                <span style="font-size: 1.2em;">‚ö†Ô∏è</span> Invalid Mermaid Syntax
2508     -    4387 +    1990 +1953     -1925     -    985 +    931 +     42 +    563 +              </div>`;
2509     -    4388 +    1991 +1954     -1926     -    986 +    932 +     43 +555 564              });
2510     -    4389 +    1992 +1955     -1927     -    987 +    933 +     44 +556 565          }
2511     -    4390 +    1993 +1956     -1928     -    988 +    934 +     45 +557 566        });
2512     -    4391 +    1994 +1957     -1929     -    989 +    935 +     46 +558 567  
2513     -    4392 +    1995 +1958     -1930     -    990 +    936 +884  47  
2514     -    4393 +    1996 +1959     -1931     -    991 +    937 +885  48  ```
2515     -    4394 +    1997 +1960     -1932     -    992 +    938 +886  49  
2516     -    4395 +    1998 +1961     -1933     -    993 +    939 +@@ -926,4 +89,4 @@ Please provide specific feedback on:
2517     -    4396 +    1999 +1962     -1934     -    994 +    940 +926  89  
2518     -    4397 +    2000 +1963     -1935     -    995 +    941 +927  90  ---
2519     -    4398 +    2001 +1964     -1936     -    996 +    942 +928  91  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
2520     -    4399 +    2002 +1965     -1937     -    997 +    943 +929     -*Files processed: 5/5 | Errors: 0 | Generated: 2025-12-09T02:07:02.257Z*
2521     -    4400 +    2003 +1966     -1938     -    998 +    944 +     92 +*Files processed: 1/1 | Errors: 0 | Generated: 2025-12-09T03:47:49.443Z*
2522     -    4401 +    2004 +1967     -1939     -    999 +    945 +930  93  
2523     -    4402 +    2005 +1968     -1940     -    1000 +    946 +
2524     -    4403 +    2006 +1969     -1941     -    1001 +    947 +```
2525     -    4404 +    2007 +1970     -1942     -    1002 +    948 +
2526     -    4405 +    2008 +1971     -1943     -    1003 +    949 +
2527     -    4406 +    2009 +1972     -1944     -    1004 +    950 +### üìÑ `style.css`
2528     -    4407 +    2010 +1973     -1945     -    1005 +    951 +
2529     -    4408 +    2011 +1974     -1946     -    1006 +    952 +**Type:** Stylesheet üé®
2530     -    4409 +    2012 +1975     -1947     -    1007 +    953 +
2531     -    4410 +    2013 +1976     -1948     -    1008 +    954 +```diff
2532     -    4411 +    2014 +1977     -1949     -    1009 +    955 +@@ -88,17 +88,23 @@ body {
2533     -    4412 +    2015 +1978     -1950     -    1010 +    956 + 88  88  .btn {
2534     -    4413 +    2016 +1979     -1951     -    1011 +    957 + 89  89    padding: 8px 16px;
2535     -    4414 +    2017 +1980     -1952     -    1012 +    958 + 90  90    border: 1px solid var(--border-color);
2536     -    4415 +    2018 +1981     -1953     -    1013 +    959 + 91     -  background-color: var(--bg-primary);
2537     -    4416 +    2019 +1982     -1954     -    1014 +    960 +     91 +  background-color: color-mix(in srgb, var(--bg-primary) 80%, transparent);
2538     -    4417 +    2020 +1983     -1955     -    1015 +    961 +     92 +  backdrop-filter: blur(4px);
2539     -    4418 +    2021 +1984     -1956     -    1016 +    962 +     93 +  -webkit-backdrop-filter: blur(4px);
2540     -    4419 +    2022 +1985     -1957     -    1017 +    963 + 92  94    color: var(--text-primary);
2541     -    4420 +    2023 +1986     -1958     -    1018 +    964 + 93     -  border-radius: 6px;
2542     -    4421 +    2024 +1987     -1959     -    1019 +    965 +     95 +  border-radius: 8px; /* Softer, more modern radius */
2543     -    4422 +    2025 +1988     -1960     -    1020 +    966 + 94  96    cursor: pointer;
2544     -    4423 +    2026 +1989     -1961     -    1021 +    967 + 95  97    font-size: 14px;
2545     -    4424 +    2027 +1990     -1962     -    1022 +    968 + 96     -  transition: all 0.2s;
2546     -    4425 +    2028 +1991     -1963     -    1023 +    969 +     98 +  font-weight: 500;
2547     -    4426 +    2029 +1992     -1964     -    1024 +    970 +     99 +  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
2548     -    4427 +    2030 +1993     -1965     -    1025 +    971 +    100 +  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
2549     -    4428 +    2031 +1994     -1966     -    1026 +    972 + 97 101  }
2550     -    4429 +    2032 +1995     -1967     -    1027 +    973 + 98 102  
2551     -    4430 +    2033 +1996     -1968     -    1028 +    974 + 99 103  .btn:hover {
2552     -    4431 +    2034 +1997     -1969     -    1029 +    975 +100 104    background-color: var(--bg-tertiary);
2553     -    4432 +    2035 +1998     -1970     -    1030 +    976 +101     -  transform: translateY(-1px);
2554     -    4433 +    2036 +1999     -1971     -    1031 +    977 +    105 +  transform: translateY(-2px);
2555     -    4434 +    2037 +2000     -1972     -    1032 +    978 +    106 +  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
2556     -    4435 +    2038 +2001     -1973     -    1033 +    979 +    107 +  border-color: var(--h1-color);
2557     -    4436 +    2039 +2002     -1974     -    1034 +    980 +102 108  }
2558     -    4437 +    2040 +2003     -1975     -    1035 +    981 +103 109  
2559     -    4438 +    2041 +2004     -1976     -    1036 +    982 +104 110  .btn.active {
2560     -    4439 +    2042 +2005     -1977     -    1037 +    983 +@@ -112,6 +118,12 @@ body {
2561     -    4440 +    2043 +2006     -1978     -    1038 +    984 +112 118    display: flex;
2562     -    4441 +    2044 +2007     -1979     -    1039 +    985 +113 119    flex: 1;
2563     -    4442 +    2045 +2008     -1980     -    1040 +    986 +114 120    overflow: hidden;
2564     -    4443 +    2046 +2009     -1981     -    1041 +    987 +    121 +  animation: slideUpFade 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
2565     -    4444 +    2047 +2010     -1982     -    1042 +    988 +    122 +}
2566     -    4445 +    2048 +2011     -1983     -    1043 +    989 +    123 +
2567     -    4446 +    2049 +2012     -1984     -    1044 +    990 +    124 +@keyframes slideUpFade {
2568     -    4447 +    2050 +2013     -1985     -    1045 +    991 +    125 +  from { opacity: 0; transform: translateY(20px); }
2569     -    4448 +    2051 +2014     -1986     -    1046 +    992 +    126 +  to { opacity: 1; transform: translateY(0); }
2570     -    4449 +    2052 +2015     -1987     -    1047 +    993 +115 127  }
2571     -    4450 +    2053 +2016     -1988     -    1048 +    994 +116 128  
2572     -    4451 +    2054 +2017     -1989     -    1049 +    995 +117 129  /* ==================== EDITOR ==================== */
2573     -    4452 +    2055 +2018     -1990     -    1050 +    996 +@@ -1080,3 +1092,27 @@ body {
2574     -    4453 +    2056 +2019     -1991     -    1051 +    997 +1080 1092    border-left-color: #cf222e;
2575     -    4454 +    2057 +2020     -1992     -    1052 +    998 +1081 1093    background-color: rgba(207, 34, 46, 0.1);
2576     -    4455 +    2058 +2021     -1993     -    1053 +    999 +1082 1094  }
2577     -    4456 +    2059 +2022     -1994     -    1054 +    1000 +    1095 +/* ==================== GLASS SCROLLBARS ==================== */
2578     -    4457 +    2060 +2023     -1995     -    1055 +    1001 +    1096 +::-webkit-scrollbar {
2579     -    4458 +    2061 +2024     -1996     -    1056 +    1002 +    1097 +  width: 12px;
2580     -    4459 +    2062 +2025     -1997     -    1057 +    1003 +    1098 +  height: 12px;
2581     -    4460 +    2063 +2026     -1998     -    1058 +    1004 +    1099 +  background-color: transparent;
2582     -    4461 +    2064 +2027     -1999     -    1059 +    1005 +    1100 +}
2583     -    4462 +    2065 +2028     -2000     -    1060 +    1006 +    1101 +
2584     -    4463 +    2066 +2029     -2001     -    1061 +    1007 +    1102 +::-webkit-scrollbar-track {
2585     -    4464 +    2067 +2030     -2002     -    1062 +    1008 +    1103 +  background: transparent;
2586     -    4465 +    2068 +2031     -2003     -    1063 +    1009 +    1104 +}
2587     -    4466 +    2069 +2032     -2004     -    1064 +    1010 +    1105 +
2588     -    4467 +    2070 +2033     -2005     -    1065 +    1011 +    1106 +::-webkit-scrollbar-thumb {
2589     -    4468 +    2071 +2034     -2006     -    1066 +    1012 +    1107 +  background-color: color-mix(in srgb, var(--text-secondary) 30%, transparent);
2590     -    4469 +    2072 +2035     -2007     -    1067 +    1013 +    1108 +  border-radius: 20px;
2591     -    4470 +    2073 +2036     -2008     -    1068 +    1014 +    1109 +  border: 3px solid transparent;
2592     -    4471 +    2074 +2037     -2009     -    1069 +    1015 +    1110 +  background-clip: content-box;
2593     -    4472 +    2075 +2038     -2010     -    1070 +    1016 +    1111 +  backdrop-filter: blur(4px);
2594     -    4473 +    2076 +2039     -2011     -    1071 +    1017 +    1112 +}
2595     -    4474 +    2077 +2040     -2012     -    1072 +    1018 +    1113 +
2596     -    4475 +    2078 +2041     -2013     -    1073 +    1019 +    1114 +::-webkit-scrollbar-thumb:hover {
2597     -    4476 +    2079 +2042     -2014     -    1074 +    1020 +    1115 +  background-color: color-mix(in srgb, var(--text-secondary) 50%, transparent);
2598     -    4477 +    2080 +2043     -2015     -    1075 +    1021 +    1116 +}
2599     -    4478 +    2081 +2044     -2016     -    1076 +    1022 +    1117 +
2600     -    4479 +    2082 +2045     -2017     -    1077 +    1023 +    1118 +/* ==================== END ==================== */
2601     -    4480 +    2083 +2046     -2018     -    1078 +    1024 +1083 1119  
2602     -    4481 +    2084 +2047     -2019     -    1079 + 47 1025  
2603     -    4482 +    2085 +2048     -2020     -    1080 + 48 1026  ```
2604     -    4483 +    2086 +2049     -2021     -    1081 + 49 1027  
2605     -    4484 +    2087 +2050     -2022     -    1082 +@@ -89,4 +1067,4 @@ Please provide specific feedback on:
2606     -    4485 +    2088 +2051     -2023     -    1083 + 89 1067  
2607     -    4486 +    2089 +2052     -2024     -    1084 + 90 1068  ---
2608     -    4487 +    2090 +2053     -2025     -    1085 + 91 1069  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
2609     -    4488 +    2091 +2054     -2026     -    1086 + 92     -*Files processed: 1/1 | Errors: 0 | Generated: 2025-12-09T03:47:49.443Z*
2610     -    4489 +    2092 +2055     -2027     -    1087 +    1070 +*Files processed: 2/2 | Errors: 0 | Generated: 2025-12-09T03:51:39.497Z*
2611     -    4490 +    2093 +2056     -2028     -    1088 + 93 1071  
2612     -    4491 +    2094 +2057     -2029     -946 1089  
2613     -    4492 +    2095 +2058     -2030     -947 1090  ```
2614     -    4493 +    2096 +2059     -2031     -948 1091  
2615     -    4494 +    2097 +2060     -2032     -949 1092  
2616     -    4495 +    2098 +2061     -2033     -950     -### üìÑ `style.css`
2617     -    4496 +    2099 +2062     -2034     -    1093 +### üìÑ `script.js`
2618     -    4497 +    2100 +2063     -2035     -951 1094  
2619     -    4498 +    2101 +2064     -2036     -952     -**Type:** Stylesheet üé®
2620     -    4499 +    2102 +2065     -2037     -    1095 +**Type:** JavaScript Source File üü®
2621     -    4500 +    2103 +2066     -2038     -953 1096  
2622     -    4501 +    2104 +2067     -2039     -954 1097  ```diff
2623     -    4502 +    2105 +2068     -2040     -955     -@@ -88,17 +88,23 @@ body {
2624     -    4503 +    2106 +2069     -2041     -956     - 88  88  .btn {
2625     -    4504 +    2107 +2070     -2042     -957     - 89  89    padding: 8px 16px;
2626     -    4505 +    2108 +2071     -2043     -958     - 90  90    border: 1px solid var(--border-color);
2627     -    4506 +    2109 +2072     -2044     -959     - 91     -  background-color: var(--bg-primary);
2628     -    4507 +    2110 +2073     -2045     -960     -     91 +  background-color: color-mix(in srgb, var(--bg-primary) 80%, transparent);
2629     -    4508 +    2111 +2074     -2046     -961     -     92 +  backdrop-filter: blur(4px);
2630     -    4509 +    2112 +2075     -2047     -962     -     93 +  -webkit-backdrop-filter: blur(4px);
2631     -    4510 +    2113 +2076     -2048     -963     - 92  94    color: var(--text-primary);
2632     -    4511 +    2114 +2077     -2049     -964     - 93     -  border-radius: 6px;
2633     -    4512 +    2115 +2078     -2050     -965     -     95 +  border-radius: 8px; /* Softer, more modern radius */
2634     -    4513 +    2116 +2079     -2051     -966     - 94  96    cursor: pointer;
2635     -    4514 +    2117 +2080     -2052     -967     - 95  97    font-size: 14px;
2636     -    4515 +    2118 +2081     -2053     -968     - 96     -  transition: all 0.2s;
2637     -    4516 +    2119 +2082     -2054     -969     -     98 +  font-weight: 500;
2638     -    4517 +    2120 +2083     -2055     -970     -     99 +  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
2639     -    4518 +    2121 +2084     -2056     -971     -    100 +  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
2640     -    4519 +    2122 +2085     -2057     -972     - 97 101  }
2641     -    4520 +    2123 +2086     -2058     -973     - 98 102  
2642     -    4521 +    2124 +2087     -2059     -974     - 99 103  .btn:hover {
2643     -    4522 +    2125 +2088     -2060     -975     -100 104    background-color: var(--bg-tertiary);
2644     -    4523 +    2126 +2089     -2061     -976     -101     -  transform: translateY(-1px);
2645     -    4524 +    2127 +2090     -2062     -977     -    105 +  transform: translateY(-2px);
2646     -    4525 +    2128 +2091     -2063     -978     -    106 +  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
2647     -    4526 +    2129 +2092     -2064     -979     -    107 +  border-color: var(--h1-color);
2648     -    4527 +    2130 +2093     -2065     -980     -102 108  }
2649     -    4528 +    2131 +2094     -2066     -981     -103 109  
2650     -    4529 +    2132 +2095     -2067     -982     -104 110  .btn.active {
2651     -    4530 +    2133 +2096     -2068     -983     -@@ -112,6 +118,12 @@ body {
2652     -    4531 +    2134 +2097     -2069     -984     -112 118    display: flex;
2653     -    4532 +    2135 +2098     -2070     -985     -113 119    flex: 1;
2654     -    4533 +    2136 +2099     -2071     -986     -114 120    overflow: hidden;
2655     -    4534 +    2137 +2100     -2072     -987     -    121 +  animation: slideUpFade 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
2656     -    4535 +    2138 +2101     -2073     -988     -    122 +}
2657     -    4536 +    2139 +2102     -2074     -989     -    123 +
2658     -    4537 +    2140 +2103     -2075     -990     -    124 +@keyframes slideUpFade {
2659     -    4538 +    2141 +2104     -2076     -991     -    125 +  from { opacity: 0; transform: translateY(20px); }
2660     -    4539 +    2142 +2105     -2077     -992     -    126 +  to { opacity: 1; transform: translateY(0); }
2661     -    4540 +    2143 +2106     -2078     -993     -115 127  }
2662     -    4541 +    2144 +2107     -2079     -994     -116 128  
2663     -    4542 +    2145 +2108     -2080     -995     -117 129  /* ==================== EDITOR ==================== */
2664     -    4543 +    2146 +2109     -2081     -996     -@@ -1080,3 +1092,27 @@ body {
2665     -    4544 +    2147 +2110     -2082     -997     -1080 1092    border-left-color: #cf222e;
2666     -    4545 +    2148 +2111     -2083     -998     -1081 1093    background-color: rgba(207, 34, 46, 0.1);
2667     -    4546 +    2149 +2112     -2084     -999     -1082 1094  }
2668     -    4547 +    2150 +2113     -2085     -1000     -    1095 +/* ==================== GLASS SCROLLBARS ==================== */
2669     -    4548 +    2151 +2114     -2086     -1001     -    1096 +::-webkit-scrollbar {
2670     -    4549 +    2152 +2115     -2087     -1002     -    1097 +  width: 12px;
2671     -    4550 +    2153 +2116     -2088     -1003     -    1098 +  height: 12px;
2672     -    4551 +    2154 +2117     -2089     -1004     -    1099 +  background-color: transparent;
2673     -    4552 +    2155 +2118     -2090     -1005     -    1100 +}
2674     -    4553 +    2156 +2119     -2091     -1006     -    1101 +
2675     -    4554 +    2157 +2120     -2092     -1007     -    1102 +::-webkit-scrollbar-track {
2676     -    4555 +    2158 +2121     -2093     -1008     -    1103 +  background: transparent;
2677     -    4556 +    2159 +2122     -2094     -1009     -    1104 +}
2678     -    4557 +    2160 +2123     -2095     -1010     -    1105 +
2679     -    4558 +    2161 +2124     -2096     -1011     -    1106 +::-webkit-scrollbar-thumb {
2680     -    4559 +    2162 +2125     -2097     -1012     -    1107 +  background-color: color-mix(in srgb, var(--text-secondary) 30%, transparent);
2681     -    4560 +    2163 +2126     -2098     -1013     -    1108 +  border-radius: 20px;
2682     -    4561 +    2164 +2127     -2099     -1014     -    1109 +  border: 3px solid transparent;
2683     -    4562 +    2165 +2128     -2100     -1015     -    1110 +  background-clip: content-box;
2684     -    4563 +    2166 +2129     -2101     -1016     -    1111 +  backdrop-filter: blur(4px);
2685     -    4564 +    2167 +2130     -2102     -1017     -    1112 +}
2686     -    4565 +    2168 +2131     -2103     -1018     -    1113 +
2687     -    4566 +    2169 +2132     -2104     -1019     -    1114 +::-webkit-scrollbar-thumb:hover {
2688     -    4567 +    2170 +2133     -2105     -1020     -    1115 +  background-color: color-mix(in srgb, var(--text-secondary) 50%, transparent);
2689     -    4568 +    2171 +2134     -2106     -1021     -    1116 +}
2690     -    4569 +    2172 +2135     -2107     -1022     -    1117 +
2691     -    4570 +    2173 +2136     -2108     -1023     -    1118 +/* ==================== END ==================== */
2692     -    4571 +    2174 +2137     -2109     -1024     -1083 1119  
2693     -    4572 +    2175 +2138     -2110     -    1098 +@@ -193,7 +193,9 @@ function configureMarkedExtensions() {
2694     -    4573 +    2176 +2139     -2111     -    1099 +193 193          },
2695     -    4574 +    2177 +2140     -2112     -    1100 +194 194          tokenizer(src) {
2696     -    4575 +    2178 +2141     -2113     -    1101 +195 195            // Robust regex for LaTeX environments (tolerant to whitespace)
2697     -    4576 +    2179 +2142     -2114     -    1102 +196     -          const match = src.match(/^\s*(\\begin\s*\{\s*([a-zA-Z]+\*?)\s*\}\s*([\s\S]*?)\s*\\end\s*\{\s*\2\s*\})/);
2698     -    4577 +    2180 +2143     -2115     -    1103 +    196 +          // Capture group 1: The full environment content (including begin/end)
2699     -    4578 +    2181 +2144     -2116     -    1104 +    197 +          // Capture group 2: The environment name (e.g., multline)
2700     -    4579 +    2182 +2145     -2117     -    1105 +    198 +          const match = src.match(/^\s*(\\begin\s*\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\s*\{\2\})/);
2701     -    4580 +    2183 +2146     -2118     -    1106 +197 199            if (match) {
2702     -    4581 +    2184 +2147     -2119     -    1107 +198 200              return {
2703     -    4582 +    2185 +2148     -2120     -    1108 +199 201                type: 'mathEnvironment',
2704     -    4583 +    2186 +2149     -2121     -    1109 +200 202  
2705     -    4584 +    2187 +2150     -2122     -1025 1110  
2706     -    4585 +    2188 +2151     -2123     -1026 1111  ```
2707     -    4586 +    2189 +2152     -2124     -1027 1112  
2708     -    4587 +    2190 +2153     -2125     -@@ -1067,4 +1152,4 @@ Please provide specific feedback on:
2709     -    4588 +    2191 +2154     -2126     -1067 1152  
2710     -    4589 +    2192 +2155     -2127     -1068 1153  ---
2711     -    4590 +    2193 +2156     -2128     -1069 1154  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
2712     -    4591 +    2194 +2157     -2129     -1070     -*Files processed: 2/2 | Errors: 0 | Generated: 2025-12-09T03:51:39.497Z*
2713     -    4592 +    2195 +2158     -2130     -    1155 +*Files processed: 2/2 | Errors: 0 | Generated: 2025-12-09T03:56:04.680Z*
2714     -    4593 +    2196 +2159     -2131     -1071 1156  
2715     -    4594 +    2197 +2160     -     22 +@@ -15,14 +15,28 @@
2716     -    4595 +    2198 +2161     -     23 + 15  15      <div class="app-container">
2717     -    4596 +    2199 +2162     -     24 + 16  16        <!-- Toolbar -->
2718     -    4597 +    2200 +2163     -     25 + 17  17        <div class="toolbar">
2719     -    4598 +    2201 +2164     -     26 + 18     -        <div style="display: flex; align-items: center; gap: 12px;">
2720     -    4599 +    2202 +2165     -     27 + 19     -            <button id="sidebar-toggle-btn" class="btn-icon" title="Toggle Sidebar" aria-label="Toggle File Sidebar">
2721     -    4600 +    2203 +2166     -     28 + 20     -                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
2722     -    4601 +    2204 +2167     -     29 + 21     -                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
2723     -    4602 +    2205 +2168     -     30 + 22     -                    <line x1="9" y1="3" x2="9" y2="21"></line>
2724     -    4603 +    2206 +2169     -     31 + 23     -                </svg>
2725     -    4604 +    2207 +2170     -     32 + 24     -            </button>
2726     -    4605 +    2208 +2171     -     33 + 25     -            <h1>üìù Markdown Viewer Pro</h1>
2727     -    4606 +    2209 +2172     -     34 +     18 +        <div style="display: flex; align-items: center; gap: 12px">
2728     -    4607 +    2210 +2173     -     35 +     19 +          <button
2729     -    4608 +    2211 +2174     -     36 +     20 +            id="sidebar-toggle-btn"
2730     -    4609 +    2212 +2175     -     37 +     21 +            class="btn-icon"
2731     -    4610 +    2213 +2176     -     38 +     22 +            title="Toggle Sidebar"
2732     -    4611 +    2214 +2177     -     39 +     23 +            aria-label="Toggle File Sidebar"
2733     -    4612 +    2215 +2178     -     40 +     24 +          >
2734     -    4613 +    2216 +2179     -     41 +     25 +            <svg
2735     -    4614 +    2217 +2180     -     42 +     26 +              width="20"
2736     -    4615 +    2218 +2181     -     43 +     27 +              height="20"
2737     -    4616 +    2219 +2182     -     44 +     28 +              viewBox="0 0 24 24"
2738     -    4617 +    2220 +2183     -     45 +     29 +              fill="none"
2739     -    4618 +    2221 +2184     -     46 +     30 +              stroke="currentColor"
2740     -    4619 +    2222 +2185     -     47 +     31 +              stroke-width="2"
2741     -    4620 +    2223 +2186     -     48 +     32 +              stroke-linecap="round"
2742     -    4621 +    2224 +2187     -     49 +     33 +              stroke-linejoin="round"
2743     -    4622 +    2225 +2188     -     50 +     34 +            >
2744     -    4623 +    2226 +2189     -     51 +     35 +              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
2745     -    4624 +    2227 +2190     -     52 +     36 +              <line x1="9" y1="3" x2="9" y2="21"></line>
2746     -    4625 +    2228 +2191     -     53 +     37 +            </svg>
2747     -    4626 +    2229 +2192     -     54 +     38 +          </button>
2748     -    4627 +    2230 +2193     -     55 +     39 +          <h1>üìù Markdown Viewer Pro</h1>
2749     -    4628 +    2231 +2194     -     56 + 26  40          </div>
2750     -    4629 +    2232 +2195     -     57 + 27  41          <div class="toolbar-controls">
2751     -    4630 +    2233 +2196     -     58 + 28  42            <!-- Folder Browser Toggle - Always visible -->
2752     -    4631 +    2234 +2197     -     59 +@@ -149,7 +163,6 @@
2753     -    4632 +    2235 +2198     -     60 +149 163        <div class="main-content">
2754     -    4633 +    2236 +2199     -     61 +150 164          <!-- Floating show sidebar button (visible when sidebar is hidden) -->
2755     -    4634 +    2237 +2200     -     62 +151 165  
2756     -    4635 +    2238 +2201     -     63 +152     -
2757     -    4636 +    2239 +2202     -     64 +153 166          <!-- Folder Browser Sidebar (Hidden by default) -->
2758     -    4637 +    2240 +2203     -     65 +154 167          <div class="file-browser collapsed" id="file-browser">
2759     -    4638 +    2241 +2204     -     66 +155 168            <!-- Resize handle for dragging -->
2760     -    4639 +    2242 +2205     -     67 +@@ -169,14 +182,6 @@
2761     -    4640 +    2243 +2206     -     68 +169 182                >
2762     -    4641 +    2244 +2207     -     69 +170 183                  ‚óÄ
2763     -    4642 +    2245 +2208     -     70 +171 184                </button>
2764     -    4643 +    2246 +2209     -     71 +172     -              <button
2765     -    4644 +    2247 +2210     -     72 +173     -                class="btn-icon"
2766     -    4645 +    2248 +2211     -     73 +174     -                id="close-browser-btn"
2767     -    4646 +    2249 +2212     -     74 +175     -                title="Close Folder Browser"
2768     -    4647 +    2250 +2213     -     75 +176     -                aria-label="Close Folder Browser"
2769     -    4648 +    2251 +2214     -     76 +177     -              >
2770     -    4649 +    2252 +2215     -     77 +178     -                ‚úï
2771     -    4650 +    2253 +2216     -     78 +179     -              </button>
2772     -    4651 +    2254 +2217     -     79 +180 185              </div>
2773     -    4652 +    2255 +2218     -     80 +181 186            </div>
2774     -    4653 +    2256 +2219     -     81 +182 187  
2775     -    4654 +    2257 +2220     -     82 +183 188  
2776     -    4655 +    2258 +2221     -2132  83  
2777     -    4656 +    2259 +2222     -2133  84  ```
2778     -    4657 +    2260 +2223     -2134  85  
2779     -    4658 +    2261 +2224     -@@ -2138,102 +89,67 @@ AI_REVIEW.md | 2073 ++++++++++++++++++++++++++++++----------------------------
2780     -    4659 +    2262 +2225     -2138  89  **Type:** JavaScript Source File üü®
2781     -    4660 +    2263 +2226     -2139  90  
2782     -    4661 +    2264 +2227     -2140  91  ```diff
2783     -    4662 +    2265 +2228     -2141     -@@ -193,14 +193,21 @@ function configureMarkedExtensions() {
2784     -    4663 +    2266 +2229     -2142     -193 193          },
2785     -    4664 +    2267 +2230     -2143     -194 194          tokenizer(src) {
2786     -    4665 +    2268 +2231     -2144     -195 195            // Robust regex for LaTeX environments (tolerant to whitespace)
2787     -    4666 +    2269 +2232     -2145     -196     -          // Capture group 1: The full environment content (including begin/end)
2788     -    4667 +    2270 +2233     -2146     -197     -          // Capture group 2: The environment name (e.g., multline)
2789     -    4668 +    2271 +2234     -2147     -    196 +          // Capture group 1: Full content, Group 2: Env Name, Group 3: Inner Content
2790     -    4669 +    2272 +2235     -2148     -198 197            const match = src.match(/^\s*(\\begin\s*\{([a-zA-Z]+\*?)\}([\s\S]*?)\\end\s*\{\2\})/);
2791     -    4670 +    2273 +2236     -2149     -199 198            if (match) {
2792     -    4671 +    2274 +2237     -2150     -    199 +            let text = match[1];
2793     -    4672 +    2275 +2238     -2151     -    200 +            const env = match[2];
2794     -    4673 +    2276 +2239     -2152     -    201 +            // Shim 'multline' (not supported by KaTeX core) to 'gathered'
2795     -    4674 +    2277 +2240     -2153     -    202 +            if (env === 'multline' || env === 'multline*') {
2796     -    4675 +    2278 +2241     -2154     -    203 +              console.warn('Shimming multline to gathered for KaTeX compatibility');
2797     -    4676 +    2279 +2242     -2155     -    204 +              text = '\\begin{gathered}' + match[3] + '\\end{gathered}';
2798     -    4677 +    2280 +2243     -2156     -    205 +            }
2799     -    4678 +    2281 +2244     -2157     -    206 +
2800     -    4679 +    2282 +2245     -2158     -200 207              return {
2801     -    4680 +    2283 +2246     -2159     -201 208                type: 'mathEnvironment',
2802     -    4681 +    2284 +2247     -2160     -202 209                raw: match[0],
2803     -    4682 +    2285 +2248     -2161     -203     -              text: match[1],
2804     -    4683 +    2286 +2249     -2162     -    210 +              text: text,
2805     -    4684 +    2287 +2250     -2163     -204 211              };
2806     -    4685 +    2288 +2251     -2164     -205 212            }
2807     -    4686 +    2289 +2252     -2165     -206 213          },
2808     -    4687 +    2290 +2253     -2166     -207 214  
2809     -    4688 +    2291 +2254     -2167     -
2810     -    4689 +    2292 +2255     -2168     -```
2811     -    4690 +    2293 +2256     -2169     -
2812     -    4691 +    2294 +2257     -2170     -
2813     -    4692 +    2295 +2258     -2171     -### üìÑ `style.css`
2814     -    4693 +    2296 +2259     -2172     -
2815     -    4694 +    2297 +2260     -2173     -**Type:** Stylesheet üé®
2816     -    4695 +    2298 +2261     -2174     -
2817     -    4696 +    2299 +2262     -2175     -```diff
2818     -    4697 +    2300 +2263     -2176     -@@ -842,14 +842,17 @@ body {
2819     -    4698 +    2301 +2264     -2177     -842 842    width: 280px;
2820     -    4699 +    2302 +2265     -2178     -843 843    min-width: 100px;
2821     -    4700 +    2303 +2266     -2179     -844 844    max-width: 600px;
2822     -    4701 +    2304 +2267     -2180     -845     -  background-color: var(--bg-secondary);
2823     -    4702 +    2305 +2268     -2181     -846     -  border-right: 2px solid var(--border-color);
2824     -    4703 +    2306 +2269     -2182     -    845 +  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
2825     -    4704 +    2307 +2270     -2183     -    846 +  backdrop-filter: blur(12px);
2826     -    4705 +    2308 +2271     -2184     -    847 +  -webkit-backdrop-filter: blur(12px);
2827     -    4706 +    2309 +2272     -2185     -    848 +  border-right: 1px solid var(--border-color);
2828     -    4707 +    2310 +2273     -2186     -847 849    display: flex;
2829     -    4708 +    2311 +2274     -2187     -848 850    flex-direction: column;
2830     -    4709 +    2312 +2275     -2188     -849 851    overflow: hidden;
2831     -    4710 +    2313 +2276     -2189     -850 852    flex-shrink: 0;
2832     -    4711 +    2314 +2277     -2190     -851 853    position: relative;
2833     -    4712 +    2315 +2278     -2191     -852     -  transition: width 0.1s ease-out;
2834     -    4713 +    2316 +2279     -2192     -    854 +  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
2835     -    4714 +    2317 +2280     -2193     -    855 +  box-shadow: 4px 0 12px rgba(0, 0, 0, 0.05); /* Subtle depth */
2836     -    4715 +    2318 +2281     -2194     -853 856  }
2837     -    4716 +    2319 +2282     -2195     -854 857  
2838     -    4717 +    2320 +2283     -2196     -855 858  .file-browser.resizing {
2839     -    4718 +    2321 +2284     -2197     -@@ -938,28 +941,35 @@ body {
2840     -    4719 +    2322 +2285     -2198     -938 941    padding: 4px 0;
2841     -    4720 +    2323 +2286     -2199     -939 942  }
2842     -    4721 +    2324 +2287     -2200     -940 943  
2843     -    4722 +    2325 +2288     -2201     -    944 +/* Tree Items */
2844     -    4723 +    2326 +2289     -2202     -941 945  /* Tree Items */
2845     -    4724 +    2327 +2290     -2203     -942 946  .tree-item {
2846     -    4725 +    2328 +2291     -2204     -943 947    padding: 8px 12px;
2847     -    4726 +    2329 +2292     -2205     -    948 +  margin: 2px 6px; /* Floating items */
2848     -    4727 +    2330 +2293     -2206     -    949 +  border-radius: 6px;
2849     -    4728 +    2331 +2294     -2207     -944 950    cursor: pointer;
2850     -    4729 +    2332 +2295     -2208     -945 951    display: flex;
2851     -    4730 +    2333 +2296     -2209     -946 952    align-items: center;
2852     -    4731 +    2334 +2297     -2210     -947 953    gap: 8px;
2853     -    4732 +    2335 +2298     -2211     -948     -  transition: background-color 0.15s ease;
2854     -    4733 +    2336 +2299     -2212     -    954 +  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
2855     -    4734 +    2337 +2300     -2213     -949 955    user-select: none;
2856     -    4735 +    2338 +2301     -2214     -950 956    font-size: 14px;
2857     -    4736 +    2339 +2302     -2215     -951 957    border-left: 3px solid transparent;
2858     -    4737 +    2340 +2303     -2216     -952 958  }
2859     -    4738 +    2341 +2304     -2217     -953 959  
2860     -    4739 +    2342 +2305     -2218     -954 960  .tree-item:hover {
2861     -    4740 +    2343 +2306     -2219     -955     -  background-color: var(--bg-tertiary);
2862     -    4741 +    2344 +2307     -2220     -    961 +  background-color: color-mix(in srgb, var(--h1-color) 10%, transparent);
2863     -    4742 +    2345 +2308     -2221     -    962 +  transform: translateX(4px);
2864     -    4743 +    2346 +2309     -2222     -    963 +  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
2865     -    4744 +    2347 +2310     -2223     -956 964  }
2866     -    4745 +    2348 +2311     -2224     -957 965  
2867     -    4746 +    2349 +2312     -2225     -958 966  .tree-item.active {
2868     -    4747 +    2350 +2313     -2226     -959 967    background-color: var(--h1-color);
2869     -    4748 +    2351 +2314     -2227     -960 968    color: white;
2870     -    4749 +    2352 +2315     -2228     -961     -  border-left-color: var(--h2-color);
2871     -    4750 +    2353 +2316     -2229     -    969 +  border-left-color: rgba(255,255,255,0.5);
2872     -    4751 +    2354 +2317     -2230     -962 970    font-weight: 600;
2873     -    4752 +    2355 +2318     -2231     -    971 +  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
2874     -    4753 +    2356 +2319     -2232     -    972 +  transform: scale(1.02);
2875     -    4754 +    2357 +2320     -2233     -963 973  }
2876     -    4755 +    2358 +2321     -2234     -964 974  
2877     -    4756 +    2359 +2322     -2235     -965 975  .tree-item.folder {
2878     -    4757 +    2360 +2323     -2236     -966 976  
2879     -    4758 +    2361 +2324     -     92 +@@ -79,10 +79,9 @@ function initializeApp() {
2880     -    4759 +    2362 +2325     -     93 + 79  79  function debounce(func, wait) {
2881     -    4760 +    2363 +2326     -     94 + 80  80    let timeout;
2882     -    4761 +    2364 +2327     -     95 + 81  81    return function truncated(...args) {
2883     -    4762 +    2365 +2328     -     96 + 82     -    const context = this;
2884     -    4763 +    2366 +2329     -     97 + 83  82      clearTimeout(timeout);
2885     -    4764 +    2367 +2330     -     98 + 84  83      timeout = setTimeout(() => {
2886     -    4765 +    2368 +2331     -     99 + 85     -      func.apply(context, args);
2887     -    4766 +    2369 +2332     -    100 +     84 +      func.apply(this, args);
2888     -    4767 +    2370 +2333     -    101 + 86  85      }, wait);
2889     -    4768 +    2371 +2334     -    102 + 87  86    };
2890     -    4769 +    2372 +2335     -    103 + 88  87  }
2891     -    4770 +    2373 +2336     -    104 +@@ -1178,12 +1177,11 @@ graph TD
2892     -    4771 +    2374 +2337     -    105 +1178 1177  
2893     -    4772 +    2375 +2338     -    106 +1179 1178    // ==================== FOLDER BROWSER FUNCTIONALITY ====================
2894     -    4773 +    2376 +2339     -    107 +1180 1179  
2895     -    4774 +    2377 +2340     -    108 +1181     -  // Folder browser DOM elements
2896     -    4775 +    2378 +2341     -    109 +1182 1180    // Folder browser DOM elements
2897     -    4776 +    2379 +2342     -    110 +1183 1181    const fileBrowser = document.getElementById('file-browser');
2898     -    4777 +    2380 +2343     -    111 +1184 1182    const openFolderBtn = document.getElementById('open-folder-btn');
2899     -    4778 +    2381 +2344     -    112 +1185     -  const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn');
2900     -    4779 +    2382 +2345     -    113 +1186     -  const closeBrowserBtn = document.getElementById('close-browser-btn');
2901     -    4780 +    2383 +2346     -    114 +    1183 +  const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn'); // Toolbar button
2902     -    4781 +    2384 +2347     -    115 +    1184 +  const toggleSidebarBtn = document.getElementById('toggle-sidebar-btn'); // Sidebar header button
2903     -    4782 +    2385 +2348     -    116 +1187 1185    const resizeHandle = document.getElementById('resize-handle');
2904     -    4783 +    2386 +2349     -    117 +1188 1186    const fileTree = document.getElementById('file-tree');
2905     -    4784 +    2387 +2350     -    118 +1189 1187    const currentFolderNameEl = document.getElementById('current-folder-name');
2906     -    4785 +    2388 +2351     -    119 +@@ -1257,8 +1255,8 @@ graph TD
2907     -    4786 +    2389 +2352     -    120 +1257 1255      if (!folderBrowserService.isSupported()) {
2908     -    4787 +    2390 +2353     -    121 +1258 1256        alert(
2909     -    4788 +    2391 +2354     -    122 +1259 1257          'Folder browsing requires File System Access API.\n\n' +
2910     -    4789 +    2392 +2355     -    123 +1260     -        'Please use Chrome 86+ or Edge 86+.\n\n' +
2911     -    4790 +    2393 +2356     -    124 +1261     -        'Firefox and Safari are not currently supported.'
2912     -    4791 +    2394 +2357     -    125 +    1258 +          'Please use Chrome 86+ or Edge 86+.\n\n' +
2913     -    4792 +    2395 +2358     -    126 +    1259 +          'Firefox and Safari are not currently supported.'
2914     -    4793 +    2396 +2359     -    127 +1262 1260        );
2915     -    4794 +    2397 +2360     -    128 +1263 1261        return;
2916     -    4795 +    2398 +2361     -    129 +1264 1262      }
2917     -    4796 +    2399 +2362     -    130 +@@ -1298,18 +1296,13 @@ graph TD
2918     -    4797 +    2400 +2363     -    131 +1298 1296      storageManager.set('sidebarCollapsed', isCollapsed);
2919     -    4798 +    2401 +2364     -    132 +1299 1297    }
2920     -    4799 +    2402 +2365     -    133 +1300 1298  
2921     -    4800 +    2403 +2366     -    134 +1301     -  // Unified Toggle Button
2922     -    4801 +    2404 +2367     -    135 +    1299 +  // Attach event listeners to BOTH toggle buttons
2923     -    4802 +    2405 +2368     -    136 +1302 1300    if (sidebarToggleBtn) {
2924     -    4803 +    2406 +2369     -    137 +1303 1301      sidebarToggleBtn.addEventListener('click', toggleSidebar);
2925     -    4804 +    2407 +2370     -    138 +1304 1302    }
2926     -    4805 +    2408 +2371     -    139 +1305 1303  
2927     -    4806 +    2409 +2372     -    140 +1306     -  // Handle Close Button inside sidebar
2928     -    4807 +    2410 +2373     -    141 +1307     -  if (closeBrowserBtn) {
2929     -    4808 +    2411 +2374     -    142 +1308     -    closeBrowserBtn.addEventListener('click', () => {
2930     -    4809 +    2412 +2375     -    143 +1309     -      // Just collapse it
2931     -    4810 +    2413 +2376     -    144 +1310     -      fileBrowser.classList.add('collapsed');
2932     -    4811 +    2414 +2377     -    145 +1311     -      storageManager.set('sidebarCollapsed', 'true');
2933     -    4812 +    2415 +2378     -    146 +1312     -    });
2934     -    4813 +    2416 +2379     -    147 +    1304 +  if (toggleSidebarBtn) {
2935     -    4814 +    2417 +2380     -    148 +    1305 +    toggleSidebarBtn.addEventListener('click', toggleSidebar);
2936     -    4815 +    2418 +2381     -    149 +1313 1306    }
2937     -    4816 +    2419 +2382     -    150 +1314 1307  
2938     -    4817 +    2420 +2383     -    151 +1315 1308    // Render file tree
2939     -    4818 +    2421 +2384     -    152 +1316 1309  
2940     -    4819 +    2422 +2385     -2237 153  
2941     -    4820 +    2423 +2386     -2238 154  ```
2942     -    4821 +    2424 +2387     -2239 155  
2943     -    4822 +    2425 +2388     -@@ -2279,4 +195,4 @@ Please provide specific feedback on:
2944     -    4823 +    2426 +2389     -2279 195  
2945     -    4824 +    2427 +2390     -2280 196  ---
2946     -    4825 +    2428 +2391     -2281 197  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
2947     -    4826 +    2429 +2392     -2282     -*Files processed: 3/3 | Errors: 0 | Generated: 2025-12-09T03:59:52.431Z*
2948     -    4827 +    2430 +2393     -    198 +*Files processed: 2/2 | Errors: 0 | Generated: 2025-12-09T07:39:37.871Z*
2949     -    4828 +    2431 +2394     -2283 199  
2950     -    4829 +    2432 +     26 +@@ -0,0 +1,52 @@
2951     -    4830 +    2433 +     27 +      1 +# Code & Architecture Review: Export Services
2952     -    4831 +    2434 +     28 +      2 +
2953     -    4832 +    2435 +     29 +      3 +## 1. Code Review
2954     -    4833 +    2436 +     30 +      4 +
2955     -    4834 +    2437 +     31 +      5 +### PDFService (PDF Export)
2956     -    4835 +    2438 +     32 +      6 +- **Status:** ‚ö†Ô∏è Resolved Rendering Issue
2957     -    4836 +    2439 +     33 +      7 +- **Issue:** The `html2pdf` library (specifically `html2canvas`) crashed when parsing modern CSS `color-mix()` functions used in the UI (Glassmorphism).
2958     -    4837 +    2440 +     34 +      8 +- **Fix:** Refactored `style.css` to use solid color variables (`var(--bg-secondary)`) instead of `color-mix()` for elements involved in the export context (Buttons).
2959     -    4838 +    2441 +     35 +      9 +- **Quality:**
2960     -    4839 +    2442 +     36 +     10 +  - ‚úÖ Clean separation of config (`buildHtml2PdfConfig`) and execution.
2961     -    4840 +    2443 +     37 +     11 +  - ‚úÖ Robust validation of user inputs (margins, page size).
2962     -    4841 +    2444 +     38 +     12 +  - ‚ö†Ô∏è Dependency on global `html2pdf` (should be modular, but acceptable for this architecture).
2963     -    4842 +    2445 +     39 +     13 +
2964     -    4843 +    2446 +     40 +     14 +### HTMLService (HTML Export)
2965     -    4844 +    2447 +     41 +     15 +- **Status:** ‚úÖ NEW Implementation
2966     -    4845 +    2448 +     42 +     16 +- **Issue:** Previous implementation was monolithic (inside `script.js`) and produced broken HTML (missing math styles, missing syntax highlighting dependencies).
2967     -    4846 +    2449 +     43 +     17 +- **Fix:** Created dedicated `HTMLService.js`.
2968     -    4847 +    2450 +     44 +     18 +  - Injects `katex.min.css` (CDN) for Math support.
2969     -    4848 +    2451 +     45 +     19 +  - Injects `prism-tomorrow.min.css` (CDN) for Code highlighting.
2970     -    4849 +    2452 +     46 +     20 +  - Injects Theme CSS properly.
2971     -    4850 +    2453 +     47 +     21 +- **Quality:**
2972     -    4851 +    2454 +     48 +     22 +  - ‚úÖ Service-based architecture.
2973     -    4852 +    2455 +     49 +     23 +  - ‚úÖ Generates standalone HTML blobs.
2974     -    4853 +    2456 +     50 +     24 +
2975     -    4854 +    2457 +     51 +     25 +## 2. Architectural Review
2976     -    4855 +    2458 +     52 +     26 +
2977     -    4856 +    2459 +     53 +     27 +### Service Layer
2978     -    4857 +    2460 +     54 +     28 +- **Pattern:** The application uses a "Service Class" pattern (`PDFService`, `MermaidService`, `HTMLService`) instantiated in the main controller (`script.js`).
2979     -    4858 +    2461 +     55 +     29 +- **Verdict:** Good. This keeps logic out of the global scope and allows for easier testing/mocking.
2980     -    4859 +    2462 +     56 +     30 +- **Recommendation:** `script.js` acts as a text-heavy "God Controller". Future refactoring should split `script.js` into `EditorController`, `PreviewController`, and `ToolbarController`.
2981     -    4860 +    2463 +     57 +     31 +
2982     -    4861 +    2464 +     58 +     32 +### CSS / Styling
2983     -    4862 +    2465 +     59 +     33 +- **Architecture:** CSS Variables (`:root`) used for Theming.
2984     -    4863 +    2466 +     60 +     34 +- **Issue:** Modern CSS (`color-mix`) caused compatibility issues with legacy tools (`html2canvas`).
2985     -    4864 +    2467 +     61 +     35 +- **Lesson:** When building "Export to PDF" features that rely on DOM parsing, avoid bleeding-edge CSS in exportable elements.
2986     -    4865 +    2468 +     62 +     36 +
2987     -    4866 +    2469 +     63 +     37 +## 3. UI/UX Review
2988     -    4867 +    2470 +     64 +     38 +
2989     -    4868 +    2471 +     65 +     39 +### PDF Export
2990     -    4869 +    2472 +     66 +     40 +- **Experience:** ‚≠êÔ∏è Premium.
2991     -    4870 +    2473 +     67 +     41 +- **Features:** Live Preview, Custom Margins, Page Size, Font Scale.
2992     -    4871 +    2474 +     68 +     42 +- **Feedback:** The glassmorphism and animations in the modal are visually pleasing.
2993     -    4872 +    2475 +     69 +     43 +
2994     -    4873 +    2476 +     70 +     44 +### HTML Export
2995     -    4874 +    2477 +     71 +     45 +- **Experience:** üòê Functional.
2996     -    4875 +    2478 +     72 +     46 +- **Features:** "Click to Download".
2997     -    4876 +    2479 +     73 +     47 +- **Feedback:** Lacks a "Preview" or configuration (e.g., "Exclude CSS?").
2998     -    4877 +    2480 +     74 +     48 +- **Improvement:** Could add a simple modal to choose "Self-contained (Base64 images)" vs "Linked".
2999     -    4878 +    2481 +     75 +     49 +
3000     -    4879 +    2482 +     76 +     50 +## Summary of Findings
3001     -    4880 +    2483 +     77 +     51 +- **Critical Fix:** `color-mix` CSS removed to unblock PDF generation.
3002     -    4881 +    2484 +     78 +     52 +- **New Feature:** `HTMLService` ensures exported files render Math and Code correctly.
3003     -    4882 +    2485 +     79 +     53  
3004     -    4883 +    2486 +     80 +
3005     -    4884 +    2487 +     81 +```
3006     -    4885 +    2488 +     82 +
3007     -    4886 +    2489 +     83 +
3008     -    4887 +    2490 +     84 +### üìÑ `script.js`
3009     -    4888 +    2491 +     85 +
3010     -    4889 +    2492 +     86 +**Type:** JavaScript Source File üü®
3011     -    4890 +    2493 +     87 +
3012     -    4891 +    2494 +     88 +```diff
3013     -    4892 +    2495 +     89 +@@ -16,6 +16,7 @@ import Prism from 'prismjs';
3014     -    4893 +    2496 +     90 + 16  16  import { StorageManager } from './src/js/core/StorageManager.js';
3015     -    4894 +    2497 +     91 + 17  17  import { ThemeManager } from './src/js/core/ThemeManager.js';
3016     -    4895 +    2498 +     92 + 18  18  import { FolderBrowserService } from './src/js/services/FolderBrowserService.js';
3017     -    4896 +    2499 +     93 +     19 +import { HTMLService } from './src/js/services/HTMLService.js';
3018     -    4897 +    2500 +     94 + 19  20  import { MermaidService } from './src/js/services/MermaidService.js';
3019     -    4898 +    2501 +     95 + 20  21  import { PDFService } from './src/js/services/PDFService.js';
3020     -    4899 +    2502 +     96 + 21  22  import { PrismService } from './src/js/services/PrismService.js';
3021     -    4900 +    2503 +     97 +@@ -34,6 +35,7 @@ const themeManager = new ThemeManager(storageManager);
3022     -    4901 +    2504 +     98 + 34  35  const mermaidService = new MermaidService();
3023     -    4902 +    2505 +     99 + 35  36  const prismService = new PrismService();
3024     -    4903 +    2506 +    100 + 36  37  const pdfService = new PDFService();
3025     -    4904 +    2507 +    101 +     38 +const htmlService = new HTMLService();
3026     -    4905 +    2508 +    102 + 37  39  const folderBrowserService = new FolderBrowserService(storageManager);
3027     -    4906 +    2509 +    103 + 38  40  
3028     -    4907 +    2510 +    104 + 39  41  // Folder browser state
3029     -    4908 +    2511 +    105 +@@ -616,99 +618,25 @@ graph TD
3030     -    4909 +    2512 +    106 +616 618    }
3031     -    4910 +    2513 +    107 +617 619  
3032     -    4911 +    2514 +    108 +618 620    // Export to HTML
3033     -    4912 +    2515 +    109 +619     -  function exportHTML() {
3034     -    4913 +    2516 +    110 +620     -    const currentTheme = themeSelector.value;
3035     -    4914 +    2517 +    111 +621     -    let themeCSS = '';
3036     -    4915 +    2518 +    112 +    621 +  async function exportHTML() {
3037     -    4916 +    2519 +    113 +    622 +    const originalText = exportHtmlBtn.textContent;
3038     -    4917 +    2520 +    114 +    623 +    exportHtmlBtn.textContent = '‚è≥ Exporting...';
3039     -    4918 +    2521 +    115 +    624 +    exportHtmlBtn.disabled = true;
3040     -    4919 +    2522 +    116 +622 625  
3041     -    4920 +    2523 +    117 +623     -    if (currentTheme === 'custom') {
3042     -    4921 +    2524 +    118 +624     -      const customTheme = storageManager.getJSON('customTheme');
3043     -    4922 +    2525 +    119 +625     -      if (customTheme) {
3044     -    4923 +    2526 +    120 +626     -        const theme = customTheme;
3045     -    4924 +    2527 +    121 +627     -        themeCSS = ':root {\n';
3046     -    4925 +    2528 +    122 +628     -        Object.entries(theme).forEach(([property, value]) => {
3047     -    4926 +    2529 +    123 +629     -          themeCSS += `    ${property}: ${value};\n`;
3048     -    4927 +    2530 +    124 +630     -        });
3049     -    4928 +    2531 +    125 +631     -        themeCSS += '}';
3050     -    4929 +    2532 +    126 +632     -      }
3051     -    4930 +    2533 +    127 +633     -    } else {
3052     -    4931 +    2534 +    128 +634     -      // Fetch theme CSS
3053     -    4932 +    2535 +    129 +635     -      fetch(`themes/${currentTheme}.css`)
3054     -    4933 +    2536 +    130 +636     -        .then(response => response.text())
3055     -    4934 +    2537 +    131 +637     -        .then(css => {
3056     -    4935 +    2538 +    132 +638     -          themeCSS = css;
3057     -    4936 +    2539 +    133 +639     -          generateHTML();
3058     -    4937 +    2540 +    134 +640     -        })
3059     -    4938 +    2541 +    135 +641     -        .catch(err => {
3060     -    4939 +    2542 +    136 +642     -          console.error('Error loading theme:', err);
3061     -    4940 +    2543 +    137 +643     -          generateHTML();
3062     -    4941 +    2544 +    138 +644     -        });
3063     -    4942 +    2545 +    139 +645     -      return;
3064     -    4943 +    2546 +    140 +646     -    }
3065     -    4944 +    2547 +    141 +    626 +    try {
3066     -    4945 +    2548 +    142 +    627 +      const themeName = themeSelector.value;
3067     -    4946 +    2549 +    143 +    628 +      const customTheme = themeName === 'custom' ? storageManager.getJSON('customTheme') : null;
3068     -    4947 +    2550 +    144 +647 629  
3069     -    4948 +    2551 +    145 +648     -    generateHTML();
3070     -    4949 +    2552 +    146 +    630 +      const blob = await htmlService.generateHTML(previewContainer.innerHTML, themeName, customTheme);
3071     -    4950 +    2553 +    147 +    631 +      htmlService.downloadHTML(blob, 'markdown-export.html');
3072     -    4951 +    2554 +    148 +649 632  
3073     -    4952 +    2555 +    149 +650     -    function generateHTML() {
3074     -    4953 +    2556 +    150 +651     -      const html = `<!DOCTYPE html>
3075     -    4954 +    2557 +    151 +652     -<html>
3076     -    4955 +    2558 +    152 +653     -<head>
3077     -    4956 +    2559 +    153 +654     -    <meta charset="UTF-8">
3078     -    4957 +    2560 +    154 +655     -    <title>Exported Markdown</title>
3079     -    4958 +    2561 +    155 +656     -    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
3080     -    4959 +    2562 +    156 +657     -    <style>
3081     -    4960 +    2563 +    157 +658     -        body {
3082     -    4961 +    2564 +    158 +659     -            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
3083     -    4962 +    2565 +    159 +660     -            max-width: 800px;
3084     -    4963 +    2566 +    160 +661     -            margin: 0 auto;
3085     -    4964 +    2567 +    161 +662     -            padding: 40px 20px;
3086     -    4965 +    2568 +    162 +663     -            line-height: 1.7;
3087     -    4966 +    2569 +    163 +664     -        }
3088     -    4967 +    2570 +    164 +665     -
3089     -    4968 +    2571 +    165 +666     -        ${themeCSS}
3090     -    4969 +    2572 +    166 +667     -
3091     -    4970 +    2573 +    167 +668     -        body {
3092     -    4971 +    2574 +    168 +669     -            background-color: var(--bg-primary);
3093     -    4972 +    2575 +    169 +670     -            color: var(--text-primary);
3094     -    4973 +    2576 +    170 +671     -        }
3095     -    4974 +    2577 +    171 +672     -
3096     -    4975 +    2578 +    172 +673     -        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
3097     -    4976 +    2579 +    173 +674     -        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
3098     -    4977 +    2580 +    174 +675     -        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
3099     -    4978 +    2581 +    175 +676     -        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
3100     -    4979 +    2582 +    176 +677     -        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
3101     -    4980 +    2583 +    177 +678     -        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
3102     -    4981 +    2584 +    178 +679     -
3103     -    4982 +    2585 +    179 +680     -        a { color: var(--link-color); text-decoration: none; }
3104     -    4983 +    2586 +    180 +681     -        a:hover { color: var(--link-hover); text-decoration: underline; }
3105     -    4984 +    2587 +    181 +682     -
3106     -    4985 +    2588 +    182 +683     -        strong { color: var(--bold-color); font-weight: 700; }
3107     -    4986 +    2589 +    183 +684     -        em { color: var(--italic-color); font-style: italic; }
3108     -    4987 +    2590 +    184 +685     -
3109     -    4988 +    2591 +    185 +686     -        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
3110     -    4989 +    2592 +    186 +687     -        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
3111     -    4990 +    2593 +    187 +688     -        pre code { background-color: transparent; color: inherit; padding: 0; }
3112     -    4991 +    2594 +    188 +689     -
3113     -    4992 +    2595 +    189 +690     -        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
3114     -    4993 +    2596 +    190 +691     -
3115     -    4994 +    2597 +    191 +692     -        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
3116     -    4995 +    2598 +    192 +693     -        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
3117     -    4996 +    2599 +    193 +694     -        td { padding: 10px 12px; border: 1px solid var(--table-border); }
3118     -    4997 +    2600 +    194 +695     -
3119     -    4998 +    2601 +    195 +696     -        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
3120     -    4999 +    2602 +    196 +697     -        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
3121     -    5000 +    2603 +    197 +698     -    </style>
3122     -    5001 +    2604 +    198 +699     -</head>
3123     -    5002 +    2605 +    199 +700     -<body>
3124     -    5003 +    2606 +    200 +701     -    ${DOMPurify.sanitize(preview.innerHTML)}
3125     -    5004 +    2607 +    201 +702     -</body>
3126     -    5005 +    2608 +    202 +703     -</html>`;
3127     -    5006 +    2609 +    203 +704     -
3128     -    5007 +    2610 +    204 +705     -      const blob = new Blob([html], { type: 'text/html' });
3129     -    5008 +    2611 +    205 +706     -      const url = URL.createObjectURL(blob);
3130     -    5009 +    2612 +    206 +707     -      const a = document.createElement('a');
3131     -    5010 +    2613 +    207 +708     -      a.href = url;
3132     -    5011 +    2614 +    208 +709     -      a.download = 'markdown-export.html';
3133     -    5012 +    2615 +    209 +710     -      a.click();
3134     -    5013 +    2616 +    210 +711     -      URL.revokeObjectURL(url);
3135     -    5014 +    2617 +    211 +    633 +      console.log('‚úÖ HTML Export successful');
3136     -    5015 +    2618 +    212 +    634 +    } catch (error) {
3137     -    5016 +    2619 +    213 +    635 +      console.error('HTML Export failed:', error);
3138     -    5017 +    2620 +    214 +    636 +      alert('Failed to export HTML: ' + error.message);
3139     -    5018 +    2621 +    215 +    637 +    } finally {
3140     -    5019 +    2622 +    216 +    638 +      exportHtmlBtn.textContent = originalText;
3141     -    5020 +    2623 +    217 +    639 +      exportHtmlBtn.disabled = false;
3142     -    5021 +    2624 +    218 +712 640      }
3143     -    5022 +    2625 +    219 +713 641    }
3144     -    5023 +    2626 +    220 +714 642  
3145     -    5024 +    2627 +    221 +@@ -1255,8 +1183,8 @@ graph TD
3146     -    5025 +    2628 +    222 +1255 1183      if (!folderBrowserService.isSupported()) {
3147     -    5026 +    2629 +    223 +1256 1184        alert(
3148     -    5027 +    2630 +    224 +1257 1185          'Folder browsing requires File System Access API.\n\n' +
3149     -    5028 +    2631 +    225 +1258     -          'Please use Chrome 86+ or Edge 86+.\n\n' +
3150     -    5029 +    2632 +    226 +1259     -          'Firefox and Safari are not currently supported.'
3151     -    5030 +    2633 +    227 +    1186 +        'Please use Chrome 86+ or Edge 86+.\n\n' +
3152     -    5031 +    2634 +    228 +    1187 +        'Firefox and Safari are not currently supported.'
3153     -    5032 +    2635 +    229 +1260 1188        );
3154     -    5033 +    2636 +    230 +1261 1189        return;
3155     -    5034 +    2637 +    231 +1262 1190      }
3156     -    5035 +    2638 +    232 +1263 1191  
3157     -    5036 +    2639 +    233 +
3158     -    5037 +    2640 +    234 +```
3159     -    5038 +    2641 +    235 +
3160     -    5039 +    2642 +    236 +
3161     -    5040 +    2643 +    237 +### ‚ú® `src/js/services/HTMLService.js` **[ADDED]**
3162     -    5041 +    2644 +    238 +
3163     -    5042 +    2645 +    239 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
3164     -    5043 +    2646 +    240 +
3165     -    5044 +    2647 +    241 +**Type:** JavaScript Source File üü®
3166     -    5045 +    2648 +    242 +
3167     -    5046 +    2649 +    243 +```diff
3168     -    5047 +    2650 +    244 +@@ -0,0 +1,119 @@
3169     -    5048 +    2651 +    245 +      1 +/**
3170     -    5049 +    2652 +    246 +      2 + * HTMLService - HTML Export Service
3171     -    5050 +    2653 +    247 +      3 + * Handles generation of standalone HTML files with embedded themes and necessary CDNs.
3172     -    5051 +    2654 +    248 +      4 + */
3173     -    5052 +    2655 +    249 +      5 +
3174     -    5053 +    2656 +    250 +      6 +export class HTMLService {
3175     -    5054 +    2657 +    251 +      7 +  /**
3176     -    5055 +    2658 +    252 +      8 +   * Generate complete HTML document
3177     -    5056 +    2659 +    253 +      9 +   *
3178     -    5057 +    2660 +    254 +     10 +   * @param {string} contentHtml - The inner HTML of the preview container
3179     -    5058 +    2661 +    255 +     11 +   * @param {string} themeName - Current theme name
3180     -    5059 +    2662 +    256 +     12 +   * @param {Object} customTheme - Custom theme object (optional)
3181     -    5060 +    2663 +    257 +     13 +   * @returns {Promise<Blob>} HTML Blob
3182     -    5061 +    2664 +    258 +     14 +   */
3183     -    5062 +    2665 +    259 +     15 +  async generateHTML(contentHtml, themeName, customTheme = null) {
3184     -    5063 +    2666 +    260 +     16 +    const themeCSS = await this.getThemeCSS(themeName, customTheme);
3185     -    5064 +    2667 +    261 +     17 +
3186     -    5065 +    2668 +    262 +     18 +    const html = `<!DOCTYPE html>
3187     -    5066 +    2669 +    263 +     19 +<html>
3188     -    5067 +    2670 +    264 +     20 +<head>
3189     -    5068 +    2671 +    265 +     21 +    <meta charset="UTF-8">
3190     -    5069 +    2672 +    266 +     22 +    <title>Exported Markdown</title>
3191     -    5070 +    2673 +    267 +     23 +    <!-- Syntax Highlighting -->
3192     -    5071 +    2674 +    268 +     24 +    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
3193     -    5072 +    2675 +    269 +     25 +    <!-- Math Rendering (KaTeX) -->
3194     -    5073 +    2676 +    270 +     26 +    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
3195     -    5074 +    2677 +    271 +     27 +    <!-- Mermaid Styles (Basic) -->
3196     -    5075 +    2678 +    272 +     28 +    <style>
3197     -    5076 +    2679 +    273 +     29 +      .mermaid { display: flex; justify-content: center; margin: 1em 0; }
3198     -    5077 +    2680 +    274 +     30 +    </style>
3199     -    5078 +    2681 +    275 +     31 +    <style>
3200     -    5079 +    2682 +    276 +     32 +        body {
3201     -    5080 +    2683 +    277 +     33 +            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
3202     -    5081 +    2684 +    278 +     34 +            max-width: 800px;
3203     -    5082 +    2685 +    279 +     35 +            margin: 0 auto;
3204     -    5083 +    2686 +    280 +     36 +            padding: 40px 20px;
3205     -    5084 +    2687 +    281 +     37 +            line-height: 1.7;
3206     -    5085 +    2688 +    282 +     38 +        }
3207     -    5086 +    2689 +    283 +     39 +
3208     -    5087 +    2690 +    284 +     40 +        ${themeCSS}
3209     -    5088 +    2691 +    285 +     41 +
3210     -    5089 +    2692 +    286 +     42 +        body {
3211     -    5090 +    2693 +    287 +     43 +            background-color: var(--bg-primary);
3212     -    5091 +    2694 +    288 +     44 +            color: var(--text-primary);
3213     -    5092 +    2695 +    289 +     45 +        }
3214     -    5093 +    2696 +    290 +     46 +
3215     -    5094 +    2697 +    291 +     47 +        /* Base Typography */
3216     -    5095 +    2698 +    292 +     48 +        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
3217     -    5096 +    2699 +    293 +     49 +        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
3218     -    5097 +    2700 +    294 +     50 +        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
3219     -    5098 +    2701 +    295 +     51 +        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
3220     -    5099 +    2702 +    296 +     52 +        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
3221     -    5100 +    2703 +    297 +     53 +        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
3222     -    5101 +    2704 +    298 +     54 +
3223     -    5102 +    2705 +    299 +     55 +        a { color: var(--link-color); text-decoration: none; }
3224     -    5103 +    2706 +    300 +     56 +        a:hover { color: var(--link-hover); text-decoration: underline; }
3225     -    5104 +    2707 +    301 +     57 +
3226     -    5105 +    2708 +    302 +     58 +        strong { color: var(--bold-color); font-weight: 700; }
3227     -    5106 +    2709 +    303 +     59 +        em { color: var(--italic-color); font-style: italic; }
3228     -    5107 +    2710 +    304 +     60 +
3229     -    5108 +    2711 +    305 +     61 +        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
3230     -    5109 +    2712 +    306 +     62 +        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
3231     -    5110 +    2713 +    307 +     63 +        pre code { background-color: transparent; color: inherit; padding: 0; }
3232     -    5111 +    2714 +    308 +     64 +
3233     -    5112 +    2715 +    309 +     65 +        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
3234     -    5113 +    2716 +    310 +     66 +
3235     -    5114 +    2717 +    311 +     67 +        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
3236     -    5115 +    2718 +    312 +     68 +        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
3237     -    5116 +    2719 +    313 +     69 +        td { padding: 10px 12px; border: 1px solid var(--table-border); }
3238     -    5117 +    2720 +    314 +     70 +
3239     -    5118 +    2721 +    315 +     71 +        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
3240     -    5119 +    2722 +    316 +     72 +        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
3241     -    5120 +    2723 +    317 +     73 +
3242     -    5121 +    2724 +    318 +     74 +        /* Lists */
3243     -    5122 +    2725 +    319 +     75 +        ul, ol { padding-left: 2em; margin: 1em 0; }
3244     -    5123 +    2726 +    320 +     76 +        li { margin: 0.5em 0; }
3245     -    5124 +    2727 +    321 +     77 +    </style>
3246     -    5125 +    2728 +    322 +     78 +</head>
3247     -    5126 +    2729 +    323 +     79 +<body>
3248     -    5127 +    2730 +    324 +     80 +    ${contentHtml}
3249     -    5128 +    2731 +    325 +     81 +</body>
3250     -    5129 +    2732 +    326 +     82 +</html>`;
3251     -    5130 +    2733 +    327 +     83 +
3252     -    5131 +    2734 +    328 +     84 +    return new Blob([html], { type: 'text/html' });
3253     -    5132 +    2735 +    329 +     85 +  }
3254     -    5133 +    2736 +    330 +     86 +
3255     -    5134 +    2737 +    331 +     87 +  /**
3256     -    5135 +    2738 +    332 +     88 +   * Helper to retrieve CSS content
3257     -    5136 +    2739 +    333 +     89 +   * @private
3258     -    5137 +    2740 +    334 +     90 +   */
3259     -    5138 +    2741 +    335 +     91 +  async getThemeCSS(themeName, customTheme) {
3260     -    5139 +    2742 +    336 +     92 +    if (themeName === 'custom' && customTheme) {
3261     -    5140 +    2743 +    337 +     93 +      let css = ':root {\n';
3262     -    5141 +    2744 +    338 +     94 +      Object.entries(customTheme).forEach(([prop, val]) => {
3263     -    5142 +    2745 +    339 +     95 +        css += `    ${prop}: ${val};\n`;
3264     -    5143 +    2746 +    340 +     96 +      });
3265     -    5144 +    2747 +    341 +     97 +      css += '}';
3266     -    5145 +    2748 +    342 +     98 +      return css;
3267     -    5146 +    2749 +    343 +     99 +    }
3268     -    5147 +    2750 +    344 +    100 +
3269     -    5148 +    2751 +    345 +    101 +    try {
3270     -    5149 +    2752 +    346 +    102 +      const response = await fetch(`themes/${themeName}.css`);
3271     -    5150 +    2753 +    347 +    103 +      if (!response.ok) throw new Error('Theme load failed');
3272     -    5151 +    2754 +    348 +    104 +      return await response.text();
3273     -    5152 +    2755 +    349 +    105 +    } catch (e) {
3274     -    5153 +    2756 +    350 +    106 +      console.error('Failed to load theme CSS', e);
3275     -    5154 +    2757 +    351 +    107 +      return ''; // Fallback
3276     -    5155 +    2758 +    352 +    108 +    }
3277     -    5156 +    2759 +    353 +    109 +  }
3278     -    5157 +    2760 +    354 +    110 +
3279     -    5158 +    2761 +    355 +    111 +  downloadHTML(blob, filename = 'exported-markdown.html') {
3280     -    5159 +    2762 +    356 +    112 +    const url = URL.createObjectURL(blob);
3281     -    5160 +    2763 +    357 +    113 +    const a = document.createElement('a');
3282     -    5161 +    2764 +    358 +    114 +    a.href = url;
3283     -    5162 +    2765 +    359 +    115 +    a.download = filename;
3284     -    5163 +    2766 +    360 +    116 +    a.click();
3285     -    5164 +    2767 +    361 +    117 +    URL.revokeObjectURL(url);
3286     -    5165 +    2768 +    362 +    118 +  }
3287     -    5166 +    2769 +    363 +    119 +}
3288     -    5167 +    2770 +    364 +    120  
3289     -    5168 +    2771 +    365 +
3290     -    5169 +    2772 +    366 +```
3291     -    5170 +    2773 +    367 +
3292     -    5171 +    2774 +    368 +
3293     -    5172 +    2775 +    369 +### üìÑ `style.css`
3294     -    5173 +    2776 +    370 +
3295     -    5174 +    2777 +    371 +**Type:** Stylesheet üé®
3296     -    5175 +    2778 +    372 +
3297     -    5176 +    2779 +    373 +```diff
3298     -    5177 +    2780 +    374 +@@ -24,7 +24,7 @@ body {
3299     -    5178 +    2781 +    375 + 24  24  
3300     -    5179 +    2782 +    376 + 25  25  /* ==================== TOOLBAR ==================== */
3301     -    5180 +    2783 +    377 + 26  26  .toolbar {
3302     -    5181 +    2784 +    378 + 27     -  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
3303     -    5182 +    2785 +    379 +     27 +  background-color: var(--bg-secondary);
3304     -    5183 +    2786 +    380 + 28  28    backdrop-filter: blur(12px);
3305     -    5184 +    2787 +    381 + 29  29    -webkit-backdrop-filter: blur(12px);
3306     -    5185 +    2788 +    382 + 30  30    border-bottom: 1px solid var(--border-color);
3307     -    5186 +    2789 +    383 +@@ -88,7 +88,7 @@ body {
3308     -    5187 +    2790 +    384 + 88  88  .btn {
3309     -    5188 +    2791 +    385 + 89  89    padding: 8px 16px;
3310     -    5189 +    2792 +    386 + 90  90    border: 1px solid var(--border-color);
3311     -    5190 +    2793 +    387 + 91     -  background-color: color-mix(in srgb, var(--bg-primary) 80%, transparent);
3312     -    5191 +    2794 +    388 +     91 +  background-color: var(--bg-primary);
3313     -    5192 +    2795 +    389 + 92  92    backdrop-filter: blur(4px);
3314     -    5193 +    2796 +    390 + 93  93    -webkit-backdrop-filter: blur(4px);
3315     -    5194 +    2797 +    391 + 94  94    color: var(--text-primary);
3316     -    5195 +    2798 +    392 +@@ -503,7 +503,7 @@ body {
3317     -    5196 +    2799 +    393 +503 503  }
3318     -    5197 +    2800 +    394 +504 504  
3319     -    5198 +    2801 +    395 +505 505  .modal-content {
3320     -    5199 +    2802 +    396 +506     -  background-color: color-mix(in srgb, var(--bg-primary) 95%, transparent);
3321     -    5200 +    2803 +    397 +    506 +  background-color: var(--bg-primary);
3322     -    5201 +    2804 +    398 +507 507    backdrop-filter: blur(16px);
3323     -    5202 +    2805 +    399 +508 508    -webkit-backdrop-filter: blur(16px);
3324     -    5203 +    2806 +    400 +509 509    border-radius: 16px;
3325     -    5204 +    2807 +    401 +@@ -823,7 +823,7 @@ body {
3326     -    5205 +    2808 +    402 +823 823    width: 280px;
3327     -    5206 +    2809 +    403 +824 824    min-width: 100px;
3328     -    5207 +    2810 +    404 +825 825    max-width: 600px;
3329     -    5208 +    2811 +    405 +826     -  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
3330     -    5209 +    2812 +    406 +    826 +  background-color: var(--bg-secondary);
3331     -    5210 +    2813 +    407 +827 827    backdrop-filter: blur(12px);
3332     -    5211 +    2814 +    408 +828 828    -webkit-backdrop-filter: blur(12px);
3333     -    5212 +    2815 +    409 +829 829    border-right: 1px solid var(--border-color);
3334     -    5213 +    2816 +    410 +@@ -948,7 +948,7 @@ body {
3335     -    5214 +    2817 +    411 +948 948  }
3336     -    5215 +    2818 +    412 +949 949  
3337     -    5216 +    2819 +    413 +950 950  .tree-item:hover {
3338     -    5217 +    2820 +    414 +951     -  background-color: color-mix(in srgb, var(--h1-color) 10%, transparent);
3339     -    5218 +    2821 +    415 +    951 +  background-color: var(--bg-tertiary);
3340     -    5219 +    2822 +    416 +952 952    transform: translateX(4px);
3341     -    5220 +    2823 +    417 +953 953    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
3342     -    5221 +    2824 +    418 +954 954  }
3343     -    5222 +    2825 +    419 +@@ -1104,7 +1104,7 @@ body {
3344     -    5223 +    2826 +    420 +1104 1104  }
3345     -    5224 +    2827 +    421 +1105 1105  
3346     -    5225 +    2828 +    422 +1106 1106  ::-webkit-scrollbar-thumb {
3347     -    5226 +    2829 +    423 +1107     -  background-color: color-mix(in srgb, var(--text-secondary) 30%, transparent);
3348     -    5227 +    2830 +    424 +    1107 +  background-color: var(--text-secondary);
3349     -    5228 +    2831 +    425 +1108 1108    border-radius: 20px;
3350     -    5229 +    2832 +    426 +1109 1109    border: 3px solid transparent;
3351     -    5230 +    2833 +    427 +1110 1110    background-clip: content-box;
3352     -    5231 +    2834 +    428 +@@ -1112,7 +1112,7 @@ body {
3353     -    5232 +    2835 +    429 +1112 1112  }
3354     -    5233 +    2836 +    430 +1113 1113  
3355     -    5234 +    2837 +    431 +1114 1114  ::-webkit-scrollbar-thumb:hover {
3356     -    5235 +    2838 +    432 +1115     -  background-color: color-mix(in srgb, var(--text-secondary) 50%, transparent);
3357     -    5236 +    2839 +    433 +    1115 +  background-color: var(--text-secondary);
3358     -    5237 +    2840 +    434 +1116 1116  }
3359     -    5238 +    2841 +    435 +1117 1117  
3360     -    5239 +    2842 +    436 +1118 1118  /* ==================== END ==================== */
3361     -    5240 +    2843 +    437 +1119 1119  
3362     -    5241 +    2844 +2395 438  
3363     -    5242 +    2845 +2396 439  ```
3364     -    5243 +    2846 +2397 440  
3365     -    5244 +    2847 +@@ -2437,4 +480,4 @@ Please provide specific feedback on:
3366     -    5245 +    2848 +2437 480  
3367     -    5246 +    2849 +2438 481  ---
3368     -    5247 +    2850 +2439 482  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
3369     -    5248 +    2851 +2440     -*Files processed: 1/1 | Errors: 0 | Generated: 2025-12-09T07:45:27.917Z*
3370     -    5249 +    2852 +    483 +*Files processed: 4/4 | Errors: 0 | Generated: 2025-12-09T13:33:47.856Z*
3371     -    5250 +    2853 +2441 484  
3372     -    5251 +    2854 +
3373     -    5252 +    2855 +```
3374     -    5253 +    2856 +
3375     -    5254 +    2857 +
3376     -    5255 +    2858 +### ‚ú® `CODE_REVIEW_AND_FINDINGS.md` **[ADDED]**
3377     -    5256 +    2859 +
3378     -    5257 +    2860 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
3379     -    5258 +    2861 +
3380     -    5259 +    2862 +**Type:** Documentation üìñ
3381     -    5260 +    2863 +
3382     -    5261 +    2864 +```diff
3383     -    5262 +    2865 +@@ -0,0 +1,52 @@
3384     -    5263 +    2866 +      1 +# Code & Architecture Review: Export Services
3385     -    5264 +    2867 +      2 +
3386     -    5265 +    2868 +      3 +## 1. Code Review
3387     -    5266 +    2869 +      4 +
3388     -    5267 +    2870 +      5 +### PDFService (PDF Export)
3389     -    5268 +    2871 +      6 +- **Status:** ‚ö†Ô∏è Resolved Rendering Issue
3390     -    5269 +    2872 +      7 +- **Issue:** The `html2pdf` library (specifically `html2canvas`) crashed when parsing modern CSS `color-mix()` functions used in the UI (Glassmorphism).
3391     -    5270 +    2873 +      8 +- **Fix:** Refactored `style.css` to use solid color variables (`var(--bg-secondary)`) instead of `color-mix()` for elements involved in the export context (Buttons).
3392     -    5271 +    2874 +      9 +- **Quality:**
3393     -    5272 +    2875 +     10 +  - ‚úÖ Clean separation of config (`buildHtml2PdfConfig`) and execution.
3394     -    5273 +    2876 +     11 +  - ‚úÖ Robust validation of user inputs (margins, page size).
3395     -    5274 +    2877 +     12 +  - ‚ö†Ô∏è Dependency on global `html2pdf` (should be modular, but acceptable for this architecture).
3396     -    5275 +    2878 +     13 +
3397     -    5276 +    2879 +     14 +### HTMLService (HTML Export)
3398     -    5277 +    2880 +     15 +- **Status:** ‚úÖ NEW Implementation
3399     -    5278 +    2881 +     16 +- **Issue:** Previous implementation was monolithic (inside `script.js`) and produced broken HTML (missing math styles, missing syntax highlighting dependencies).
3400     -    5279 +    2882 +     17 +- **Fix:** Created dedicated `HTMLService.js`.
3401     -    5280 +    2883 +     18 +  - Injects `katex.min.css` (CDN) for Math support.
3402     -    5281 +    2884 +     19 +  - Injects `prism-tomorrow.min.css` (CDN) for Code highlighting.
3403     -    5282 +    2885 +     20 +  - Injects Theme CSS properly.
3404     -    5283 +    2886 +     21 +- **Quality:**
3405     -    5284 +    2887 +     22 +  - ‚úÖ Service-based architecture.
3406     -    5285 +    2888 +     23 +  - ‚úÖ Generates standalone HTML blobs.
3407     -    5286 +    2889 +     24 +
3408     -    5287 +    2890 +     25 +## 2. Architectural Review
3409     -    5288 +    2891 +     26 +
3410     -    5289 +    2892 +     27 +### Service Layer
3411     -    5290 +    2893 +     28 +- **Pattern:** The application uses a "Service Class" pattern (`PDFService`, `MermaidService`, `HTMLService`) instantiated in the main controller (`script.js`).
3412     -    5291 +    2894 +     29 +- **Verdict:** Good. This keeps logic out of the global scope and allows for easier testing/mocking.
3413     -    5292 +    2895 +     30 +- **Recommendation:** `script.js` acts as a text-heavy "God Controller". Future refactoring should split `script.js` into `EditorController`, `PreviewController`, and `ToolbarController`.
3414     -    5293 +    2896 +     31 +
3415     -    5294 +    2897 +     32 +### CSS / Styling
3416     -    5295 +    2898 +     33 +- **Architecture:** CSS Variables (`:root`) used for Theming.
3417     -    5296 +    2899 +     34 +- **Issue:** Modern CSS (`color-mix`) caused compatibility issues with legacy tools (`html2canvas`).
3418     -    5297 +    2900 +     35 +- **Lesson:** When building "Export to PDF" features that rely on DOM parsing, avoid bleeding-edge CSS in exportable elements.
3419     -    5298 +    2901 +     36 +
3420     -    5299 +    2902 +     37 +## 3. UI/UX Review
3421     -    5300 +    2903 +     38 +
3422     -    5301 +    2904 +     39 +### PDF Export
3423     -    5302 +    2905 +     40 +- **Experience:** ‚≠êÔ∏è Premium.
3424     -    5303 +    2906 +     41 +- **Features:** Live Preview, Custom Margins, Page Size, Font Scale.
3425     -    5304 +    2907 +     42 +- **Feedback:** The glassmorphism and animations in the modal are visually pleasing.
3426     -    5305 +    2908 +     43 +
3427     -    5306 +    2909 +     44 +### HTML Export
3428     -    5307 +    2910 +     45 +- **Experience:** üòê Functional.
3429     -    5308 +    2911 +     46 +- **Features:** "Click to Download".
3430     -    5309 +    2912 +     47 +- **Feedback:** Lacks a "Preview" or configuration (e.g., "Exclude CSS?").
3431     -    5310 +    2913 +     48 +- **Improvement:** Could add a simple modal to choose "Self-contained (Base64 images)" vs "Linked".
3432     -    5311 +    2914 +     49 +
3433     -    5312 +    2915 +     50 +## Summary of Findings
3434     -    5313 +    2916 +     51 +- **Critical Fix:** `color-mix` CSS removed to unblock PDF generation.
3435     -    5314 +    2917 +     52 +- **New Feature:** `HTMLService` ensures exported files render Math and Code correctly.
3436     -    5315 +    2918 +     53  
3437     -    5316 +    2919 +
3438     -    5317 +    2920 +```
3439     -    5318 +    2921 +
3440     -    5319 +    2922 +
3441     -    5320 +    2923 +### ‚ú® `SERVICE_AUDIT.md` **[ADDED]**
3442     -    5321 +    2924 +
3443     -    5322 +    2925 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
3444     -    5323 +    2926 +
3445     -    5324 +    2927 +**Type:** Documentation üìñ
3446     -    5325 +    2928 +
3447     -    5326 +    2929 +```diff
3448     -    5327 +    2930 +@@ -0,0 +1,55 @@
3449     -    5328 +    2931 +      1 +# Service Code Audit & Verification
3450     -    5329 +    2932 +      2 +Date: 2025-12-09
3451     -    5330 +    2933 +      3 +Reviewer: Antigravity Assistant
3452     -    5331 +    2934 +      4 +
3453     -    5332 +    2935 +      5 +## Scope
3454     -    5333 +    2936 +      6 +Line-by-line review of `src/js/services/PDFService.js` and `src/js/services/HTMLService.js` to address export crashes and content pollution.
3455     -    5334 +    2937 +      7 +
3456     -    5335 +    2938 +      8 +## 1. PDFService.js Audit
3457     -    5336 +    2939 +      9 +
3458     -    5337 +    2940 +     10 +### Initialization & Validation
3459     -    5338 +    2941 +     11 +- **Lines 20-39:** Constructor & Default Config.
3460     -    5339 +    2942 +     12 +  - ‚úÖ Defaults are safe (A4, Portrait, 0.5in margins).
3461     -    5340 +    2943 +     13 +- **Lines 57-91:** `validateConfig`.
3462     -    5341 +    2944 +     14 +  - ‚ö†Ô∏è Found weakness: Margins validation acceptable strings but logic downstream required numbers.
3463     -    5342 +    2945 +     15 +  - ‚úÖ **FIXED:** Updated validation/sanitization in `buildHtml2PdfConfig` to handle types rigidly.
3464     -    5343 +    2946 +     16 +
3465     -    5344 +    2947 +     17 +### Content Preparation
3466     -    5345 +    2948 +     18 +- **Lines 101-144:** `prepareContent`.
3467     -    5346 +    2949 +     19 +  - ‚úÖ Logic Clones content node.
3468     -    5347 +    2950 +     20 +  - ‚úÖ Wraps in styling container (fixes `color-mix` issue by isolation).
3469     -    5348 +    2951 +     21 +  - ‚úÖ Appends Footer (Created in previous step).
3470     -    5349 +    2952 +     22 +  - üîç **Note:** Relies on clean input element. If input has garbage, output has garbage. Fixed caller in `script.js`.
3471     -    5350 +    2953 +     23 +
3472     -    5351 +    2954 +     24 +### Configuration Building (Critical Path)
3473     -    5352 +    2955 +     25 +- **Lines 153-177:** `buildHtml2PdfConfig`.
3474     -    5353 +    2956 +     26 +  - üõë **CRITICAL FINDING:** Direct mapping of `config.margins` to `html2pdf` option caused crash when `NaN` (from empty input) was passed.
3475     -    5354 +    2957 +     27 +  - ‚úÖ **FIXED:** Implemented robust mapping: `Array.isArray(margins) ? margins.map(m => isFinite(parseFloat(m)) ? parseFloat(m) : 0.5) : default`.
3476     -    5355 +    2958 +     28 +  - ‚úÖ `html2canvas` options set `backgroundColor` explicitly to avoid transparency issues.
3477     -    5356 +    2959 +     29 +  - ‚úÖ `jsPDF` config uses `unit: 'in'`, matching the input values.
3478     -    5357 +    2960 +     30 +
3479     -    5358 +    2961 +     31 +### Execution
3480     -    5359 +    2962 +     32 +- **Lines 190-221:** `generatePDF`.
3481     -    5360 +    2963 +     33 +  - ‚úÖ Proper error handling (try-catch) wrapping external library calls.
3482     -    5361 +    2964 +     34 +  - ‚úÖ `outputPdf('blob')` used correctly.
3483     -    5362 +    2965 +     35 +
3484     -    5363 +    2966 +     36 +## 2. HTMLService.js Audit
3485     -    5364 +    2967 +     37 +
3486     -    5365 +    2968 +     38 +### CSS Extraction (The "Vanilla" Bug)
3487     -    5366 +    2969 +     39 +- **Lines 96-140:** `getThemeCSS`.
3488     -    5367 +    2970 +     40 +  - üõë **CRITICAL FINDING:** `fetch` returns Vite's JS module string in Dev mode.
3489     -    5368 +    2971 +     41 +  - ‚úÖ **FIXED:** Implemented Regex + JSON.parse extraction strategy locally to parse `const __vite__css` variable.
3490     -    5369 +    2972 +     42 +  - ‚úÖ Logic includes fallback to full path handling.
3491     -    5370 +    2973 +     43 +
3492     -    5371 +    2974 +     44 +### Content Generation
3493     -    5372 +    2975 +     45 +- **Line 80:** `${contentHtml}` interpolation.
3494     -    5373 +    2976 +     46 +  - üîç **Note:** Takes raw HTML string.
3495     -    5374 +    2977 +     47 +  - ‚úÖ **FIXED:** Caller (`script.js`) updated to pass `preview.innerHTML` (Content) instead of `previewContainer.innerHTML` (Wrapper + Header).
3496     -    5375 +    2978 +     48 +
3497     -    5376 +    2979 +     49 +### Footer
3498     -    5377 +    2980 +     50 +- **Lines 82-84:** Footer Implementation.
3499     -    5378 +    2981 +     51 +  - ‚úÖ Updated to match User Request (Specific links, new tabs).
3500     -    5379 +    2982 +     52 +
3501     -    5380 +    2983 +     53 +## 3. script.js (Integration)
3502     -    5381 +    2984 +     54 +- **Export HTML:** Updated to target `#markdown-preview` (via `preview` variable).
3503     -    5382 +    2985 +     55 +- **Export PDF:** Verified `previewPDF` targets `preview` variable.
3504     -    5383 +    2986 +     56  
3505     -    5384 +    2987 +
3506     -    5385 +    2988 +```
3507     -    5386 +    2989 +
3508     -    5387 +    2990 +
3509     -    5388 +    2991 +### üìÑ `script.js`
3510     -    5389 +    2992 +
3511     -    5390 +    2993 +**Type:** JavaScript Source File üü®
3512     -    5391 +    2994 +
3513     -    5392 +    2995 +```diff
3514     -    5393 +    2996 +@@ -16,6 +16,7 @@ import Prism from 'prismjs';
3515     -    5394 +    2997 + 16  16  import { StorageManager } from './src/js/core/StorageManager.js';
3516     -    5395 +    2998 + 17  17  import { ThemeManager } from './src/js/core/ThemeManager.js';
3517     -    5396 +    2999 + 18  18  import { FolderBrowserService } from './src/js/services/FolderBrowserService.js';
3518     -    5397 +    3000 +     19 +import { HTMLService } from './src/js/services/HTMLService.js';
3519     -    5398 +    3001 + 19  20  import { MermaidService } from './src/js/services/MermaidService.js';
3520     -    5399 +    3002 + 20  21  import { PDFService } from './src/js/services/PDFService.js';
3521     -    5400 +    3003 + 21  22  import { PrismService } from './src/js/services/PrismService.js';
3522     -    5401 +    3004 +@@ -34,6 +35,7 @@ const themeManager = new ThemeManager(storageManager);
3523     -    5402 +    3005 + 34  35  const mermaidService = new MermaidService();
3524     -    5403 +    3006 + 35  36  const prismService = new PrismService();
3525     -    5404 +    3007 + 36  37  const pdfService = new PDFService();
3526     -    5405 +    3008 +     38 +const htmlService = new HTMLService();
3527     -    5406 +    3009 + 37  39  const folderBrowserService = new FolderBrowserService(storageManager);
3528     -    5407 +    3010 + 38  40  
3529     -    5408 +    3011 + 39  41  // Folder browser state
3530     -    5409 +    3012 +@@ -616,99 +618,25 @@ graph TD
3531     -    5410 +    3013 +616 618    }
3532     -    5411 +    3014 +617 619  
3533     -    5412 +    3015 +618 620    // Export to HTML
3534     -    5413 +    3016 +619     -  function exportHTML() {
3535     -    5414 +    3017 +620     -    const currentTheme = themeSelector.value;
3536     -    5415 +    3018 +621     -    let themeCSS = '';
3537     -    5416 +    3019 +    621 +  async function exportHTML() {
3538     -    5417 +    3020 +    622 +    const originalText = exportHtmlBtn.textContent;
3539     -    5418 +    3021 +    623 +    exportHtmlBtn.textContent = '‚è≥ Exporting...';
3540     -    5419 +    3022 +    624 +    exportHtmlBtn.disabled = true;
3541     -    5420 +    3023 +622 625  
3542     -    5421 +    3024 +623     -    if (currentTheme === 'custom') {
3543     -    5422 +    3025 +624     -      const customTheme = storageManager.getJSON('customTheme');
3544     -    5423 +    3026 +625     -      if (customTheme) {
3545     -    5424 +    3027 +626     -        const theme = customTheme;
3546     -    5425 +    3028 +627     -        themeCSS = ':root {\n';
3547     -    5426 +    3029 +628     -        Object.entries(theme).forEach(([property, value]) => {
3548     -    5427 +    3030 +629     -          themeCSS += `    ${property}: ${value};\n`;
3549     -    5428 +    3031 +630     -        });
3550     -    5429 +    3032 +631     -        themeCSS += '}';
3551     -    5430 +    3033 +632     -      }
3552     -    5431 +    3034 +633     -    } else {
3553     -    5432 +    3035 +634     -      // Fetch theme CSS
3554     -    5433 +    3036 +635     -      fetch(`themes/${currentTheme}.css`)
3555     -    5434 +    3037 +636     -        .then(response => response.text())
3556     -    5435 +    3038 +637     -        .then(css => {
3557     -    5436 +    3039 +638     -          themeCSS = css;
3558     -    5437 +    3040 +639     -          generateHTML();
3559     -    5438 +    3041 +640     -        })
3560     -    5439 +    3042 +641     -        .catch(err => {
3561     -    5440 +    3043 +642     -          console.error('Error loading theme:', err);
3562     -    5441 +    3044 +643     -          generateHTML();
3563     -    5442 +    3045 +644     -        });
3564     -    5443 +    3046 +645     -      return;
3565     -    5444 +    3047 +646     -    }
3566     -    5445 +    3048 +    626 +    try {
3567     -    5446 +    3049 +    627 +      const themeName = themeSelector.value;
3568     -    5447 +    3050 +    628 +      const customTheme = themeName === 'custom' ? storageManager.getJSON('customTheme') : null;
3569     -    5448 +    3051 +647 629  
3570     -    5449 +    3052 +648     -    generateHTML();
3571     -    5450 +    3053 +    630 +      const blob = await htmlService.generateHTML(preview.innerHTML, themeName, customTheme);
3572     -    5451 +    3054 +    631 +      htmlService.downloadHTML(blob, 'markdown-export.html');
3573     -    5452 +    3055 +649 632  
3574     -    5453 +    3056 +650     -    function generateHTML() {
3575     -    5454 +    3057 +651     -      const html = `<!DOCTYPE html>
3576     -    5455 +    3058 +652     -<html>
3577     -    5456 +    3059 +653     -<head>
3578     -    5457 +    3060 +654     -    <meta charset="UTF-8">
3579     -    5458 +    3061 +655     -    <title>Exported Markdown</title>
3580     -    5459 +    3062 +656     -    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
3581     -    5460 +    3063 +657     -    <style>
3582     -    5461 +    3064 +658     -        body {
3583     -    5462 +    3065 +659     -            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
3584     -    5463 +    3066 +660     -            max-width: 800px;
3585     -    5464 +    3067 +661     -            margin: 0 auto;
3586     -    5465 +    3068 +662     -            padding: 40px 20px;
3587     -    5466 +    3069 +663     -            line-height: 1.7;
3588     -    5467 +    3070 +664     -        }
3589     -    5468 +    3071 +665     -
3590     -    5469 +    3072 +666     -        ${themeCSS}
3591     -    5470 +    3073 +667     -
3592     -    5471 +    3074 +668     -        body {
3593     -    5472 +    3075 +669     -            background-color: var(--bg-primary);
3594     -    5473 +    3076 +670     -            color: var(--text-primary);
3595     -    5474 +    3077 +671     -        }
3596     -    5475 +    3078 +672     -
3597     -    5476 +    3079 +673     -        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
3598     -    5477 +    3080 +674     -        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
3599     -    5478 +    3081 +675     -        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
3600     -    5479 +    3082 +676     -        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
3601     -    5480 +    3083 +677     -        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
3602     -    5481 +    3084 +678     -        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
3603     -    5482 +    3085 +679     -
3604     -    5483 +    3086 +680     -        a { color: var(--link-color); text-decoration: none; }
3605     -    5484 +    3087 +681     -        a:hover { color: var(--link-hover); text-decoration: underline; }
3606     -    5485 +    3088 +682     -
3607     -    5486 +    3089 +683     -        strong { color: var(--bold-color); font-weight: 700; }
3608     -    5487 +    3090 +684     -        em { color: var(--italic-color); font-style: italic; }
3609     -    5488 +    3091 +685     -
3610     -    5489 +    3092 +686     -        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
3611     -    5490 +    3093 +687     -        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
3612     -    5491 +    3094 +688     -        pre code { background-color: transparent; color: inherit; padding: 0; }
3613     -    5492 +    3095 +689     -
3614     -    5493 +    3096 +690     -        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
3615     -    5494 +    3097 +691     -
3616     -    5495 +    3098 +692     -        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
3617     -    5496 +    3099 +693     -        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
3618     -    5497 +    3100 +694     -        td { padding: 10px 12px; border: 1px solid var(--table-border); }
3619     -    5498 +    3101 +695     -
3620     -    5499 +    3102 +696     -        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
3621     -    5500 +    3103 +697     -        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
3622     -    5501 +    3104 +698     -    </style>
3623     -    5502 +    3105 +699     -</head>
3624     -    5503 +    3106 +700     -<body>
3625     -    5504 +    3107 +701     -    ${DOMPurify.sanitize(preview.innerHTML)}
3626     -    5505 +    3108 +702     -</body>
3627     -    5506 +    3109 +703     -</html>`;
3628     -    5507 +    3110 +704     -
3629     -    5508 +    3111 +705     -      const blob = new Blob([html], { type: 'text/html' });
3630     -    5509 +    3112 +706     -      const url = URL.createObjectURL(blob);
3631     -    5510 +    3113 +707     -      const a = document.createElement('a');
3632     -    5511 +    3114 +708     -      a.href = url;
3633     -    5512 +    3115 +709     -      a.download = 'markdown-export.html';
3634     -    5513 +    3116 +710     -      a.click();
3635     -    5514 +    3117 +711     -      URL.revokeObjectURL(url);
3636     -    5515 +    3118 +    633 +      console.log('‚úÖ HTML Export successful');
3637     -    5516 +    3119 +    634 +    } catch (error) {
3638     -    5517 +    3120 +    635 +      console.error('HTML Export failed:', error);
3639     -    5518 +    3121 +    636 +      alert('Failed to export HTML: ' + error.message);
3640     -    5519 +    3122 +    637 +    } finally {
3641     -    5520 +    3123 +    638 +      exportHtmlBtn.textContent = originalText;
3642     -    5521 +    3124 +    639 +      exportHtmlBtn.disabled = false;
3643     -    5522 +    3125 +712 640      }
3644     -    5523 +    3126 +713 641    }
3645     -    5524 +    3127 +714 642  
3646     -    5525 +    3128 +@@ -1255,8 +1183,8 @@ graph TD
3647     -    5526 +    3129 +1255 1183      if (!folderBrowserService.isSupported()) {
3648     -    5527 +    3130 +1256 1184        alert(
3649     -    5528 +    3131 +1257 1185          'Folder browsing requires File System Access API.\n\n' +
3650     -    5529 +    3132 +1258     -          'Please use Chrome 86+ or Edge 86+.\n\n' +
3651     -    5530 +    3133 +1259     -          'Firefox and Safari are not currently supported.'
3652     -    5531 +    3134 +    1186 +        'Please use Chrome 86+ or Edge 86+.\n\n' +
3653     -    5532 +    3135 +    1187 +        'Firefox and Safari are not currently supported.'
3654     -    5533 +    3136 +1260 1188        );
3655     -    5534 +    3137 +1261 1189        return;
3656     -    5535 +    3138 +1262 1190      }
3657     -    5536 +    3139 +1263 1191  
3658     -    5537 +    3140 +
3659     -    5538 +    3141 +```
3660     -    5539 +    3142 +
3661     -    5540 +    3143 +
3662     -    5541 +    3144 +### ‚ú® `src/js/services/HTMLService.js` **[ADDED]**
3663     -    5542 +    3145 +
3664     -    5543 +    3146 +**Status:** ‚úÖ **NEW FILE** - This file has been newly created
3665     -    5544 +    3147 +
3666     -    5545 +    3148 +**Type:** JavaScript Source File üü®
3667     -    5546 +    3149 +
3668     -    5547 +    3150 +```diff
3669     -    5548 +    3151 +@@ -0,0 +1,150 @@
3670     -    5549 +    3152 +      1 +/**
3671     -    5550 +    3153 +      2 + * HTMLService - HTML Export Service
3672     -    5551 +    3154 +      3 + * Handles generation of standalone HTML files with embedded themes and necessary CDNs.
3673     -    5552 +    3155 +      4 + */
3674     -    5553 +    3156 +      5 +
3675     -    5554 +    3157 +      6 +export class HTMLService {
3676     -    5555 +    3158 +      7 +  /**
3677     -    5556 +    3159 +      8 +   * Generate complete HTML document
3678     -    5557 +    3160 +      9 +   *
3679     -    5558 +    3161 +     10 +   * @param {string} contentHtml - The inner HTML of the preview container
3680     -    5559 +    3162 +     11 +   * @param {string} themeName - Current theme name
3681     -    5560 +    3163 +     12 +   * @param {Object} customTheme - Custom theme object (optional)
3682     -    5561 +    3164 +     13 +   * @returns {Promise<Blob>} HTML Blob
3683     -    5562 +    3165 +     14 +   */
3684     -    5563 +    3166 +     15 +  async generateHTML(contentHtml, themeName, customTheme = null) {
3685     -    5564 +    3167 +     16 +    const themeCSS = await this.getThemeCSS(themeName, customTheme);
3686     -    5565 +    3168 +     17 +
3687     -    5566 +    3169 +     18 +    const html = `<!DOCTYPE html>
3688     -    5567 +    3170 +     19 +<html>
3689     -    5568 +    3171 +     20 +<head>
3690     -    5569 +    3172 +     21 +    <meta charset="UTF-8">
3691     -    5570 +    3173 +     22 +    <title>Exported Markdown</title>
3692     -    5571 +    3174 +     23 +    <!-- Syntax Highlighting -->
3693     -    5572 +    3175 +     24 +    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
3694     -    5573 +    3176 +     25 +    <!-- Math Rendering (KaTeX) -->
3695     -    5574 +    3177 +     26 +    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
3696     -    5575 +    3178 +     27 +    <!-- Mermaid Styles (Basic) -->
3697     -    5576 +    3179 +     28 +    <style>
3698     -    5577 +    3180 +     29 +      .mermaid { display: flex; justify-content: center; margin: 1em 0; }
3699     -    5578 +    3181 +     30 +    </style>
3700     -    5579 +    3182 +     31 +    <style>
3701     -    5580 +    3183 +     32 +        body {
3702     -    5581 +    3184 +     33 +            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
3703     -    5582 +    3185 +     34 +            max-width: 800px;
3704     -    5583 +    3186 +     35 +            margin: 0 auto;
3705     -    5584 +    3187 +     36 +            padding: 40px 20px;
3706     -    5585 +    3188 +     37 +            line-height: 1.7;
3707     -    5586 +    3189 +     38 +        }
3708     -    5587 +    3190 +     39 +
3709     -    5588 +    3191 +     40 +        ${themeCSS}
3710     -    5589 +    3192 +     41 +
3711     -    5590 +    3193 +     42 +        body {
3712     -    5591 +    3194 +     43 +            background-color: var(--bg-primary);
3713     -    5592 +    3195 +     44 +            color: var(--text-primary);
3714     -    5593 +    3196 +     45 +        }
3715     -    5594 +    3197 +     46 +
3716     -    5595 +    3198 +     47 +        /* Base Typography */
3717     -    5596 +    3199 +     48 +        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
3718     -    5597 +    3200 +     49 +        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
3719     -    5598 +    3201 +     50 +        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
3720     -    5599 +    3202 +     51 +        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
3721     -    5600 +    3203 +     52 +        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
3722     -    5601 +    3204 +     53 +        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
3723     -    5602 +    3205 +     54 +
3724     -    5603 +    3206 +     55 +        a { color: var(--link-color); text-decoration: none; }
3725     -    5604 +    3207 +     56 +        a:hover { color: var(--link-hover); text-decoration: underline; }
3726     -    5605 +    3208 +     57 +
3727     -    5606 +    3209 +     58 +        strong { color: var(--bold-color); font-weight: 700; }
3728     -    5607 +    3210 +     59 +        em { color: var(--italic-color); font-style: italic; }
3729     -    5608 +    3211 +     60 +
3730     -    5609 +    3212 +     61 +        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
3731     -    5610 +    3213 +     62 +        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
3732     -    5611 +    3214 +     63 +        pre code { background-color: transparent; color: inherit; padding: 0; }
3733     -    5612 +    3215 +     64 +
3734     -    5613 +    3216 +     65 +        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
3735     -    5614 +    3217 +     66 +
3736     -    5615 +    3218 +     67 +        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
3737     -    5616 +    3219 +     68 +        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
3738     -    5617 +    3220 +     69 +        td { padding: 10px 12px; border: 1px solid var(--table-border); }
3739     -    5618 +    3221 +     70 +
3740     -    5619 +    3222 +     71 +        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
3741     -    5620 +    3223 +     72 +        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
3742     -    5621 +    3224 +     73 +
3743     -    5622 +    3225 +     74 +        /* Lists */
3744     -    5623 +    3226 +     75 +        ul, ol { padding-left: 2em; margin: 1em 0; }
3745     -    5624 +    3227 +     76 +        li { margin: 0.5em 0; }
3746     -    5625 +    3228 +     77 +    </style>
3747     -    5626 +    3229 +     78 +</head>
3748     -    5627 +    3230 +     79 +<body>
3749     -    5628 +    3231 +     80 +    ${contentHtml}
3750     -    5629 +    3232 +     81 +
3751     -    5630 +    3233 +     82 +    <footer style="margin-top: 40px; border-top: 1px solid var(--border-color); padding-top: 20px; text-align: center; color: var(--text-secondary); font-size: 0.85em;">
3752     -    5631 +    3234 +     83 +        <p style="margin: 0.5em 0;">Generated by <a href="https://prakharmnnit.github.io/markdown-viewer-app/" target="_blank" style="color: inherit; text-decoration: underline;">Markdown Viewer Pro</a></p>
3753     -    5632 +    3235 +     84 +        <p style="margin: 0.5em 0;">Made with ‚ù§Ô∏è by Prax Lannister | Follow me on <a href="https://github.com/PrakharMNNIT" target="_blank" style="color: var(--link-color); text-decoration: none;">GitHub</a> & <a href="https://x.com/ByteByByteSrSDE" target="_blank" style="color: var(--link-color); text-decoration: none;">X (Twitter)</a></p>
3754     -    5633 +    3236 +     85 +    </footer>
3755     -    5634 +    3237 +     86 +</body>
3756     -    5635 +    3238 +     87 +</html>`;
3757     -    5636 +    3239 +     88 +
3758     -    5637 +    3240 +     89 +    return new Blob([html], { type: 'text/html' });
3759     -    5638 +    3241 +     90 +  }
3760     -    5639 +    3242 +     91 +
3761     -    5640 +    3243 +     92 +  /**
3762     -    5641 +    3244 +     93 +   * Helper to retrieve CSS content
3763     -    5642 +    3245 +     94 +   * @private
3764     -    5643 +    3246 +     95 +   */
3765     -    5644 +    3247 +     96 +  async getThemeCSS(themeName, customTheme) {
3766     -    5645 +    3248 +     97 +    if (themeName === 'custom' && customTheme) {
3767     -    5646 +    3249 +     98 +      let css = ':root {\n';
3768     -    5647 +    3250 +     99 +      Object.entries(customTheme).forEach(([prop, val]) => {
3769     -    5648 +    3251 +    100 +        css += `    ${prop}: ${val};\n`;
3770     -    5649 +    3252 +    101 +      });
3771     -    5650 +    3253 +    102 +      css += '}';
3772     -    5651 +    3254 +    103 +      return css;
3773     -    5652 +    3255 +    104 +    }
3774     -    5653 +    3256 +    105 +    const baseUrl = import.meta.env.BASE_URL || '/';
3775     -    5654 +    3257 +    106 +    // Remove leading slash from baseUrl if present to avoid double slash with themes/
3776     -    5655 +    3258 +    107 +    // Actually relative fetch is best.
3777     -    5656 +    3259 +    108 +
3778     -    5657 +    3260 +    109 +    try {
3779     -    5658 +    3261 +    110 +      // Use relative path which works best with <base> or current location
3780     -    5659 +    3262 +    111 +      const response = await fetch(`themes/${themeName}.css`);
3781     -    5660 +    3263 +    112 +
3782     -    5661 +    3264 +    113 +      let finalResponse = response;
3783     -    5662 +    3265 +    114 +      if (!response.ok) {
3784     -    5663 +    3266 +    115 +        // Fallback to full path construction if relative failed
3785     -    5664 +    3267 +    116 +        const fullPath = `${baseUrl}themes/${themeName}.css`.replace('//', '/');
3786     -    5665 +    3268 +    117 +        finalResponse = await fetch(fullPath);
3787     -    5666 +    3269 +    118 +        if (!finalResponse.ok) throw new Error(`Theme load failed: ${finalResponse.status}`);
3788     -    5667 +    3270 +    119 +      }
3789     -    5668 +    3271 +    120 +
3790     -    5669 +    3272 +    121 +      let css = await finalResponse.text();
3791     -    5670 +    3273 +    122 +
3792     -    5671 +    3274 +    123 +      // Handle Vite Dev Server response (JS module instead of raw CSS)
3793     -    5672 +    3275 +    124 +      if (css.includes('const __vite__css = "')) {
3794     -    5673 +    3276 +    125 +        const match = css.match(/const __vite__css\s*=\s*"((?:[^"\\]|\\.)*)"/);
3795     -    5674 +    3277 +    126 +        if (match && match[1]) {
3796     -    5675 +    3278 +    127 +          try {
3797     -    5676 +    3279 +    128 +            // Parse JSON string to handle escapes (e.g. \n) correctly
3798     -    5677 +    3280 +    129 +            css = JSON.parse(`"${match[1]}"`);
3799     -    5678 +    3281 +    130 +          } catch (e) {
3800     -    5679 +    3282 +    131 +            console.warn('Failed to parse Vite CSS string', e);
3801     -    5680 +    3283 +    132 +          }
3802     -    5681 +    3284 +    133 +        }
3803     -    5682 +    3285 +    134 +      }
3804     -    5683 +    3286 +    135 +      return css;
3805     -    5684 +    3287 +    136 +    } catch (e) {
3806     -    5685 +    3288 +    137 +      console.error('Failed to load theme CSS', e);
3807     -    5686 +    3289 +    138 +      return '/* Theme Fetch Failed: ' + e.message + ' */';
3808     -    5687 +    3290 +    139 +    }
3809     -    5688 +    3291 +    140 +  }
3810     -    5689 +    3292 +    141 +
3811     -    5690 +    3293 +    142 +  downloadHTML(blob, filename = 'exported-markdown.html') {
3812     -    5691 +    3294 +    143 +    const url = URL.createObjectURL(blob);
3813     -    5692 +    3295 +    144 +    const a = document.createElement('a');
3814     -    5693 +    3296 +    145 +    a.href = url;
3815     -    5694 +    3297 +    146 +    a.download = filename;
3816     -    5695 +    3298 +    147 +    a.click();
3817     -    5696 +    3299 +    148 +    URL.revokeObjectURL(url);
3818     -    5697 +    3300 +    149 +  }
3819     -    5698 +    3301 +    150 +}
3820     -    5699 +    3302 +    151  
3821     -    5700 +    3303 +
3822     -    5701 +    3304 +```
3823     -    5702 +    3305 +
3824     -    5703 +    3306 +
3825     -    5704 +    3307 +### üìÑ `src/js/services/PDFService.js`
3826     -    5705 +    3308 +
3827     -    5706 +    3309 +**Type:** JavaScript Source File üü®
3828     -    5707 +    3310 +
3829     -    5708 +    3311 +```diff
3830     -    5709 +    3312 +@@ -122,6 +122,24 @@ export class PDFService {
3831     -    5710 +    3313 +122 122        .trim();
3832     -    5711 +    3314 +123 123  
3833     -    5712 +    3315 +124 124      container.appendChild(element);
3834     -    5713 +    3316 +    125 +
3835     -    5714 +    3317 +    126 +    // Add Footer
3836     -    5715 +    3318 +    127 +    const footer = document.createElement('div');
3837     -    5716 +    3319 +    128 +    footer.style.marginTop = '40px';
3838     -    5717 +    3320 +    129 +    const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim();
3839     -    5718 +    3321 +    130 +    const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim();
3840     -    5719 +    3322 +    131 +
3841     -    5720 +    3323 +    132 +    footer.style.borderTop = `1px solid ${borderColor}`;
3842     -    5721 +    3324 +    133 +    footer.style.paddingTop = '20px';
3843     -    5722 +    3325 +    134 +    footer.style.textAlign = 'center';
3844     -    5723 +    3326 +    135 +    footer.style.color = textColor;
3845     -    5724 +    3327 +    136 +    footer.style.fontSize = '0.85em';
3846     -    5725 +    3328 +    137 +    footer.innerHTML = `
3847     -    5726 +    3329 +    138 +        <p style="margin: 5px 0;">Generated by <a href="https://prakharmnnit.github.io/markdown-viewer-app/" style="color: #0969da; text-decoration: underline;">Markdown Viewer Pro</a></p>
3848     -    5727 +    3330 +    139 +        <p style="margin: 5px 0;">Made with ‚ù§Ô∏è by Prax Lannister | Follow me on <a href="https://github.com/PrakharMNNIT" style="color: #0969da;">GitHub</a> & <a href="https://x.com/ByteByByteSrSDE" style="color: #0969da;">X (Twitter)</a></p>
3849     -    5728 +    3331 +    140 +    `;
3850     -    5729 +    3332 +    141 +    container.appendChild(footer);
3851     -    5730 +    3333 +    142 +
3852     -    5731 +    3334 +125 143      return container;
3853     -    5732 +    3335 +126 144    }
3854     -    5733 +    3336 +127 145  
3855     -    5734 +    3337 +@@ -135,7 +153,15 @@ export class PDFService {
3856     -    5735 +    3338 +135 153    buildHtml2PdfConfig(config) {
3857     -    5736 +    3339 +136 154      const pageSize = config.pageSize || 'A4';
3858     -    5737 +    3340 +137 155      const orientation = config.orientation || PDF_CONFIG.ORIENTATIONS.PORTRAIT;
3859     -    5738 +    3341 +138     -    const margins = config.margins || PDF_CONFIG.DEFAULT_MARGINS;
3860     -    5739 +    3342 +    156 +
3861     -    5740 +    3343 +    157 +    // Ensure margins are numbers and safe
3862     -    5741 +    3344 +    158 +    let margins = config.margins || PDF_CONFIG.DEFAULT_MARGINS;
3863     -    5742 +    3345 +    159 +    if (Array.isArray(margins)) {
3864     -    5743 +    3346 +    160 +      margins = margins.map(m => {
3865     -    5744 +    3347 +    161 +        const val = parseFloat(m);
3866     -    5745 +    3348 +    162 +        return isFinite(val) ? val : 0.5; // Default to 0.5in if invalid
3867     -    5746 +    3349 +    163 +      });
3868     -    5747 +    3350 +    164 +    }
3869     -    5748 +    3351 +139 165  
3870     -    5749 +    3352 +140 166      return {
3871     -    5750 +    3353 +141 167        margin: margins,
3872     -    5751 +    3354 +142 168  
3873     -    5752 +    3355 +
3874     -    5753 +    3356 +```
3875     -    5754 +    3357 +
3876     -    5755 +    3358 +
3877     -    5756 +    3359 +### üìÑ `style.css`
3878     -    5757 +    3360 +
3879     -    5758 +    3361 +**Type:** Stylesheet üé®
3880     -    5759 +    3362 +
3881     -    5760 +    3363 +```diff
3882     -    5761 +    3364 +@@ -24,7 +24,7 @@ body {
3883     -    5762 +    3365 + 24  24  
3884     -    5763 +    3366 + 25  25  /* ==================== TOOLBAR ==================== */
3885     -    5764 +    3367 + 26  26  .toolbar {
3886     -    5765 +    3368 + 27     -  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
3887     -    5766 +    3369 +     27 +  background-color: var(--bg-secondary);
3888     -    5767 +    3370 + 28  28    backdrop-filter: blur(12px);
3889     -    5768 +    3371 + 29  29    -webkit-backdrop-filter: blur(12px);
3890     -    5769 +    3372 + 30  30    border-bottom: 1px solid var(--border-color);
3891     -    5770 +    3373 +@@ -88,7 +88,7 @@ body {
3892     -    5771 +    3374 + 88  88  .btn {
3893     -    5772 +    3375 + 89  89    padding: 8px 16px;
3894     -    5773 +    3376 + 90  90    border: 1px solid var(--border-color);
3895     -    5774 +    3377 + 91     -  background-color: color-mix(in srgb, var(--bg-primary) 80%, transparent);
3896     -    5775 +    3378 +     91 +  background-color: var(--bg-primary);
3897     -    5776 +    3379 + 92  92    backdrop-filter: blur(4px);
3898     -    5777 +    3380 + 93  93    -webkit-backdrop-filter: blur(4px);
3899     -    5778 +    3381 + 94  94    color: var(--text-primary);
3900     -    5779 +    3382 +@@ -503,7 +503,7 @@ body {
3901     -    5780 +    3383 +503 503  }
3902     -    5781 +    3384 +504 504  
3903     -    5782 +    3385 +505 505  .modal-content {
3904     -    5783 +    3386 +506     -  background-color: color-mix(in srgb, var(--bg-primary) 95%, transparent);
3905     -    5784 +    3387 +    506 +  background-color: var(--bg-primary);
3906     -    5785 +    3388 +507 507    backdrop-filter: blur(16px);
3907     -    5786 +    3389 +508 508    -webkit-backdrop-filter: blur(16px);
3908     -    5787 +    3390 +509 509    border-radius: 16px;
3909     -    5788 +    3391 +@@ -823,7 +823,7 @@ body {
3910     -    5789 +    3392 +823 823    width: 280px;
3911     -    5790 +    3393 +824 824    min-width: 100px;
3912     -    5791 +    3394 +825 825    max-width: 600px;
3913     -    5792 +    3395 +826     -  background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
3914     -    5793 +    3396 +    826 +  background-color: var(--bg-secondary);
3915     -    5794 +    3397 +827 827    backdrop-filter: blur(12px);
3916     -    5795 +    3398 +828 828    -webkit-backdrop-filter: blur(12px);
3917     -    5796 +    3399 +829 829    border-right: 1px solid var(--border-color);
3918     -    5797 +    3400 +@@ -948,7 +948,7 @@ body {
3919     -    5798 +    3401 +948 948  }
3920     -    5799 +    3402 +949 949  
3921     -    5800 +    3403 +950 950  .tree-item:hover {
3922     -    5801 +    3404 +951     -  background-color: color-mix(in srgb, var(--h1-color) 10%, transparent);
3923     -    5802 +    3405 +    951 +  background-color: var(--bg-tertiary);
3924     -    5803 +    3406 +952 952    transform: translateX(4px);
3925     -    5804 +    3407 +953 953    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
3926     -    5805 +    3408 +954 954  }
3927     -    5806 +    3409 +@@ -1104,7 +1104,7 @@ body {
3928     -    5807 +    3410 +1104 1104  }
3929     -    5808 +    3411 +1105 1105  
3930     -    5809 +    3412 +1106 1106  ::-webkit-scrollbar-thumb {
3931     -    5810 +    3413 +1107     -  background-color: color-mix(in srgb, var(--text-secondary) 30%, transparent);
3932     -    5811 +    3414 +    1107 +  background-color: var(--text-secondary);
3933     -    5812 +    3415 +1108 1108    border-radius: 20px;
3934     -    5813 +    3416 +1109 1109    border: 3px solid transparent;
3935     -    5814 +    3417 +1110 1110    background-clip: content-box;
3936     -    5815 +    3418 +@@ -1112,7 +1112,7 @@ body {
3937     -    5816 +    3419 +1112 1112  }
3938     -    5817 +    3420 +1113 1113  
3939     -    5818 +    3421 +1114 1114  ::-webkit-scrollbar-thumb:hover {
3940     -    5819 +    3422 +1115     -  background-color: color-mix(in srgb, var(--text-secondary) 50%, transparent);
3941     -    5820 +    3423 +    1115 +  background-color: var(--text-secondary);
3942     -    5821 +    3424 +1116 1116  }
3943     -    5822 +    3425 +1117 1117  
3944     -    5823 +    3426 +1118 1118  /* ==================== END ==================== */
3945     -    5824 +    3427 +1119 1119  
3946     -    5825 +2395 3428  
3947     -    5826 +2396 3429  ```
3948     -    5827 +2397 3430  
3949     -    5828 +@@ -2437,4 +3470,4 @@ Please provide specific feedback on:
3950     -    5829 +2437 3470  
3951     -    5830 +2438 3471  ---
3952     -    5831 +2439 3472  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
3953     -2851 5832  2440     -*Files processed: 1/1 | Errors: 0 | Generated: 2025-12-09T07:45:27.917Z*
3954     -2852     -    483 +*Files processed: 4/4 | Errors: 0 | Generated: 2025-12-09T13:33:47.856Z*
3955     -2853     -2441 484  
3956     -    5833 +    3473 +*Files processed: 7/7 | Errors: 0 | Generated: 2025-12-09T13:44:06.124Z*
3957     -    5834 +2441 3474  
3958     -2854 5835  
3959     -2855 5836  ```
3960     -2856 5837  
3961     -@@ -3148,7 +6129,7 @@ AI_REVIEW.md                   | 2803 ++++++----------------------------------
3962     -3148 6129  **Type:** JavaScript Source File üü®
3963     -3149 6130  
3964     -3150 6131  ```diff
3965     -3151     -@@ -0,0 +1,150 @@
3966     -    6132 +@@ -0,0 +1,159 @@
3967     -3152 6133        1 +/**
3968     -3153 6134        2 + * HTMLService - HTML Export Service
3969     -3154 6135        3 + * Handles generation of standalone HTML files with embedded themes and necessary CDNs.
3970     -@@ -3171,135 +6152,144 @@ AI_REVIEW.md                   | 2803 ++++++----------------------------------
3971     -3171 6152       20 +<head>
3972     -3172 6153       21 +    <meta charset="UTF-8">
3973     -3173 6154       22 +    <title>Exported Markdown</title>
3974     -3174     -     23 +    <!-- Syntax Highlighting -->
3975     -3175     -     24 +    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
3976     -3176     -     25 +    <!-- Math Rendering (KaTeX) -->
3977     -3177     -     26 +    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
3978     -3178     -     27 +    <!-- Mermaid Styles (Basic) -->
3979     -3179     -     28 +    <style>
3980     -3180     -     29 +      .mermaid { display: flex; justify-content: center; margin: 1em 0; }
3981     -3181     -     30 +    </style>
3982     -3182     -     31 +    <style>
3983     -3183     -     32 +        body {
3984     -3184     -     33 +            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
3985     -3185     -     34 +            max-width: 800px;
3986     -3186     -     35 +            margin: 0 auto;
3987     -3187     -     36 +            padding: 40px 20px;
3988     -3188     -     37 +            line-height: 1.7;
3989     -3189     -     38 +        }
3990     -    6155 +     23 +    <!-- Math Rendering (KaTeX) -->
3991     -    6156 +     24 +    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
3992     -    6157 +     25 +    <!-- Mermaid Styles (Basic) -->
3993     -    6158 +     26 +    <style>
3994     -    6159 +     27 +      .mermaid { display: flex; justify-content: center; margin: 1em 0; }
3995     -    6160 +     28 +    </style>
3996     -    6161 +     29 +    <style>
3997     -    6162 +     30 +        body {
3998     -    6163 +     31 +            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
3999     -    6164 +     32 +            max-width: 800px;
4000     -    6165 +     33 +            margin: 0 auto;
4001     -    6166 +     34 +            padding: 40px 20px;
4002     -    6167 +     35 +            line-height: 1.7;
4003     -    6168 +     36 +        }
4004     -    6169 +     37 +
4005     -    6170 +     38 +        ${themeCSS}
4006     -3190 6171       39 +
4007     -3191     -     40 +        ${themeCSS}
4008     -3192     -     41 +
4009     -3193     -     42 +        body {
4010     -3194     -     43 +            background-color: var(--bg-primary);
4011     -3195     -     44 +            color: var(--text-primary);
4012     -3196     -     45 +        }
4013     -3197     -     46 +
4014     -3198     -     47 +        /* Base Typography */
4015     -3199     -     48 +        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
4016     -3200     -     49 +        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
4017     -3201     -     50 +        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
4018     -3202     -     51 +        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
4019     -3203     -     52 +        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
4020     -3204     -     53 +        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
4021     -3205     -     54 +
4022     -3206     -     55 +        a { color: var(--link-color); text-decoration: none; }
4023     -3207     -     56 +        a:hover { color: var(--link-hover); text-decoration: underline; }
4024     -3208     -     57 +
4025     -3209     -     58 +        strong { color: var(--bold-color); font-weight: 700; }
4026     -3210     -     59 +        em { color: var(--italic-color); font-style: italic; }
4027     -3211     -     60 +
4028     -3212     -     61 +        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
4029     -3213     -     62 +        pre { background-color: var(--code-block-bg); border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; }
4030     -3214     -     63 +        pre code { background-color: transparent; color: inherit; padding: 0; }
4031     -3215     -     64 +
4032     -3216     -     65 +        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
4033     -3217     -     66 +
4034     -3218     -     67 +        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
4035     -3219     -     68 +        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
4036     -3220     -     69 +        td { padding: 10px 12px; border: 1px solid var(--table-border); }
4037     -3221     -     70 +
4038     -3222     -     71 +        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
4039     -3223     -     72 +        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
4040     -    6172 +     40 +        body {
4041     -    6173 +     41 +            background-color: var(--bg-primary);
4042     -    6174 +     42 +            color: var(--text-primary);
4043     -    6175 +     43 +        }
4044     -    6176 +     44 +
4045     -    6177 +     45 +        /* Base Typography */
4046     -    6178 +     46 +        h1 { color: var(--h1-color); font-size: 2.5em; margin: 0.67em 0; border-bottom: 2px solid var(--h1-color); padding-bottom: 0.3em; }
4047     -    6179 +     47 +        h2 { color: var(--h2-color); font-size: 2em; margin: 0.75em 0 0.5em 0; }
4048     -    6180 +     48 +        h3 { color: var(--h3-color); font-size: 1.5em; margin: 0.83em 0; }
4049     -    6181 +     49 +        h4 { color: var(--h4-color); font-size: 1.25em; margin: 1em 0; }
4050     -    6182 +     50 +        h5 { color: var(--h5-color); font-size: 1em; margin: 1.33em 0; }
4051     -    6183 +     51 +        h6 { color: var(--h6-color); font-size: 0.875em; margin: 1.67em 0; }
4052     -    6184 +     52 +
4053     -    6185 +     53 +        a { color: var(--link-color); text-decoration: none; }
4054     -    6186 +     54 +        a:hover { color: var(--link-hover); text-decoration: underline; }
4055     -    6187 +     55 +
4056     -    6188 +     56 +        strong { color: var(--bold-color); font-weight: 700; }
4057     -    6189 +     57 +        em { color: var(--italic-color); font-style: italic; }
4058     -    6190 +     58 +
4059     -    6191 +     59 +        /* Code Blocks & Syntax Highlighting */
4060     -    6192 +     60 +        code { background-color: var(--code-bg); color: var(--code-text); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
4061     -    6193 +     61 +        pre { background-color: var(--code-block-bg) !important; border-radius: 8px; padding: 16px; overflow-x: auto; margin: 1.5em 0; border: 1px solid var(--code-border); }
4062     -    6194 +     62 +        pre code { background-color: transparent; color: inherit; padding: 0; }
4063     -    6195 +     63 +
4064     -    6196 +     64 +        /* Prism Tokens (Matching App Theme) */
4065     -    6197 +     65 +        .token.comment, .token.prolog, .token.cdata { color: var(--syntax-comment); font-style: italic; }
4066     -    6198 +     66 +        .token.punctuation { color: var(--syntax-punctuation); }
4067     -    6199 +     67 +        .token.class-name, .token.constant, .token.number, .token.boolean, .token.atrule { color: var(--syntax-number); font-weight: 600; }
4068     -    6200 +     68 +        .token.keyword { color: var(--syntax-keyword); font-weight: 700; }
4069     -    6201 +     69 +        .token.property, .token.tag, .token.symbol, .token.deleted { color: var(--syntax-property); font-weight: 600; }
4070     -    6202 +     70 +        .token.string, .token.char, .token.selector, .token.attr-name { color: var(--syntax-string); }
4071     -    6203 +     71 +        .token.function, .token.operator, .token.variable { color: var(--syntax-function); font-weight: 600; }
4072     -    6204 +     72 +        .token.url { color: var(--syntax-url); }
4073     -3224 6205       73 +
4074     -3225     -     74 +        /* Lists */
4075     -3226     -     75 +        ul, ol { padding-left: 2em; margin: 1em 0; }
4076     -3227     -     76 +        li { margin: 0.5em 0; }
4077     -3228     -     77 +    </style>
4078     -3229     -     78 +</head>
4079     -3230     -     79 +<body>
4080     -3231     -     80 +    ${contentHtml}
4081     -3232     -     81 +
4082     -3233     -     82 +    <footer style="margin-top: 40px; border-top: 1px solid var(--border-color); padding-top: 20px; text-align: center; color: var(--text-secondary); font-size: 0.85em;">
4083     -3234     -     83 +        <p style="margin: 0.5em 0;">Generated by <a href="https://prakharmnnit.github.io/markdown-viewer-app/" target="_blank" style="color: inherit; text-decoration: underline;">Markdown Viewer Pro</a></p>
4084     -3235     -     84 +        <p style="margin: 0.5em 0;">Made with ‚ù§Ô∏è by Prax Lannister | Follow me on <a href="https://github.com/PrakharMNNIT" target="_blank" style="color: var(--link-color); text-decoration: none;">GitHub</a> & <a href="https://x.com/ByteByByteSrSDE" target="_blank" style="color: var(--link-color); text-decoration: none;">X (Twitter)</a></p>
4085     -3236     -     85 +    </footer>
4086     -3237     -     86 +</body>
4087     -3238     -     87 +</html>`;
4088     -3239     -     88 +
4089     -3240     -     89 +    return new Blob([html], { type: 'text/html' });
4090     -3241     -     90 +  }
4091     -3242     -     91 +
4092     -3243     -     92 +  /**
4093     -3244     -     93 +   * Helper to retrieve CSS content
4094     -3245     -     94 +   * @private
4095     -3246     -     95 +   */
4096     -3247     -     96 +  async getThemeCSS(themeName, customTheme) {
4097     -3248     -     97 +    if (themeName === 'custom' && customTheme) {
4098     -3249     -     98 +      let css = ':root {\n';
4099     -3250     -     99 +      Object.entries(customTheme).forEach(([prop, val]) => {
4100     -3251     -    100 +        css += `    ${prop}: ${val};\n`;
4101     -3252     -    101 +      });
4102     -3253     -    102 +      css += '}';
4103     -3254     -    103 +      return css;
4104     -3255     -    104 +    }
4105     -3256     -    105 +    const baseUrl = import.meta.env.BASE_URL || '/';
4106     -3257     -    106 +    // Remove leading slash from baseUrl if present to avoid double slash with themes/
4107     -3258     -    107 +    // Actually relative fetch is best.
4108     -3259     -    108 +
4109     -3260     -    109 +    try {
4110     -3261     -    110 +      // Use relative path which works best with <base> or current location
4111     -3262     -    111 +      const response = await fetch(`themes/${themeName}.css`);
4112     -3263     -    112 +
4113     -3264     -    113 +      let finalResponse = response;
4114     -3265     -    114 +      if (!response.ok) {
4115     -3266     -    115 +        // Fallback to full path construction if relative failed
4116     -3267     -    116 +        const fullPath = `${baseUrl}themes/${themeName}.css`.replace('//', '/');
4117     -3268     -    117 +        finalResponse = await fetch(fullPath);
4118     -3269     -    118 +        if (!finalResponse.ok) throw new Error(`Theme load failed: ${finalResponse.status}`);
4119     -3270     -    119 +      }
4120     -3271     -    120 +
4121     -3272     -    121 +      let css = await finalResponse.text();
4122     -3273     -    122 +
4123     -3274     -    123 +      // Handle Vite Dev Server response (JS module instead of raw CSS)
4124     -3275     -    124 +      if (css.includes('const __vite__css = "')) {
4125     -3276     -    125 +        const match = css.match(/const __vite__css\s*=\s*"((?:[^"\\]|\\.)*)"/);
4126     -3277     -    126 +        if (match && match[1]) {
4127     -3278     -    127 +          try {
4128     -3279     -    128 +            // Parse JSON string to handle escapes (e.g. \n) correctly
4129     -3280     -    129 +            css = JSON.parse(`"${match[1]}"`);
4130     -3281     -    130 +          } catch (e) {
4131     -3282     -    131 +            console.warn('Failed to parse Vite CSS string', e);
4132     -3283     -    132 +          }
4133     -3284     -    133 +        }
4134     -3285     -    134 +      }
4135     -3286     -    135 +      return css;
4136     -3287     -    136 +    } catch (e) {
4137     -3288     -    137 +      console.error('Failed to load theme CSS', e);
4138     -3289     -    138 +      return '/* Theme Fetch Failed: ' + e.message + ' */';
4139     -3290     -    139 +    }
4140     -3291     -    140 +  }
4141     -3292     -    141 +
4142     -3293     -    142 +  downloadHTML(blob, filename = 'exported-markdown.html') {
4143     -3294     -    143 +    const url = URL.createObjectURL(blob);
4144     -3295     -    144 +    const a = document.createElement('a');
4145     -3296     -    145 +    a.href = url;
4146     -3297     -    146 +    a.download = filename;
4147     -3298     -    147 +    a.click();
4148     -3299     -    148 +    URL.revokeObjectURL(url);
4149     -    6206 +     74 +        blockquote { border-left: 4px solid var(--blockquote-border); background-color: var(--blockquote-bg); padding: 12px 20px; margin: 1.5em 0; font-style: italic; }
4150     -    6207 +     75 +
4151     -    6208 +     76 +        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
4152     -    6209 +     77 +        th { background-color: var(--table-header-bg); padding: 12px; text-align: left; border: 1px solid var(--table-border); font-weight: 600; }
4153     -    6210 +     78 +        td { padding: 10px 12px; border: 1px solid var(--table-border); }
4154     -    6211 +     79 +
4155     -    6212 +     80 +        hr { border: none; border-top: 2px solid var(--border-color); margin: 2em 0; }
4156     -    6213 +     81 +        img { max-width: 100%; height: auto; border-radius: 8px; margin: 1em 0; }
4157     -    6214 +     82 +
4158     -    6215 +     83 +        /* Lists */
4159     -    6216 +     84 +        ul, ol { padding-left: 2em; margin: 1em 0; }
4160     -    6217 +     85 +        li { margin: 0.5em 0; }
4161     -    6218 +     86 +    </style>
4162     -    6219 +     87 +</head>
4163     -    6220 +     88 +<body>
4164     -    6221 +     89 +    ${contentHtml}
4165     -    6222 +     90 +
4166     -    6223 +     91 +    <footer style="margin-top: 40px; border-top: 1px solid var(--border-color); padding-top: 20px; text-align: center; color: var(--text-secondary); font-size: 0.85em;">
4167     -    6224 +     92 +        <p style="margin: 0.5em 0;">Generated by <a href="https://prakharmnnit.github.io/markdown-viewer-app/" target="_blank" style="color: inherit; text-decoration: underline;">Markdown Viewer Pro</a></p>
4168     -    6225 +     93 +        <p style="margin: 0.5em 0;">Made with ‚ù§Ô∏è by Prax Lannister | Follow me on <a href="https://github.com/PrakharMNNIT" target="_blank" style="color: var(--link-color); text-decoration: none;">GitHub</a> & <a href="https://x.com/ByteByByteSrSDE" target="_blank" style="color: var(--link-color); text-decoration: none;">X (Twitter)</a></p>
4169     -    6226 +     94 +    </footer>
4170     -    6227 +     95 +</body>
4171     -    6228 +     96 +</html>`;
4172     -    6229 +     97 +
4173     -    6230 +     98 +    return new Blob([html], { type: 'text/html' });
4174     -    6231 +     99 +  }
4175     -    6232 +    100 +
4176     -    6233 +    101 +  /**
4177     -    6234 +    102 +   * Helper to retrieve CSS content
4178     -    6235 +    103 +   * @private
4179     -    6236 +    104 +   */
4180     -    6237 +    105 +  async getThemeCSS(themeName, customTheme) {
4181     -    6238 +    106 +    if (themeName === 'custom' && customTheme) {
4182     -    6239 +    107 +      let css = ':root {\n';
4183     -    6240 +    108 +      Object.entries(customTheme).forEach(([prop, val]) => {
4184     -    6241 +    109 +        css += `    ${prop}: ${val};\n`;
4185     -    6242 +    110 +      });
4186     -    6243 +    111 +      css += '}';
4187     -    6244 +    112 +      return css;
4188     -    6245 +    113 +    }
4189     -    6246 +    114 +    const baseUrl = import.meta.env.BASE_URL || '/';
4190     -    6247 +    115 +    // Remove leading slash from baseUrl if present to avoid double slash with themes/
4191     -    6248 +    116 +    // Actually relative fetch is best.
4192     -    6249 +    117 +
4193     -    6250 +    118 +    try {
4194     -    6251 +    119 +      // Use relative path which works best with <base> or current location
4195     -    6252 +    120 +      const response = await fetch(`themes/${themeName}.css`);
4196     -    6253 +    121 +
4197     -    6254 +    122 +      let finalResponse = response;
4198     -    6255 +    123 +      if (!response.ok) {
4199     -    6256 +    124 +        // Fallback to full path construction if relative failed
4200     -    6257 +    125 +        const fullPath = `${baseUrl}themes/${themeName}.css`.replace('//', '/');
4201     -    6258 +    126 +        finalResponse = await fetch(fullPath);
4202     -    6259 +    127 +        if (!finalResponse.ok) throw new Error(`Theme load failed: ${finalResponse.status}`);
4203     -    6260 +    128 +      }
4204     -    6261 +    129 +
4205     -    6262 +    130 +      let css = await finalResponse.text();
4206     -    6263 +    131 +
4207     -    6264 +    132 +      // Handle Vite Dev Server response (JS module instead of raw CSS)
4208     -    6265 +    133 +      if (css.includes('const __vite__css = "')) {
4209     -    6266 +    134 +        const match = css.match(/const __vite__css\s*=\s*"((?:[^"\\]|\\.)*)"/);
4210     -    6267 +    135 +        if (match && match[1]) {
4211     -    6268 +    136 +          try {
4212     -    6269 +    137 +            // Parse JSON string to handle escapes (e.g. \n) correctly
4213     -    6270 +    138 +            css = JSON.parse(`"${match[1]}"`);
4214     -    6271 +    139 +          } catch (e) {
4215     -    6272 +    140 +            console.warn('Failed to parse Vite CSS string', e);
4216     -    6273 +    141 +          }
4217     -    6274 +    142 +        }
4218     -    6275 +    143 +      }
4219     -    6276 +    144 +      return css;
4220     -    6277 +    145 +    } catch (e) {
4221     -    6278 +    146 +      console.error('Failed to load theme CSS', e);
4222     -    6279 +    147 +      return '/* Theme Fetch Failed: ' + e.message + ' */';
4223     -    6280 +    148 +    }
4224     -3300 6281      149 +  }
4225     -3301     -    150 +}
4226     -3302     -    151  
4227     -    6282 +    150 +
4228     -    6283 +    151 +  downloadHTML(blob, filename = 'exported-markdown.html') {
4229     -    6284 +    152 +    const url = URL.createObjectURL(blob);
4230     -    6285 +    153 +    const a = document.createElement('a');
4231     -    6286 +    154 +    a.href = url;
4232     -    6287 +    155 +    a.download = filename;
4233     -    6288 +    156 +    a.click();
4234     -    6289 +    157 +    URL.revokeObjectURL(url);
4235     -    6290 +    158 +  }
4236     -    6291 +    159 +}
4237     -    6292 +    160  
4238     -3303 6293  
4239     -3304 6294  ```
4240     -3305 6295  
4241     -@@ -3309,49 +6299,139 @@ AI_REVIEW.md                   | 2803 ++++++----------------------------------
4242     -3309 6299  **Type:** JavaScript Source File üü®
4243     -3310 6300  
4244     -3311 6301  ```diff
4245     -3312     -@@ -122,6 +122,24 @@ export class PDFService {
4246     -3313     -122 122        .trim();
4247     -3314     -123 123  
4248     -3315     -124 124      container.appendChild(element);
4249     -3316     -    125 +
4250     -3317     -    126 +    // Add Footer
4251     -3318     -    127 +    const footer = document.createElement('div');
4252     -3319     -    128 +    footer.style.marginTop = '40px';
4253     -3320     -    129 +    const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim();
4254     -3321     -    130 +    const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim();
4255     -3322     -    131 +
4256     -3323     -    132 +    footer.style.borderTop = `1px solid ${borderColor}`;
4257     -3324     -    133 +    footer.style.paddingTop = '20px';
4258     -3325     -    134 +    footer.style.textAlign = 'center';
4259     -3326     -    135 +    footer.style.color = textColor;
4260     -3327     -    136 +    footer.style.fontSize = '0.85em';
4261     -3328     -    137 +    footer.innerHTML = `
4262     -3329     -    138 +        <p style="margin: 5px 0;">Generated by <a href="https://prakharmnnit.github.io/markdown-viewer-app/" style="color: #0969da; text-decoration: underline;">Markdown Viewer Pro</a></p>
4263     -3330     -    139 +        <p style="margin: 5px 0;">Made with ‚ù§Ô∏è by Prax Lannister | Follow me on <a href="https://github.com/PrakharMNNIT" style="color: #0969da;">GitHub</a> & <a href="https://x.com/ByteByByteSrSDE" style="color: #0969da;">X (Twitter)</a></p>
4264     -3331     -    140 +    `;
4265     -3332     -    141 +    container.appendChild(footer);
4266     -3333     -    142 +
4267     -3334     -125 143      return container;
4268     -3335     -126 144    }
4269     -3336     -127 145  
4270     -3337     -@@ -135,7 +153,15 @@ export class PDFService {
4271     -3338     -135 153    buildHtml2PdfConfig(config) {
4272     -3339     -136 154      const pageSize = config.pageSize || 'A4';
4273     -3340     -137 155      const orientation = config.orientation || PDF_CONFIG.ORIENTATIONS.PORTRAIT;
4274     -    6302 +@@ -98,30 +98,60 @@ export class PDFService {
4275     -    6303 + 98  98     * @returns {HTMLElement} Prepared container element
4276     -    6304 + 99  99     * @private
4277     -    6305 +100 100     */
4278     -    6306 +101     -  prepareContent(content, config) {
4279     -    6307 +102     -    // Clone content
4280     -    6308 +103     -    const element = content.cloneNode(true);
4281     -    6309 +104     -
4282     -    6310 +105     -    // Create container with theme styles
4283     -    6311 +    101 +  prepareContent(content, config, themeName, customTheme, margins = [0.5, 0.5, 0.5, 0.5]) {
4284     -    6312 +106 102      const container = document.createElement('div');
4285     -    6313 +107     -    container.className = 'html2pdf__container pdf-export-mode';
4286     -    6314 +108     -    container.style.fontFamily =
4287     -    6315 +    103 +    container.className = 'pdf-export-mode'; // Add class for specific overrides
4288     -    6316 +    104 +
4289     -    6317 +    105 +    // Apply margins as padding to ensure background covers the entire page
4290     -    6318 +    106 +    // (html2canvas captures the element including padding)
4291     -    6319 +    107 +    container.style.padding = `${margins[0]}in ${margins[1]}in ${margins[2]}in ${margins[3]}in`;
4292     -    6320 +    108 +    container.style.boxSizing = 'border-box';
4293     -    6321 +    109 +
4294     -    6322 +    110 +    // Create a wrapper for the actual content to apply internal styles
4295     -    6323 +    111 +    const contentWrapper = document.createElement('div');
4296     -    6324 +    112 +    contentWrapper.style.fontFamily =
4297     -    6325 +109 113        '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif';
4298     -    6326 +110     -    container.style.maxWidth = '800px';
4299     -    6327 +111     -    container.style.margin = '0 auto';
4300     -    6328 +112     -    container.style.padding = '40px 20px';
4301     -    6329 +113     -    container.style.lineHeight = '1.7';
4302     -    6330 +114     -    container.style.fontSize = `${config.fontSize || PDF_CONFIG.FONT_SIZES.DEFAULT}pt`;
4303     -    6331 +    114 +    contentWrapper.style.maxWidth = '800px';
4304     -    6332 +    115 +    contentWrapper.style.margin = '0 auto';
4305     -    6333 +    116 +    contentWrapper.style.lineHeight = '1.7';
4306     -    6334 +    117 +    contentWrapper.style.fontSize = `${config.fontSize || PDF_CONFIG.FONT_SIZES.DEFAULT}pt`;
4307     -    6335 +115 118  
4308     -    6336 +116 119      // Apply current theme colors
4309     -    6337 +117     -    container.style.backgroundColor = getComputedStyle(document.documentElement)
4310     -    6338 +    120 +    contentWrapper.style.backgroundColor = getComputedStyle(document.documentElement)
4311     -    6339 +118 121        .getPropertyValue('--bg-primary')
4312     -    6340 +119 122        .trim();
4313     -    6341 +120     -    container.style.color = getComputedStyle(document.documentElement)
4314     -    6342 +    123 +    contentWrapper.style.color = getComputedStyle(document.documentElement)
4315     -    6343 +121 124        .getPropertyValue('--text-primary')
4316     -    6344 +122 125        .trim();
4317     -    6345 +123 126  
4318     -    6346 +124     -    container.appendChild(element);
4319     -    6347 +    127 +    // Handle content as either a Node or a string
4320     -    6348 +    128 +    if (typeof content === 'string') {
4321     -    6349 +    129 +      contentWrapper.innerHTML = content;
4322     -    6350 +    130 +    } else if (content instanceof Node) {
4323     -    6351 +    131 +      contentWrapper.appendChild(content.cloneNode(true));
4324     -    6352 +    132 +    } else {
4325     -    6353 +    133 +      console.warn('Invalid content type for PDF generation. Expected HTMLElement or string.');
4326     -    6354 +    134 +    }
4327     -    6355 +    135 +
4328     -    6356 +    136 +    container.appendChild(contentWrapper);
4329     -    6357 +    137 +
4330     -    6358 +    138 +    // Add Footer
4331     -    6359 +    139 +    const footer = document.createElement('div');
4332     -    6360 +    140 +    footer.style.marginTop = '40px';
4333     -    6361 +    141 +    const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim();
4334     -    6362 +    142 +    const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim();
4335     -    6363 +    143 +
4336     -    6364 +    144 +    footer.style.borderTop = `1px solid ${borderColor}`;
4337     -    6365 +    145 +    footer.style.paddingTop = '20px';
4338     -    6366 +    146 +    footer.style.textAlign = 'center';
4339     -    6367 +    147 +    footer.style.color = textColor;
4340     -    6368 +    148 +    footer.style.fontSize = '0.85em';
4341     -    6369 +    149 +    footer.innerHTML = `
4342     -    6370 +    150 +        <p style="margin: 5px 0;">Generated by <a href="https://prakharmnnit.github.io/markdown-viewer-app/" style="color: #0969da; text-decoration: underline;">Markdown Viewer Pro</a></p>
4343     -    6371 +    151 +        <p style="margin: 5px 0;">Made with ‚ù§Ô∏è by Prax Lannister | Follow me on <a href="https://github.com/PrakharMNNIT" style="color: #0969da;">GitHub</a> & <a href="https://x.com/ByteByByteSrSDE" style="color: #0969da;">X (Twitter)</a></p>
4344     -    6372 +    152 +    `;
4345     -    6373 +    153 +    container.appendChild(footer);
4346     -    6374 +    154 +
4347     -    6375 +125 155      return container;
4348     -    6376 +126 156    }
4349     -    6377 +127 157  
4350     -    6378 +@@ -135,10 +165,13 @@ export class PDFService {
4351     -    6379 +135 165    buildHtml2PdfConfig(config) {
4352     -    6380 +136 166      const pageSize = config.pageSize || 'A4';
4353     -    6381 +137 167      const orientation = config.orientation || PDF_CONFIG.ORIENTATIONS.PORTRAIT;
4354     -3341 6382  138     -    const margins = config.margins || PDF_CONFIG.DEFAULT_MARGINS;
4355     -3342     -    156 +
4356     -3343     -    157 +    // Ensure margins are numbers and safe
4357     -3344     -    158 +    let margins = config.margins || PDF_CONFIG.DEFAULT_MARGINS;
4358     -3345     -    159 +    if (Array.isArray(margins)) {
4359     -3346     -    160 +      margins = margins.map(m => {
4360     -3347     -    161 +        const val = parseFloat(m);
4361     -3348     -    162 +        return isFinite(val) ? val : 0.5; // Default to 0.5in if invalid
4362     -3349     -    163 +      });
4363     -3350     -    164 +    }
4364     -3351     -139 165  
4365     -3352     -140 166      return {
4366     -3353     -141 167        margin: margins,
4367     -3354     -142 168  
4368     -    6383 +    168 +
4369     -    6384 +    169 +    // Ensure margins are numbers and safe
4370     -    6385 +    170 +    // But we use 0 margin for html2pdf ensuring full background coverage
4371     -    6386 +    171 +    // Margins are handled via padding in prepareContent
4372     -    6387 +139 172  
4373     -    6388 +140 173      return {
4374     -    6389 +141     -      margin: margins,
4375     -    6390 +    174 +      margin: 0, // Zero margin for full bleed background
4376     -    6391 +142 175        filename: config.filename || 'markdown-export.pdf',
4377     -    6392 +143 176        image: { type: 'jpeg', quality: 0.98 },
4378     -    6393 +144 177        html2canvas: {
4379     -    6394 +@@ -161,7 +194,7 @@ export class PDFService {
4380     -    6395 +161 194    /**
4381     -    6396 +162 195     * Generate PDF and return as blob
4382     -    6397 +163 196     *
4383     -    6398 +164     -   * @param {HTMLElement} content - Content to export
4384     -    6399 +    197 +   * @param {HTMLElement} contentElement - Content element to export
4385     -    6400 +165 198     * @param {Object} config - PDF configuration
4386     -    6401 +166 199     * @returns {Promise<Blob>} PDF blob
4387     -    6402 +167 200     * @throws {Error} If html2pdf not loaded or generation fails
4388     -    6403 +@@ -169,7 +202,7 @@ export class PDFService {
4389     -    6404 +169 202     * @example
4390     -    6405 +170 203     * const blob = await pdfService.generatePDF(previewElement, config);
4391     -    6406 +171 204     */
4392     -    6407 +172     -  async generatePDF(content, config = {}) {
4393     -    6408 +    205 +  async generatePDF(contentElement, config = {}) {
4394     -    6409 +173 206      if (!this.isReady()) {
4395     -    6410 +174 207        throw new Error('html2pdf library not loaded');
4396     -    6411 +175 208      }
4397     -    6412 +@@ -181,8 +214,19 @@ export class PDFService {
4398     -    6413 +181 214      }
4399     -    6414 +182 215  
4400     -    6415 +183 216      try {
4401     -    6416 +184     -      // Prepare content with configuration
4402     -    6417 +185     -      const container = this.prepareContent(content, mergedConfig);
4403     -    6418 +    217 +      // Sanitize margins for internal use (Padding)
4404     -    6419 +    218 +      let margins = mergedConfig.margins || PDF_CONFIG.DEFAULT_MARGINS;
4405     -    6420 +    219 +      if (Array.isArray(margins)) {
4406     -    6421 +    220 +        margins = margins.map(m => {
4407     -    6422 +    221 +          const val = parseFloat(m);
4408     -    6423 +    222 +          return isFinite(val) ? val : 0.5; // Default to 0.5 if invalid
4409     -    6424 +    223 +        });
4410     -    6425 +    224 +      } else {
4411     -    6426 +    225 +        margins = PDF_CONFIG.DEFAULT_MARGINS; // Fallback if margins is not an array
4412     -    6427 +    226 +      }
4413     -    6428 +    227 +
4414     -    6429 +    228 +      // Prepare content with isolated styles and margins as padding
4415     -    6430 +    229 +      const container = this.prepareContent(contentElement, mergedConfig, mergedConfig.themeName, mergedConfig.customTheme, margins);
4416     -    6431 +186 230  
4417     -    6432 +187 231        // Build html2pdf config
4418     -    6433 +188 232        const pdfConfig = this.buildHtml2PdfConfig(mergedConfig);
4419     -    6434 +189 233  
4420     -3355 6435  
4421     -3356 6436  ```
4422     -3357 6437  
4423     -@@ -3470,4 +6550,4 @@ Please provide specific feedback on:
4424     -3470 6550  
4425     -3471 6551  ---
4426     -3472 6552  *Generated by AI Visual Code Review v2.0 - Unified Export Script*
4427     -3473     -*Files processed: 7/7 | Errors: 0 | Generated: 2025-12-09T13:44:06.124Z*
4428     -    6553 +*Files processed: 7/7 | Errors: 0 | Generated: 2025-12-09T13:55:42.483Z*
4429     -3474 6554  
4430     -
4431     -```
4432     -
4433     -
4434     -### ‚ú® `animations.css` **[ADDED]**
     16 +### ‚ú® `tests/unit/config/errorMessages.test.js` **[ADDED]**
4435  17  
4436  18  **Status:** ‚úÖ **NEW FILE** - This file has been newly created
4437  19  
4438     -**Type:** Stylesheet üé®
4439     -
4440     -```diff
4441     -@@ -0,0 +1,59 @@
4442     -      1 +/* ==================== NEBULA ANIMATIONS ==================== */
4443     -      2 +
4444     -      3 +/* Keyframes */
4445     -      4 +@keyframes nebula-fade-in {
4446     -      5 +  from { opacity: 0; transform: translateY(10px); }
4447     -      6 +  to { opacity: 1; transform: translateY(0); }
4448     -      7 +}
4449     -      8 +
4450     -      9 +@keyframes nebula-float {
4451     -     10 +  0% { transform: translateY(0px); }
4452     -     11 +  50% { transform: translateY(-6px); }
4453     -     12 +  100% { transform: translateY(0px); }
4454     -     13 +}
4455     -     14 +
4456     -     15 +@keyframes nebula-pulse-glow {
4457     -     16 +  0% { box-shadow: 0 0 5px var(--accent-glow); }
4458     -     17 +  50% { box-shadow: 0 0 20px var(--accent-glow), 0 0 10px var(--accent-cyan); }
4459     -     18 +  100% { box-shadow: 0 0 5px var(--accent-glow); }
4460     -     19 +}
4461     -     20 +
4462     -     21 +@keyframes nebula-bg-drift {
4463     -     22 +  0% { background-position: 0% 50%; }
4464     -     23 +  50% { background-position: 100% 50%; }
4465     -     24 +  100% { background-position: 0% 50%; }
4466     -     25 +}
4467     -     26 +
4468     -     27 +@keyframes hologram-scan {
4469     -     28 +    0% { top: -100%; opacity: 0; }
4470     -     29 +    50% { opacity: 0.5; }
4471     -     30 +    100% { top: 100%; opacity: 0; }
4472     -     31 +}
4473     -     32 +
4474     -     33 +/* Transitions */
4475     -     34 +.animate-fast { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
4476     -     35 +.animate-smooth { transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
4477     -     36 +
4478     -     37 +/* Utility Classes */
4479     -     38 +.fade-in-up {
4480     -     39 +  animation: nebula-fade-in 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
4481     -     40 +}
4482     -     41 +
4483     -     42 +.hover-lift {
4484     -     43 +  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
4485     -     44 +}
4486     -     45 +.hover-lift:hover {
4487     -     46 +  transform: translateY(-4px);
4488     -     47 +}
4489     -     48 +
4490     -     49 +.hover-glow {
4491     -     50 +  transition: box-shadow 0.3s ease;
4492     -     51 +}
4493     -     52 +.hover-glow:hover {
4494     -     53 +  animation: nebula-pulse-glow 2s infinite;
4495     -     54 +}
4496     -     55 +
4497     -     56 +/* Stagger delays for list items */
4498     -     57 +.stagger-1 { animation-delay: 0.1s; }
4499     -     58 +.stagger-2 { animation-delay: 0.2s; }
4500     -     59 +.stagger-3 { animation-delay: 0.3s; }
4501     -     60  
4502     -
4503     -```
4504     -
4505     -
4506     -### üìÑ `index.html`
4507     -
4508     -**Type:** HTML Template üåê
4509     -
4510     -```diff
4511     -@@ -6,6 +6,9 @@
4512     -  6   6      <title>Markdown Viewer Pro</title>
4513     -  7   7  
4514     -  8   8      <!-- Main Styles -->
4515     -      9 +    <link rel="stylesheet" href="variables.css" />
4516     -     10 +    <link rel="stylesheet" href="animations.css" />
4517     -     11 +    <link rel="stylesheet" href="themes/nebula-elements.css" />
4518     -  9  12      <link rel="stylesheet" href="style.css" />
4519     - 10  13  
4520     - 11  14      <!-- Theme Stylesheet (dynamically loaded) -->
4521     -@@ -126,6 +129,8 @@
4522     -126 129  
4523     -127 130            <select id="theme-selector" class="btn">
4524     -128 131              <optgroup label="Default">
4525     -    132 +              <option value="nebula-dark">üåå Nebula Dark (Premium)</option>
4526     -    133 +              <option value="nebula-light">‚ùÑÔ∏è Nebula Light (Premium)</option>
4527     -129 134                <option value="default-light" selected>Default Light</option>
4528     -130 135                <option value="default-dark">Default Dark</option>
4529     -131 136              </optgroup>
4530     -@@ -156,9 +161,25 @@
4531     -156 161            <button class="btn" id="customize-btn">üé® Customize Colors</button>
4532     -157 162            <button class="btn" id="export-html-btn">üíæ Export HTML</button>
4533     -158 163            <button class="btn" id="export-pdf-btn">üìï Export PDF</button>
4534     -    164 +          <button
4535     -    165 +                 class="btn-icon"
4536     -    166 +                 id="zen-mode-btn"
4537     -    167 +                 title="Enter Zen Mode"
4538     -    168 +                 aria-label="Enter Distraction Free Mode"
4539     -    169 +                 style="margin-left: 8px;"
4540     -    170 +               >
4541     -    171 +                 <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
4542     -    172 +                   <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
4543     -    173 +                 </svg>
4544     -    174 +               </button>
4545     -159 175          </div>
4546     -160 176        </div>
4547     -161 177  
4548     -    178 +      <!-- Exit Zen Mode Button (Fixed) -->
4549     -    179 +      <button id="exit-zen-btn" class="btn floating-exit-btn" title="Exit Zen Mode">
4550     -    180 +        Exit Zen Mode
4551     -    181 +      </button>
4552     -    182 +
4553     -162 183        <!-- Main Content -->
4554     -163 184        <div class="main-content">
4555     -164 185          <!-- Floating show sidebar button (visible when sidebar is hidden) -->
4556     -165 186  
4557     -
4558     -```
4559     -
4560     -
4561     -### üìÑ `script.js`
4562     -
4563  20  **Type:** JavaScript Source File üü®
4564  21  
4565  22  ```diff
4566     -@@ -1109,6 +1109,37 @@ graph TD
4567     -1109 1109    const fileBrowser = document.getElementById('file-browser');
4568     -1110 1110    const openFolderBtn = document.getElementById('open-folder-btn');
4569     -1111 1111    const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn'); // Toolbar button
4570     -    1112 +
4571     -    1113 +  // Zen Mode Functionality
4572     -    1114 +  const zenModeBtn = document.getElementById('zen-mode-btn');
4573     -    1115 +  const exitZenBtn = document.getElementById('exit-zen-btn');
4574     -    1116 +
4575     -    1117 +  function toggleZenMode() {
4576     -    1118 +    document.body.classList.toggle('zen-mode');
4577     -    1119 +
4578     -    1120 +    // Auto-resize editor in Zen mode
4579     -    1121 +    if (document.body.classList.contains('zen-mode')) {
4580     -    1122 +      // Force refresh editor layout if needed
4581     -    1123 +      if (typeof editor.refresh === 'function') {
4582     -    1124 +        editor.refresh();
4583     -    1125 +      }
4584     -    1126 +    }
4585     -    1127 +  }
4586     -    1128 +
4587     -    1129 +  if (zenModeBtn) {
4588     -    1130 +    zenModeBtn.addEventListener('click', toggleZenMode);
4589     -    1131 +  }
4590     -    1132 +
4591     -    1133 +  if (exitZenBtn) {
4592     -    1134 +    exitZenBtn.addEventListener('click', toggleZenMode);
4593     -    1135 +  }
4594     -    1136 +
4595     -    1137 +  // Escape key to exit Zen Mode
4596     -    1138 +  document.addEventListener('keydown', (e) => {
4597     -    1139 +    if (e.key === 'Escape' && document.body.classList.contains('zen-mode')) {
4598     -    1140 +      toggleZenMode();
4599     -    1141 +    }
4600     -    1142 +  });
4601     -1112 1143    const toggleSidebarBtn = document.getElementById('toggle-sidebar-btn'); // Sidebar header button
4602     -1113 1144    const resizeHandle = document.getElementById('resize-handle');
4603     -1114 1145    const fileTree = document.getElementById('file-tree');
4604     -1115 1146  
4605     -
4606     -```
4607     -
4608     -
4609     -### üìÑ `src/js/config/constants.js`
4610     -
4611     -**Type:** JavaScript Source File üü®
4612     -
4613     -```diff
4614     -@@ -39,6 +39,8 @@ export const STORAGE_KEYS = {
4615     - 39  39  
4616     - 40  40  // Theme Names
4617     - 41  41  export const THEMES = {
4618     -     42 +  NEBULA_DARK: 'nebula-dark',
4619     -     43 +  NEBULA_LIGHT: 'nebula-light',
4620     - 42  44    DEFAULT_LIGHT: 'default-light',
4621     - 43  45    DEFAULT_DARK: 'default-dark',
4622     - 44  46    OCEAN_LIGHT: 'ocean-light',
4623     - 45  47  
4624     -
4625     -```
4626     -
4627     -
4628     -### üìÑ `src/js/services/HTMLService.js`
4629     -
4630     -**Type:** JavaScript Source File üü®
4631     -
4632     -```diff
4633     -@@ -116,38 +116,79 @@ export class HTMLService {
4634     -116 116      // Actually relative fetch is best.
4635     -117 117  
4636     -118 118      try {
4637     -119     -      // Use relative path which works best with <base> or current location
4638     -120     -      const response = await fetch(`themes/${themeName}.css`);
4639     -    119 +      // Fetch both the specific theme and the global variables which define the tokens
4640     -    120 +      const requestPromises = [
4641     -    121 +        fetch(`${baseUrl}themes/${themeName}.css`),
4642     -    122 +        fetch(`${baseUrl}variables.css`)
4643     -    123 +      ];
4644     -121 124  
4645     -122     -      let finalResponse = response;
4646     -123     -      if (!response.ok) {
4647     -124     -        // Fallback to full path construction if relative failed
4648     -125     -        const fullPath = `${baseUrl}themes/${themeName}.css`.replace('//', '/');
4649     -126     -        finalResponse = await fetch(fullPath);
4650     -127     -        if (!finalResponse.ok) throw new Error(`Theme load failed: ${finalResponse.status}`);
4651     -    125 +      // If Nebula theme, also fetch the micro-elements styles
4652     -    126 +      if (themeName.startsWith('nebula-')) {
4653     -    127 +        requestPromises.push(fetch(`${baseUrl}themes/nebula-elements.css`));
4654     -128 128        }
4655     -129 129  
4656     -130     -      let css = await finalResponse.text();
4657     -    130 +      const responses = await Promise.all(requestPromises);
4658     -    131 +      const themeRes = responses[0];
4659     -    132 +      const variablesRes = responses[1];
4660     -    133 +      const nebulaElementsRes = responses[2]; // Undefined if not nebula
4661     -131 134  
4662     -132     -      // Handle Vite Dev Server response (JS module instead of raw CSS)
4663     -133     -      if (css.includes('const __vite__css = "')) {
4664     -134     -        const match = css.match(/const __vite__css\s*=\s*"((?:[^"\\]|\\.)*)"/);
4665     -135     -        if (match && match[1]) {
4666     -136     -          try {
4667     -137     -            // Parse JSON string to handle escapes (e.g. \n) correctly
4668     -138     -            css = JSON.parse(`"${match[1]}"`);
4669     -139     -          } catch (e) {
4670     -140     -            console.warn('Failed to parse Vite CSS string', e);
4671     -141     -          }
4672     -142     -        }
4673     -    135 +      if (!themeRes.ok) throw new Error(`Failed to load theme: ${themeRes.statusText}`);
4674     -    136 +
4675     -    137 +      let cssContent = '';
4676     -    138 +
4677     -    139 +      // Process variables.css
4678     -    140 +      if (variablesRes.ok) {
4679     -    141 +        const variablesText = await variablesRes.text();
4680     -    142 +        cssContent += this.extractCSS(variablesText, baseUrl) + '\n';
4681     -    143 +      } else {
4682     -    144 +        console.warn('variables.css could not be loaded for export');
4683     -143 145        }
4684     -144     -      return css;
4685     -145     -    } catch (e) {
4686     -146     -      console.error('Failed to load theme CSS', e);
4687     -147     -      return '/* Theme Fetch Failed: ' + e.message + ' */';
4688     -    146 +
4689     -    147 +      // Process Nebula Elements if present
4690     -    148 +      if (nebulaElementsRes && nebulaElementsRes.ok) {
4691     -    149 +        const nebulaText = await nebulaElementsRes.text();
4692     -    150 +        cssContent += this.extractCSS(nebulaText, baseUrl) + '\n';
4693     -    151 +      }
4694     -    152 +
4695     -    153 +      // Process Theme CSS
4696     -    154 +      const themeText = await themeRes.text();
4697     -    155 +      cssContent += this.extractCSS(themeText, baseUrl);
4698     -    156 +
4699     -    157 +      return cssContent;
4700     -    158 +    } catch (error) {
4701     -    159 +      console.warn('Error loading theme CSS:', error);
4702     -    160 +      // Fallback: minimal styling
4703     -    161 +      return `
4704     -    162 +        body { background-color: #fff; color: #333; }
4705     -    163 +        code { background-color: #f5f5f5; }
4706     -    164 +        pre { background-color: #f5f5f5; border: 1px solid #ddd; }
4707     -    165 +        blockquote { border-left: 4px solid #ddd; color: #666; }
4708     -    166 +        table { border: 1px solid #ddd; }
4709     -    167 +        th, td { border: 1px solid #ddd; }
4710     -    168 +      `;
4711     -148 169      }
4712     -149 170    }
4713     -150 171  
4714     -    172 +  /**
4715     -    173 +   * Helper to extract CSS from potential Vite module wrapper or raw text
4716     -    174 +   */
4717     -    175 +  extractCSS(text, baseUrl) {
4718     -    176 +    // Vite dev server serves CSS files as JS modules (import ...)
4719     -    177 +    // We need to extract the actual CSS string.
4720     -    178 +    // Typical format: "import ... \n const css = \"...\" ... export default css"
4721     -    179 +    // OR direct CSS in production build.
4722     -    180 +
4723     -    181 +    // Simple check for Vite JS module wrapper
4724     -    182 +    if (text.includes('export default') || text.includes('const css =')) {
4725     -    183 +      const match = text.match(/const\s+css\s*=\s*"([\s\S]*?)"/);
4726     -    184 +      if (match && match[1]) {
4727     -    185 +        // Unescape styling (newlines, etc)
4728     -    186 +        return match[1].replace(/\\n/g, '\n').replace(/\\"/g, '"');
4729     -    187 +      }
4730     -    188 +    }
4731     -    189 +    return text;
4732     -    190 +  }
4733     -    191 +
4734     -151 192    downloadHTML(blob, filename = 'exported-markdown.html') {
4735     -152 193      const url = URL.createObjectURL(blob);
4736     -153 194      const a = document.createElement('a');
4737     -154 195  
4738     -
4739     -```
4740     -
4741     -
4742     -### üìÑ `style.css`
4743     -
4744     -**Type:** Stylesheet üé®
4745     -
4746     -```diff
4747     -@@ -484,42 +484,44 @@ body {
4748     -484 484    margin: 1em 0;
4749     -485 485  }
4750     -486 486  
4751     -487     -/* ==================== MODAL ==================== */
4752     -    487 +/* ==================== MODAL STYLES ==================== */
4753     -488 488  .modal {
4754     -489 489    display: none;
4755     -490 490    position: fixed;
4756     -491     -  top: 0;
4757     -    491 +  z-index: 1000;
4758     -492 492    left: 0;
4759     -    493 +  top: 0;
4760     -493 494    width: 100%;
4761     -494 495    height: 100%;
4762     -    496 +  overflow: auto;
4763     -495 497    background-color: rgba(0, 0, 0, 0.5);
4764     -496     -  z-index: 1000;
4765     -497     -  align-items: center;
4766     -498     -  justify-content: center;
4767     -    498 +  backdrop-filter: blur(4px);
4768     -    499 +  opacity: 0;
4769     -    500 +  transition: opacity 0.3s ease;
4770     -499 501  }
4771     -500 502  
4772     -501     -.modal.active {
4773     -502     -  display: flex;
4774     -    503 +.modal.show {
4775     -    504 +  display: block;
4776     -    505 +  opacity: 1;
4777     -503 506  }
4778     -504 507  
4779     -505 508  .modal-content {
4780     -    509 +  /* Generic Base Styles */
4781     -506 510    background-color: var(--bg-primary);
4782     -507     -  backdrop-filter: blur(16px);
4783     -508     -  -webkit-backdrop-filter: blur(16px);
4784     -509     -  border-radius: 16px;
4785     -510     -  padding: 30px;
4786     -511     -  max-width: 800px;
4787     -512     -  max-height: 80vh;
4788     -513     -  overflow-y: auto;
4789     -514     -  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
4790     -515     -  width: 90%;
4791     -    511 +  margin: 10% auto;
4792     -    512 +  padding: 32px;
4793     -516 513    border: 1px solid var(--border-color);
4794     -517     -  animation: modalSlideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
4795     -    514 +  border-radius: var(--radius-lg, 12px);
4796     -    515 +  width: 90%;
4797     -    516 +  max-width: 600px;
4798     -    517 +  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
4799     -    518 +  position: relative;
4800     -    519 +  transform: translateY(20px);
4801     -    520 +  transition: transform 0.3s ease;
4802     -518 521  }
4803     -519 522  
4804     -520     -@keyframes modalSlideIn {
4805     -521     -  from { opacity: 0; transform: translateY(20px) scale(0.95); }
4806     -522     -  to { opacity: 1; transform: translateY(0) scale(1); }
4807     -    523 +.modal.show .modal-content {
4808     -    524 +  transform: translateY(0);
4809     -523 525  }
4810     -524 526  
4811     -525 527  @keyframes fadeIn {
4812     -@@ -527,30 +529,14 @@ body {
4813     -527 529    to { opacity: 1; }
4814     -528 530  }
4815     -529 531  
4816     -530     -.modal-header {
4817     -531     -  display: flex;
4818     -532     -  justify-content: space-between;
4819     -533     -  align-items: center;
4820     -534     -  margin-bottom: 20px;
4821     -535     -}
4822     -536     -
4823     -537     -.modal-header h2 {
4824     -538     -  color: var(--h1-color);
4825     -539     -  font-size: 24px;
4826     -540     -}
4827     -541     -
4828     -542 532  .close-btn {
4829     -543     -  background: none;
4830     -544     -  border: none;
4831     -545     -  font-size: 28px;
4832     -546     -  cursor: pointer;
4833     -547 533    color: var(--text-secondary);
4834     -548     -  padding: 0;
4835     -549     -  width: 30px;
4836     -550     -  height: 30px;
4837     -551     -  display: flex;
4838     -552     -  align-items: center;
4839     -553     -  justify-content: center;
4840     -    534 +  float: right;
4841     -    535 +  font-size: 24px;
4842     -    536 +  font-weight: bold;
4843     -    537 +  cursor: pointer;
4844     -    538 +  transition: color 0.2s ease, transform 0.2s ease;
4845     -    539 +  line-height: 1;
4846     -554 540  }
4847     -555 541  
4848     -556 542  .close-btn:hover {
4849     -@@ -620,22 +606,50 @@ body {
4850     -620 606  }
4851     -621 607  
4852     -622 608  /* ==================== SCROLLBAR ==================== */
4853     -623     -::-webkit-scrollbar {
4854     -624     -  width: 10px;
4855     -625     -  height: 10px;
4856     -    609 +/* Base Scrollbar */
4857     -    610 +::-webkit-scrollbar { width: 8px; height: 8px; }
4858     -    611 +::-webkit-scrollbar-track { background: transparent; }
4859     -    612 +::-webkit-scrollbar-thumb { background: var(--border-glass, rgba(255,255,255,0.1)); border-radius: 4px; }
4860     -    613 +::-webkit-scrollbar-thumb:hover { background: var(--text-secondary); }
4861     -    614 +
4862     -    615 +/* ==================== BUTTONS & INTERACTIVE ==================== */
4863     -    616 +.btn {
4864     -    617 +  background-color: transparent;
4865     -    618 +  color: var(--text-primary);
4866     -    619 +  border: 1px solid var(--border-color);
4867     -    620 +  padding: 8px 16px;
4868     -    621 +  border-radius: 6px;
4869     -    622 +  cursor: pointer;
4870     -    623 +  font-size: 14px;
4871     -    624 +  font-family: var(--font-primary, sans-serif);
4872     -    625 +  font-weight: 500;
4873     -    626 +  transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
4874     -    627 +  display: inline-flex;
4875     -    628 +  align-items: center;
4876     -    629 +  gap: 6px;
4877     -    630 +  position: relative;
4878     -    631 +  overflow: hidden;
4879     -626 632  }
4880     -627 633  
4881     -628     -::-webkit-scrollbar-track {
4882     -629     -  background: var(--bg-secondary);
4883     -    634 +.btn:hover {
4884     -    635 +  background-color: rgba(0,0,0,0.05);
4885     -    636 +  border-color: var(--text-secondary);
4886     -    637 +  color: var(--text-primary);
4887     -630 638  }
4888     -631 639  
4889     -632     -::-webkit-scrollbar-thumb {
4890     -633     -  background: var(--border-color);
4891     -634     -  border-radius: 5px;
4892     -    640 +.btn:active {
4893     -    641 +  transform: translateY(0);
4894     -635 642  }
4895     -636 643  
4896     -637     -::-webkit-scrollbar-thumb:hover {
4897     -638     -  background: var(--text-secondary);
4898     -    644 +.btn-primary {
4899     -    645 +  background-color: var(--accent-color, #007bff);
4900     -    646 +  border: none;
4901     -    647 +  color: #fff;
4902     -    648 +  font-weight: 600;
4903     -    649 +}
4904     -    650 +
4905     -    651 +.btn-primary:hover {
4906     -    652 +  background-color: var(--accent-hover, #0056b3);
4907     -639 653  }
4908     -640 654  
4909     -641 655  /* ==================== FOOTER ==================== */
4910     -@@ -819,21 +833,22 @@ body {
4911     -819 833  /* Floating show button (appears when sidebar is hidden) - TOP LEFT */
4912     -820 834  /* Obsolete floating button styles removed */
4913     -821 835  
4914     -    836 +/* ==================== FILE BROWSER (SIDEBAR) ==================== */
4915     -822 837  .file-browser {
4916     -823     -  width: 280px;
4917     -824     -  min-width: 100px;
4918     -    838 +  width: var(--sidebar-width, 280px);
4919     -    839 +  min-width: 200px;
4920     -825 840    max-width: 600px;
4921     -    841 +
4922     -    842 +  /* Generic Base Styles */
4923     -826 843    background-color: var(--bg-secondary);
4924     -827     -  backdrop-filter: blur(12px);
4925     -828     -  -webkit-backdrop-filter: blur(12px);
4926     -829 844    border-right: 1px solid var(--border-color);
4927     -    845 +
4928     -830 846    display: flex;
4929     -831 847    flex-direction: column;
4930     -832     -  overflow: hidden;
4931     -833     -  flex-shrink: 0;
4932     -    848 +  height: 100%;
4933     -834 849    position: relative;
4934     -835     -  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
4935     -836     -  box-shadow: 4px 0 12px rgba(0, 0, 0, 0.05); /* Subtle depth */
4936     -    850 +  transition: transform 0.3s ease, margin-left 0.3s ease;
4937     -    851 +  z-index: 40;
4938     -837 852  }
4939     -838 853  
4940     -839 854  /* Collapsed state for sidebar */
4941     -@@ -874,23 +889,24 @@ body {
4942     -874 889    box-shadow: 0 0 12px rgba(0, 123, 255, 0.5);
4943     -875 890  }
4944     -876 891  
4945     -    892 +/* Header in Sidebar */
4946     -877 893  .browser-header {
4947     -878     -  padding: 8px 12px;
4948     -879     -  border-bottom: 1px solid var(--border-color);
4949     -    894 +  height: 48px;
4950     -    895 +  padding: 0 16px;
4951     -880 896    display: flex;
4952     -881     -  justify-content: space-between;
4953     -882 897    align-items: center;
4954     -    898 +  justify-content: space-between;
4955     -    899 +  border-bottom: 1px solid var(--border-color);
4956     -883 900    background-color: var(--bg-tertiary);
4957     -884 901  }
4958     -885 902  
4959     -886 903  .browser-title {
4960     -887     -  display: flex;
4961     -888     -  align-items: center;
4962     -889     -  gap: 8px;
4963     -    904 +  font-family: var(--font-primary, sans-serif);
4964     -    905 +  font-size: 13px;
4965     -890 906    font-weight: 600;
4966     -891     -  color: var(--text-primary);
4967     -892     -  font-size: 14px;
4968     -893     -  flex: 1;
4969     -    907 +  letter-spacing: 0.5px;
4970     -    908 +  text-transform: uppercase;
4971     -    909 +  color: var(--text-secondary);
4972     -894 910  }
4973     -895 911  
4974     -896 912  .browser-actions {
4975     -@@ -1140,3 +1156,90 @@ body {
4976     -1140 1156  .pdf-export-mode * {
4977     -1141 1157    /* No generic override, trusting other elements are safe */
4978     -1142 1158  }
4979     -    1159 +
4980     -    1160 +/* ==================== ZEN MODE ==================== */
4981     -    1161 +body.zen-mode {
4982     -    1162 +  overflow: hidden; /* Prevent body scroll */
4983     -    1163 +}
4984     -    1164 +
4985     -    1165 +body.zen-mode .toolbar,
4986     -    1166 +body.zen-mode .file-browser,
4987     -    1167 +body.zen-mode .app-footer,
4988     -    1168 +body.zen-mode .mobile-tabs {
4989     -    1169 +  display: none !important;
4990     -    1170 +}
4991     -    1171 +
4992     -    1172 +body.zen-mode .app-container {
4993     -    1173 +  height: 100vh;
4994     -    1174 +  padding: 0;
4995     -    1175 +  max-width: 100%;
4996     -    1176 +}
4997     -    1177 +
4998     -    1178 +body.zen-mode .main-content {
4999     -    1179 +  height: 100vh;
5000     -    1180 +}
5001     -    1181 +
5002     -    1182 +/* Zen Editor */
5003     -    1183 +body.zen-mode .editor-container,
5004     -    1184 +body.zen-mode .preview-container {
5005     -    1185 +  border: none;
5006     -    1186 +  border-radius: 0;
5007     -    1187 +  max-width: 900px; /* Readability width */
5008     -    1188 +  margin: 0 auto;
5009     -    1189 +  padding: 40px;
5010     -    1190 +  background: transparent;
5011     -    1191 +  box-shadow: none;
5012     -    1192 +}
5013     -    1193 +
5014     -    1194 +/* Editor Focus in Zen Mode */
5015     -    1195 +body.zen-mode textarea {
5016     -    1196 +    font-size: 1.1em;
5017     -    1197 +    line-height: 1.8;
5018     -    1198 +}
5019     -    1199 +
5020     -    1200 +/* Exit Button (Floating) */
5021     -    1201 +.floating-exit-btn {
5022     -    1202 +  position: fixed;
5023     -    1203 +  bottom: 30px;
5024     -    1204 +  right: 30px;
5025     -    1205 +  background: var(--bg-glass-heavy);
5026     -    1206 +  color: var(--text-secondary);
5027     -    1207 +  border: 1px solid var(--border-glass);
5028     -    1208 +  padding: 12px 24px;
5029     -    1209 +  border-radius: 30px;
5030     -    1210 +  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
5031     -    1211 +  z-index: 1000;
5032     -    1212 +  display: none; /* Hidden by default */
5033     -    1213 +  backdrop-filter: blur(10px);
5034     -    1214 +  transition: all 0.3s ease;
5035     -    1215 +  font-family: var(--font-primary);
5036     -    1216 +  opacity: 0;
5037     -    1217 +  transform: translateY(20px);
5038     -    1218 +  cursor: pointer;
5039     -    1219 +}
5040     -    1220 +
5041     -    1221 +body.zen-mode .floating-exit-btn {
5042     -    1222 +  display: flex !important;
5043     -    1223 +  opacity: 0.4; /* Subtle by default */
5044     -    1224 +  transform: translateY(0);
5045     -    1225 +}
5046     -    1226 +
5047     -    1227 +body.zen-mode .floating-exit-btn:hover {
5048     -    1228 +  opacity: 1;
5049     -    1229 +  background: var(--bg-glass);
5050     -    1230 +  border-color: var(--accent-cyan);
5051     -    1231 +  color: var(--text-star);
5052     -    1232 +  transform: scale(1.05);
5053     -    1233 +  box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
5054     -    1234 +}
5055     -    1235 +
5056     -    1236 +/* Zen Mode Animation */
5057     -    1237 +@keyframes zen-enter {
5058     -    1238 +  from { opacity: 0; transform: scale(0.98); }
5059     -    1239 +  to { opacity: 1; transform: scale(1); }
5060     -    1240 +}
5061     -    1241 +
5062     -    1242 +body.zen-mode .editor-container,
5063     -    1243 +body.zen-mode .preview-container {
5064     -    1244 +    animation: zen-enter 0.5s cubic-bezier(0.22, 1, 0.36, 1);
5065     -    1245 +}
5066     -1143 1246  
5067     -
5068     -```
5069     -
5070     -
5071     -### ‚ú® `themes/nebula-dark.css` **[ADDED]**
5072     -
5073     -**Status:** ‚úÖ **NEW FILE** - This file has been newly created
5074     -
5075     -**Type:** Stylesheet üé®
5076     -
5077     -```diff
5078     -@@ -0,0 +1,70 @@
5079     -      1 +/* ==================== NEBULA DARK THEME ==================== */
5080     -      2 +/* Maps Core Nebula Tokens to App Variables */
5081     -      3 +
5082     -      4 +:root {
5083     -      5 +  /* ==================== BASE COLORS ==================== */
5084     -      6 +  --bg-primary: var(--bg-universe);
5085     -      7 +  --bg-secondary: var(--bg-glass-heavy);
5086     -      8 +  --bg-tertiary: var(--bg-element);
5087     -      9 +
5088     -     10 +  --text-primary: var(--text-star);
5089     -     11 +  --text-secondary: var(--text-stardust);
5090     -     12 +
5091     -     13 +  --border-color: var(--border-glass);
5092     -     14 +
5093     -     15 +  /* ==================== ACCENTS & LINKS ==================== */
5094     -     16 +  --link-color: var(--accent-cyan);
5095     -     17 +  --link-hover: var(--accent-violet);
5096     -     18 +
5097     -     19 +  /* ==================== CODE & SYNTAX ==================== */
5098     -     20 +  --code-bg: rgba(0, 0, 0, 0.3);
5099     -     21 +  --code-text: var(--text-star);
5100     -     22 +  --code-block-bg: rgba(0, 0, 0, 0.3);
5101     -     23 +  --code-border: var(--border-glass);
5102     -     24 +
5103     -     25 +  --blockquote-border: var(--accent-violet);
5104     -     26 +  --blockquote-bg: rgba(188, 19, 254, 0.1);
5105     -     27 +
5106     -     28 +  --table-header-bg: rgba(255, 255, 255, 0.05);
5107     -     29 +  --table-border: var(--border-glass);
5108     -     30 +
5109     -     31 +  /* ==================== TYPOGRAPHY DEFAULTS ==================== */
5110     -     32 +  --h1-color: var(--accent-cyan);
5111     -     33 +  --h2-color: var(--text-star);
5112     -     34 +  --h3-color: var(--text-star);
5113     -     35 +  --h4-color: var(--text-star);
5114     -     36 +  --h5-color: var(--text-star);
5115     -     37 +  --h6-color: var(--text-stardust);
5116     -     38 +
5117     -     39 +  --bold-color: var(--accent-cyan);
5118     -     40 +  --italic-color: var(--accent-violet);
5119     -     41 +
5120     -     42 +  /* ==================== SYNTAX TOKENS (Prism Mapped) ==================== */
5121     -     43 +  --syntax-comment: #6272a4;
5122     -     44 +  --syntax-punctuation: #f8f8f2;
5123     -     45 +  --syntax-number: var(--accent-violet);      /* Purple */
5124     -     46 +  --syntax-keyword: var(--accent-cyan);       /* Cyan */
5125     -     47 +  --syntax-class-name: var(--accent-cyan);
5126     -     48 +  --syntax-property: #ff79c6;                 /* Pink */
5127     -     49 +  --syntax-tag: #ff79c6;
5128     -     50 +  --syntax-string: #f1fa8c;                   /* Yellow */
5129     -     51 +  --syntax-function: #50fa7b;                 /* Green */
5130     -     52 +  --syntax-variable: #f8f8f2;
5131     -     53 +  --syntax-operator: #ff79c6;
5132     -     54 +  --syntax-url: var(--link-color);
5133     -     55 +}
5134     -     56 +
5135     -     57 +/* Specific overrides for Nebula feel */
5136     -     58 +body {
5137     -     59 +    background-image:
5138     -     60 +        radial-gradient(circle at 20% 20%, rgba(188, 19, 254, 0.15) 0%, transparent 40%),
5139     -     61 +        radial-gradient(circle at 80% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 40%);
5140     -     62 +    background-attachment: fixed;
5141     -     63 +    backdrop-filter: blur(100px); /* Creates the deep atmosphere */
5142     -     64 +}
5143     -     65 +
5144     -     66 +/* Scrollbar */
5145     -     67 +::-webkit-scrollbar { width: 8px; }
5146     -     68 +::-webkit-scrollbar-track { background: transparent; }
5147     -     69 +::-webkit-scrollbar-thumb { background: var(--border-glass); border-radius: 4px; }
5148     -     70 +::-webkit-scrollbar-thumb:hover { background: var(--accent-cyan); }
5149     -     71  
5150     -
5151     -```
5152     -
5153     -
5154     -### ‚ú® `themes/nebula-elements.css` **[ADDED]**
5155     -
5156     -**Status:** ‚úÖ **NEW FILE** - This file has been newly created
5157     -
5158     -**Type:** Stylesheet üé®
5159     -
5160     -```diff
5161     -@@ -0,0 +1,419 @@
5162     -      1 +/* ==================== NEBULA MICRO-ELEMENTS ==================== */
5163     -      2 +/* Scoped to Nebula Themes (Dark & Light) */
5164     -      3 +
5165     -      4 +/* Helper for common Nebula selectors */
5166     -      5 +/* We use [data-theme^="nebula-"] to target both nebula-dark and nebula-light */
5167     -      6 +
5168     -      7 +/* ==================== 1. MARKDOWN ELEMENTS ==================== */
5169     -      8 +
5170     -      9 +/* Blockquotes */
5171     -     10 +[data-theme^="nebula-"] blockquote {
5172     -     11 +    background: var(--bg-glass);
5173     -     12 +    border-left: 4px solid var(--accent-violet);
5174     -     13 +    border-radius: 0 8px 8px 0;
5175     -     14 +    padding: 16px 24px;
5176     -     15 +    font-style: italic;
5177     -     16 +    color: var(--text-secondary);
5178     -     17 +    position: relative;
5179     -     18 +    overflow: hidden;
5180     -     19 +    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
5181     -     20 +    animation: nebula-fade-in 0.6s ease-out;
5182     -     21 +}
5183     -     22 +
5184     -     23 +[data-theme^="nebula-"] blockquote:hover {
5185     -     24 +    border-left-color: var(--accent-cyan);
5186     -     25 +    box-shadow: var(--shadow-neon);
5187     -     26 +    transform: translateX(4px);
5188     -     27 +}
5189     -     28 +
5190     -     29 +[data-theme^="nebula-"] blockquote::before {
5191     -     30 +    content: '"';
5192     -     31 +    position: absolute;
5193     -     32 +    top: -10px;
5194     -     33 +    right: 10px;
5195     -     34 +    font-size: 60px;
5196     -     35 +    color: var(--border-glass);
5197     -     36 +    font-family: serif;
5198     -     37 +    opacity: 0.2;
5199     -     38 +}
5200     -     39 +
5201     -     40 +/* Tables */
5202     -     41 +[data-theme^="nebula-"] table {
5203     -     42 +    border-collapse: separate;
5204     -     43 +    border-spacing: 0 4px; /* Row spacing */
5205     -     44 +    margin: 2em 0;
5206     -     45 +}
5207     -     46 +
5208     -     47 +[data-theme^="nebula-"] thead th {
5209     -     48 +    background: var(--bg-glass-heavy);
5210     -     49 +    color: var(--accent-cyan);
5211     -     50 +    border: none;
5212     -     51 +    padding: 16px;
5213     -     52 +    font-weight: 600;
5214     -     53 +    letter-spacing: 0.5px;
5215     -     54 +    text-transform: uppercase;
5216     -     55 +    font-size: 0.85em;
5217     -     56 +}
5218     -     57 +
5219     -     58 +[data-theme^="nebula-"] thead th:first-child {
5220     -     59 +    border-radius: 8px 0 0 8px;
5221     -     60 +}
5222     -     61 +
5223     -     62 +[data-theme^="nebula-"] thead th:last-child {
5224     -     63 +    border-radius: 0 8px 8px 0;
5225     -     64 +}
5226     -     65 +
5227     -     66 +[data-theme^="nebula-"] tbody tr {
5228     -     67 +    background: var(--bg-glass-light);
5229     -     68 +    backdrop-filter: blur(4px);
5230     -     69 +    transition: all 0.3s ease;
5231     -     70 +    cursor: default;
5232     -     71 +}
5233     -     72 +
5234     -     73 +[data-theme^="nebula-"] tbody td {
5235     -     74 +    border: none;
5236     -     75 +    padding: 14px 16px;
5237     -     76 +    border-top: 1px solid transparent;
5238     -     77 +    border-bottom: 1px solid transparent;
5239     -     78 +}
5240     -     79 +
5241     -     80 +/* Row Hover "Highlighter" Effect */
5242     -     81 +[data-theme^="nebula-"] tbody tr:hover {
5243     -     82 +    background: var(--bg-glass);
5244     -     83 +    transform: scale(1.01);
5245     -     84 +    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
5246     -     85 +    z-index: 10;
5247     -     86 +    position: relative;
5248     -     87 +    border-color: var(--border-glow);
5249     -     88 +}
5250     -     89 +
5251     -     90 +[data-theme^="nebula-"] tbody tr:hover td {
5252     -     91 +    color: var(--text-star);
5253     -     92 +}
5254     -     93 +
5255     -     94 +/* Task Lists */
5256     -     95 +[data-theme^="nebula-"] ul.contains-task-list {
5257     -     96 +    list-style: none;
5258     -     97 +    padding-left: 0;
5259     -     98 +}
5260     -     99 +
5261     -    100 +[data-theme^="nebula-"] .task-list-item {
5262     -    101 +    display: flex;
5263     -    102 +    align-items: center;
5264     -    103 +    padding: 8px 12px;
5265     -    104 +    margin: 4px 0;
5266     -    105 +    border-radius: 8px;
5267     -    106 +    transition: background 0.2s;
5268     -    107 +}
5269     -    108 +
5270     -    109 +[data-theme^="nebula-"] .task-list-item:hover {
5271     -    110 +    background: var(--bg-glass-light);
5272     -    111 +}
5273     -    112 +
5274     -    113 +/* Custom Checkbox */
5275     -    114 +[data-theme^="nebula-"] input[type="checkbox"] {
5276     -    115 +    appearance: none;
5277     -    116 +    width: 18px;
5278     -    117 +    height: 18px;
5279     -    118 +    border: 2px solid var(--text-stardust);
5280     -    119 +    border-radius: 50%; /* Circle style */
5281     -    120 +    margin-right: 12px;
5282     -    121 +    position: relative;
5283     -    122 +    cursor: pointer;
5284     -    123 +    transition: all 0.3s ease;
5285     -    124 +}
5286     -    125 +
5287     -    126 +[data-theme^="nebula-"] input[type="checkbox"]:checked {
5288     -    127 +    background-color: var(--accent-cyan);
5289     -    128 +    border-color: var(--accent-cyan);
5290     -    129 +    box-shadow: 0 0 10px var(--accent-cyan);
5291     -    130 +}
5292     -    131 +
5293     -    132 +[data-theme^="nebula-"] input[type="checkbox"]:checked::after {
5294     -    133 +    content: '‚úì';
5295     -    134 +    position: absolute;
5296     -    135 +    color: #000;
5297     -    136 +    font-size: 12px;
5298     -    137 +    font-weight: bold;
5299     -    138 +    top: 50%;
5300     -    139 +    left: 50%;
5301     -    140 +    transform: translate(-50%, -50%);
5302     -    141 +}
5303     -    142 +
5304     -    143 +/* Images */
5305     -    144 +[data-theme^="nebula-"] img {
5306     -    145 +    border-radius: 12px;
5307     -    146 +    border: 1px solid var(--border-glass);
5308     -    147 +    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
5309     -    148 +}
5310     -    149 +
5311     -    150 +[data-theme^="nebula-"] img:hover {
5312     -    151 +    transform: scale(1.02);
5313     -    152 +    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
5314     -    153 +}
5315     -    154 +
5316     -    155 +/* Horizontal Rules */
5317     -    156 +[data-theme^="nebula-"] hr {
5318     -    157 +    height: 2px;
5319     -    158 +    background: linear-gradient(90deg, transparent, var(--accent-cyan), var(--accent-violet), transparent);
5320     -    159 +    border: none;
5321     -    160 +    margin: 3em 0;
5322     -    161 +    opacity: 0.6;
5323     -    162 +    animation: nebula-pulse-glow 4s infinite;
5324     -    163 +}
5325     -    164 +
5326     -    165 +/* ==================== 2. CODE & SYNTAX (PRISM) ==================== */
5327     -    166 +
5328     -    167 +[data-theme^="nebula-"] pre {
5329     -    168 +    background: var(--bg-glass-heavy) !important;
5330     -    169 +    border: 1px solid var(--border-glass);
5331     -    170 +    box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
5332     -    171 +    position: relative;
5333     -    172 +    padding-top: 32px !important; /* Space for traffic lights */
5334     -    173 +}
5335     -    174 +
5336     -    175 +/* Traffic Lights */
5337     -    176 +[data-theme^="nebula-"] pre::before {
5338     -    177 +    content: '';
5339     -    178 +    position: absolute;
5340     -    179 +    top: 12px;
5341     -    180 +    left: 16px;
5342     -    181 +    width: 10px;
5343     -    182 +    height: 10px;
5344     -    183 +    border-radius: 50%;
5345     -    184 +    background: #ff5f56;
5346     -    185 +    box-shadow: 18px 0 0 #ffbd2e, 36px 0 0 #27c93f;
5347     -    186 +    opacity: 0.8;
5348     -    187 +    transition: opacity 0.3s;
5349     -    188 +}
5350     -    189 +
5351     -    190 +[data-theme^="nebula-"] pre:hover {
5352     -    191 +    border-color: var(--border-glow);
5353     -    192 +    box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
5354     -    193 +}
5355     -    194 +
5356     -    195 +[data-theme^="nebula-"] pre:hover::before {
5357     -    196 +    opacity: 1;
5358     -    197 +}
5359     -    198 +
5360     -    199 +/* Neon Tokens */
5361     -    200 +[data-theme^="nebula-"] .token.keyword {
5362     -    201 +    color: var(--accent-cyan);
5363     -    202 +    text-shadow: 0 0 5px rgba(0, 243, 255, 0.4);
5364     -    203 +}
5365     -    204 +
5366     -    205 +[data-theme^="nebula-"] .token.string {
5367     -    206 +    color: #50fa7b; /* Neon Green */
5368     -    207 +}
5369     -    208 +
5370     -    209 +[data-theme^="nebula-"] .token.function {
5371     -    210 +    color: var(--accent-violet);
5372     -    211 +    transition: text-decoration 0.2s;
5373     -    212 +}
5374     -    213 +
5375     -    214 +[data-theme^="nebula-"] .token.function:hover {
5376     -    215 +    text-decoration: underline;
5377     -    216 +    text-decoration-color: var(--accent-cyan);
5378     -    217 +    text-underline-offset: 4px;
5379     -    218 +}
5380     -    219 +
5381     -    220 +[data-theme^="nebula-"] .token.number {
5382     -    221 +    color: #ffb86c; /* Orange */
5383     -    222 +}
5384     -    223 +
5385     -    224 +[data-theme^="nebula-"] .token.comment {
5386     -    225 +    color: var(--text-stardust);
5387     -    226 +    font-style: italic;
5388     -    227 +    opacity: 0.8;
5389     -    228 +}
5390     -    229 +
5391     -    230 +/* ==================== 3. MATH (KaTeX) ==================== */
5392     -    231 +
5393     -    232 +/* Display Math Container */
5394     -    233 +[data-theme^="nebula-"] .katex-display {
5395     -    234 +    background: var(--bg-glass);
5396     -    235 +    padding: 24px;
5397     -    236 +    border-radius: 12px;
5398     -    237 +    border: 1px solid transparent;
5399     -    238 +    transition: all 0.3s ease;
5400     -    239 +    margin: 2em 0;
5401     -    240 +    overflow-x: auto;
5402     -    241 +}
5403     -    242 +
5404     -    243 +[data-theme^="nebula-"] .katex-display:hover {
5405     -    244 +    border-color: var(--accent-cyan);
5406     -    245 +    box-shadow: var(--shadow-neon);
5407     -    246 +    background: var(--bg-glass-heavy);
5408     -    247 +}
5409     -    248 +
5410     -    249 +/* Inline Math */
5411     -    250 +[data-theme^="nebula-"] .katex {
5412     -    251 +    font-size: 1.1em;
5413     -    252 +    color: var(--text-star);
5414     -    253 +}
5415     -    254 +
5416     -    255 +[data-theme^="nebula-"] .katex-display .katex {
5417     -    256 +    font-size: 1.2em;
5418     -    257 +}
5419     -    258 +
5420     -    259 +/* Operators and Relations (Deep styling requires relying on KaTeX classes or falling back to generic) */
5421     -    260 +/* KaTeX specific classes */
5422     -    261 +[data-theme^="nebula-"] .katex .mbin { color: var(--accent-cyan); } /* Binary operators + - = */
5423     -    262 +[data-theme^="nebula-"] .katex .mrel { color: var(--accent-violet); } /* Relations < > = */
5424     -    263 +[data-theme^="nebula-"] .katex .mopen,
5425     -    264 +[data-theme^="nebula-"] .katex .mclose { color: var(--text-stardust); } /* Brackets */
5426     -    265 +[data-theme^="nebula-"] .katex .sqrt-line,
5427     -    266 +[data-theme^="nebula-"] .katex .frac-line { border-color: var(--accent-cyan); }
5428     -    267 +
5429     -    268 +/* Hover pulse on display math */
5430     -    269 +[data-theme^="nebula-"] .katex-display:hover .katex {
5431     -    270 +    animation: nebula-float 3s ease-in-out infinite;
5432     -    271 +}
5433     -    272 +
5434     -    273 +/* ==================== 4. MERMAID DIAGRAMS ==================== */
5435     -    274 +
5436     -    275 +/* Container */
5437     -    276 +[data-theme^="nebula-"] .mermaid {
5438     -    277 +    background: var(--bg-glass-heavy);
5439     -    278 +    padding: 24px;
5440     -    279 +    border-radius: 16px;
5441     -    280 +    border: 1px solid var(--border-glass);
5442     -    281 +    display: flex;
5443     -    282 +    justify-content: center;
5444     -    283 +    margin: 2em 0;
5445     -    284 +    transition: border-color 0.3s;
5446     -    285 +}
5447     -    286 +
5448     -    287 +[data-theme^="nebula-"] .mermaid:hover {
5449     -    288 +    border-color: var(--accent-cyan);
5450     -    289 +}
5451     -    290 +
5452     -    291 +/* Nodes */
5453     -    292 +/* Only works if Mermaid renders generic shapes, often needs !important due to inline styles */
5454     -    293 +[data-theme^="nebula-"] .mermaid .node rect,
5455     -    294 +[data-theme^="nebula-"] .mermaid .node circle,
5456     -    295 +[data-theme^="nebula-"] .mermaid .node polygon,
5457     -    296 +[data-theme^="nebula-"] .mermaid .node ellipse {
5458     -    297 +    fill: rgba(10, 12, 25, 0.8) !important;
5459     -    298 +    stroke: var(--accent-cyan) !important;
5460     -    299 +    stroke-width: 2px !important;
5461     -    300 +    transition: all 0.3s ease;
5462     -    301 +}
5463     -    302 +
5464     -    303 +[data-theme^="nebula-"] .mermaid .node:hover rect,
5465     -    304 +[data-theme^="nebula-"] .mermaid .node:hover circle {
5466     -    305 +    fill: rgba(0, 243, 255, 0.1) !important;
5467     -    306 +    stroke: #fff !important;
5468     -    307 +    filter: drop-shadow(0 0 8px var(--accent-cyan));
5469     -    308 +    cursor: pointer;
5470     -    309 +}
5471     -    310 +
5472     -    311 +/* Edges */
5473     -    312 +[data-theme^="nebula-"] .mermaid .edgePath .path {
5474     -    313 +    stroke: var(--text-stardust) !important;
5475     -    314 +    stroke-width: 1.5px !important;
5476     -    315 +}
5477     -    316 +
5478     -    317 +/* Flow Animation on Edges */
5479     -    318 +/* We target the path lines */
5480     -    319 +[data-theme^="nebula-"] .mermaid .edgePath .path {
5481     -    320 +    stroke-dasharray: 10, 5;
5482     -    321 +    animation: nebula-dash-flow 20s linear infinite;
5483     -    322 +}
5484     -    323 +
5485     -    324 +@keyframes nebula-dash-flow {
5486     -    325 +    to { stroke-dashoffset: -100; }
5487     -    326 +}
5488     -    327 +
5489     -    328 +/* Labels */
5490     -    329 +[data-theme^="nebula-"] .mermaid .label {
5491     -    330 +    font-family: var(--font-primary) !important;
5492     -    331 +    color: var(--text-star) !important;
5493     -    332 +}
5494     -    333 +
5495     -    334 +/* ==================== 5. LAYOUT OVERRIDES (Glassmorphism) ==================== */
5496     -    335 +
5497     -    336 +/* Toolbar */
5498     -    337 +[data-theme^="nebula-"] .toolbar {
5499     -    338 +  background: var(--bg-glass, rgba(15, 17, 35, 0.6));
5500     -    339 +  backdrop-filter: var(--blur-panel, blur(24px) saturate(180%));
5501     -    340 +  border-bottom: 1px solid var(--border-glass);
5502     -    341 +  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
5503     -    342 +  z-index: 50;
5504     -    343 +  animation: nebula-fade-in 0.6s ease-out;
5505     -    344 +}
5506     -    345 +
5507     -    346 +[data-theme^="nebula-"] .logo {
5508     -    347 +  font-family: var(--font-primary);
5509     -    348 +  color: var(--text-star);
5510     -    349 +  background: var(--accent-gradient, linear-gradient(135deg, #00f3ff, #bc13fe));
5511     -    350 +  -webkit-background-clip: text;
5512     -    351 +  background-clip: text;
5513     -    352 +  -webkit-text-fill-color: transparent;
5514     -    353 +  text-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
5515     -    354 +}
5516     -    355 +
5517     -    356 +/* Sidebar (File Browser) */
5518     -    357 +[data-theme^="nebula-"] .file-browser {
5519     -    358 +  background: var(--bg-glass-heavy, rgba(10, 12, 25, 0.85));
5520     -    359 +  backdrop-filter: var(--blur-panel);
5521     -    360 +  border-right: 1px solid var(--border-glass);
5522     -    361 +}
5523     -    362 +
5524     -    363 +[data-theme^="nebula-"] .browser-header {
5525     -    364 +    background: rgba(255,255,255,0.02);
5526     -    365 +    border-bottom: 1px solid var(--border-glass);
5527     -    366 +}
5528     -    367 +
5529     -    368 +/* Modals */
5530     -    369 +[data-theme^="nebula-"] .modal {
5531     -    370 +    background-color: rgba(0, 0, 0, 0.6);
5532     -    371 +}
5533     -    372 +
5534     -    373 +[data-theme^="nebula-"] .modal-content {
5535     -    374 +  background: var(--bg-glass-heavy, rgba(15, 17, 35, 0.9));
5536     -    375 +  border: 1px solid var(--border-glass);
5537     -    376 +  border-radius: var(--radius-lg, 16px);
5538     -    377 +  box-shadow: var(--shadow-glass);
5539     -    378 +  backdrop-filter: var(--blur-panel);
5540     -    379 +  animation: nebula-fade-in 0.4s ease-out forwards;
5541     -    380 +}
5542     -    381 +
5543     -    382 +[data-theme^="nebula-"] .close-btn {
5544     -    383 +    color: var(--text-stardust);
5545     -    384 +}
5546     -    385 +
5547     -    386 +[data-theme^="nebula-"] .close-btn:hover {
5548     -    387 +  color: var(--accent-cyan);
5549     -    388 +  transform: rotate(90deg);
5550     -    389 +}
5551     -    390 +
5552     -    391 +/* Buttons */
5553     -    392 +[data-theme^="nebula-"] .btn {
5554     -    393 +  color: var(--text-star);
5555     -    394 +  border: 1px solid var(--border-glass);
5556     -    395 +  font-family: var(--font-primary);
5557     -    396 +  background: transparent;
5558     -    397 +  backdrop-filter: blur(4px);
5559     -    398 +}
5560     -    399 +
5561     -    400 +[data-theme^="nebula-"] .btn:hover {
5562     -    401 +  background: rgba(255, 255, 255, 0.05); /* Glass highlight */
5563     -    402 +  border-color: var(--accent-cyan);
5564     -    403 +  transform: translateY(-1px);
5565     -    404 +  box-shadow: 0 4px 12px rgba(0, 243, 255, 0.15);
5566     -    405 +  color: var(--text-star);
5567     -    406 +}
5568     -    407 +
5569     -    408 +[data-theme^="nebula-"] .btn-primary {
5570     -    409 +  background: var(--accent-gradient);
5571     -    410 +  border: none;
5572     -    411 +  color: #fff;
5573     -    412 +  box-shadow: 0 4px 15px rgba(188, 19, 254, 0.3);
5574     -    413 +}
5575     -    414 +
5576     -    415 +[data-theme^="nebula-"] .btn-primary:hover {
5577     -    416 +  box-shadow: 0 6px 20px rgba(0, 243, 255, 0.4);
5578     -    417 +  transform: translateY(-2px);
5579     -    418 +  background: var(--accent-gradient); /* Keep gradient */
5580     -    419 +}
5581     -    420  
5582     -
5583     -```
5584     -
5585     -
5586     -### ‚ú® `themes/nebula-light.css` **[ADDED]**
5587     -
5588     -**Status:** ‚úÖ **NEW FILE** - This file has been newly created
5589     -
5590     -**Type:** Stylesheet üé®
5591     -
5592     -```diff
5593     -@@ -0,0 +1,82 @@
5594     -      1 +/* ==================== NEBULA LIGHT THEME ==================== */
5595     -      2 +/* Maps Core Nebula Tokens to App Variables */
5596     -      3 +
5597     -      4 +[data-theme="nebula-light"] {
5598     -      5 +    /* Use Nebula Light tokens by default in this scope if needed,
5599     -      6 +       but here we map generic vars to those tokens */
5600     -      7 +}
5601     -      8 +
5602     -      9 +:root {
5603     -     10 +  /* ==================== BASE COLORS ==================== */
5604     -     11 +  --bg-primary: var(--bg-universe);
5605     -     12 +  --bg-secondary: var(--bg-glass-heavy);
5606     -     13 +  --bg-tertiary: var(--bg-element);
5607     -     14 +
5608     -     15 +  --text-primary: var(--text-star);
5609     -     16 +  --text-secondary: var(--text-stardust);
5610     -     17 +
5611     -     18 +  --border-color: var(--border-glass);
5612     -     19 +
5613     -     20 +  /* ==================== ACCENTS & LINKS ==================== */
5614     -     21 +  --link-color: var(--accent-cyan);
5615     -     22 +  --link-hover: var(--accent-violet);
5616     -     23 +
5617     -     24 +  /* ==================== CODE & SYNTAX ==================== */
5618     -     25 +  --code-bg: rgba(255, 255, 255, 0.4);
5619     -     26 +  --code-text: var(--text-star);
5620     -     27 +  --code-block-bg: rgba(255, 255, 255, 0.5);
5621     -     28 +  --code-border: var(--border-glass);
5622     -     29 +
5623     -     30 +  --blockquote-border: var(--accent-cyan);
5624     -     31 +  --blockquote-bg: rgba(0, 188, 212, 0.05); /* Cyan tint */
5625     -     32 +
5626     -     33 +  --table-header-bg: rgba(0, 0, 0, 0.02);
5627     -     34 +  --table-border: var(--border-glass);
5628     -     35 +
5629     -     36 +  /* ==================== TYPOGRAPHY DEFAULTS ==================== */
5630     -     37 +  --h1-color: var(--accent-cyan);
5631     -     38 +  --h2-color: var(--text-star);
5632     -     39 +  --h3-color: var(--text-star);
5633     -     40 +
5634     -     41 +  --bold-color: var(--accent-violet);
5635     -     42 +  --italic-color: var(--accent-cyan);
5636     -     43 +
5637     -     44 +  /* ==================== SYNTAX TOKENS (Light Mode Adjusted) ==================== */
5638     -     45 +  --syntax-comment: #a0aec0;
5639     -     46 +  --syntax-punctuation: #718096;
5640     -     47 +  --syntax-number: #d53f8c;       /* Pink/Purple */
5641     -     48 +  --syntax-keyword: #00b5d8;      /* Cyan */
5642     -     49 +  --syntax-class-name: #3182ce;   /* Blue */
5643     -     50 +  --syntax-property: #d53f8c;
5644     -     51 +  --syntax-string: #38a169;       /* Green */
5645     -     52 +  --syntax-function: #3182ce;
5646     -     53 +  --syntax-variable: #718096;
5647     -     54 +  --syntax-operator: #d53f8c;
5648     -     55 +}
5649     -     56 +
5650     -     57 +/* Specific overrides for Nebula feel */
5651     -     58 +body {
5652     -     59 +    /* Light Mode Gradients */
5653     -     60 +    background-image:
5654     -     61 +        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 1) 0%, transparent 20%),
5655     -     62 +        radial-gradient(circle at 90% 80%, rgba(0, 188, 212, 0.05) 0%, transparent 50%),
5656     -     63 +        radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.03) 0%, transparent 50%);
5657     -     64 +    background-attachment: fixed;
5658     -     65 +    /* Force Light Mode tokens when this file is loaded, assuming JS adds data-theme attribute,
5659     -     66 +       BUT simpler: The variables.css handles [data-theme="nebula-light"].
5660     -     67 +       However, the theme loader (Service) just injecting this CSS file.
5661     -     68 +       If variables.css depends on [data-theme] attribute on HTML,
5662     -     69 +       we must ensure JS sets it.
5663     -     70 +       OR we can just hardcode the Light Tokens here since this IS the light theme file. */
5664     -     71 +
5665     -     72 +    /* HARDCODED TOKENS (Safety net if data-theme attr isn't set) */
5666     -     73 +    --bg-universe: #f0f4f8;
5667     -     74 +    --bg-element: #ffffff;
5668     -     75 +    --bg-glass: rgba(255, 255, 255, 0.65);
5669     -     76 +    --bg-glass-heavy: rgba(255, 255, 255, 0.85);
5670     -     77 +    --border-glass: rgba(0, 0, 0, 0.06);
5671     -     78 +    --text-star: #1a202c;
5672     -     79 +    --text-stardust: #4a5568;
5673     -     80 +    --accent-cyan: #00bcd4;
5674     -     81 +    --accent-violet: #9c27b0;
5675     -     82 +}
5676     -     83  
5677     -
5678     -```
5679     -
5680     -
5681     -### ‚ú® `variables.css` **[ADDED]**
5682     -
5683     -**Status:** ‚úÖ **NEW FILE** - This file has been newly created
5684     -
5685     -**Type:** Stylesheet üé®
5686     -
5687     -```diff
5688     -@@ -0,0 +1,78 @@
5689     -      1 +/* ==================== NEBULA DESIGN TOKENS ==================== */
5690     -      2 +
5691     -      3 +/* Typography */
5692     -      4 +@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
5693     -      5 +
5694     -      6 +:root {
5695     -      7 +  /* ==================== FONTS ==================== */
5696     -      8 +  --font-primary: 'Outfit', sans-serif;
5697     -      9 +  --font-code: 'JetBrains Mono', monospace;
     23 +@@ -0,0 +1,300 @@
     24 +      1 +/**
     25 +      2 + * Error Messages Unit Tests
     26 +      3 + *
     27 +      4 + * Comprehensive tests for centralized error message system.
     28 +      5 + * Tests all error message constants and the getErrorMessage utility function.
     29 +      6 + */
     30 +      7 +
     31 +      8 +import { describe, expect, it } from 'vitest';
     32 +      9 +import { ERROR_MESSAGES, getErrorMessage } from '../../../src/js/config/errorMessages.js';
5698  33       10 +
5699     -     11 +  /* ==================== NEBULA DARK (Default) ==================== */
5700     -     12 +
5701     -     13 +  /* Core Backgrounds */
5702     -     14 +  --bg-universe: #050508;     /* The void */
5703     -     15 +  --bg-element: #0f1123;      /* Solid panels if needed */
5704     -     16 +
5705     -     17 +  /* Glass System */
5706     -     18 +  --bg-glass: rgba(15, 17, 35, 0.6);        /* Main panels */
5707     -     19 +  --bg-glass-heavy: rgba(10, 12, 25, 0.85); /* Sidebar/Modals */
5708     -     20 +  --bg-glass-light: rgba(255, 255, 255, 0.05); /* Hover states */
5709     -     21 +
5710     -     22 +  /* Borders */
5711     -     23 +  --border-glass: rgba(255, 255, 255, 0.08);
5712     -     24 +  --border-glow: rgba(0, 243, 255, 0.3);
5713     -     25 +
5714     -     26 +  /* Accents */
5715     -     27 +  --accent-cyan: #00f3ff;
5716     -     28 +  --accent-violet: #bc13fe;
5717     -     29 +  --accent-gradient: linear-gradient(135deg, var(--accent-cyan), var(--accent-violet));
5718     -     30 +
5719     -     31 +  /* Text */
5720     -     32 +  --text-star: #ffffff;
5721     -     33 +  --text-stardust: #8b9bb4;
5722     -     34 +  --text-void: #050508;
5723     -     35 +
5724     -     36 +  /* Effects */
5725     -     37 +  --shadow-glass: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
5726     -     38 +  --shadow-neon: 0 0 10px rgba(0, 243, 255, 0.2);
5727     -     39 +  --blur-panel: blur(24px) saturate(180%);
     34 +     11 +describe('ERROR_MESSAGES', () => {
     35 +     12 +  describe('File System Access API Messages', () => {
     36 +     13 +    it('defines API_NOT_SUPPORTED message', () => {
     37 +     14 +      expect(ERROR_MESSAGES.API_NOT_SUPPORTED).toBeDefined();
     38 +     15 +      expect(ERROR_MESSAGES.API_NOT_SUPPORTED).toBe(
     39 +     16 +        'File System Access API not supported. Please use Chrome or Edge browser.'
     40 +     17 +      );
     41 +     18 +    });
     42 +     19 +  });
     43 +     20 +
     44 +     21 +  describe('Folder Operation Messages', () => {
     45 +     22 +    it('defines NO_FOLDER_OPEN message', () => {
     46 +     23 +      expect(ERROR_MESSAGES.NO_FOLDER_OPEN).toBeDefined();
     47 +     24 +      expect(ERROR_MESSAGES.NO_FOLDER_OPEN).toBe(
     48 +     25 +        'No folder is currently open. Please open a folder first.'
     49 +     26 +      );
     50 +     27 +    });
     51 +     28 +
     52 +     29 +    it('defines PERMISSION_DENIED message', () => {
     53 +     30 +      expect(ERROR_MESSAGES.PERMISSION_DENIED).toBeDefined();
     54 +     31 +      expect(ERROR_MESSAGES.PERMISSION_DENIED).toBe('Permission denied. Please re-open the folder.');
     55 +     32 +    });
     56 +     33 +
     57 +     34 +    it('defines PERMISSION_DENIED_WRITE message', () => {
     58 +     35 +      expect(ERROR_MESSAGES.PERMISSION_DENIED_WRITE).toBeDefined();
     59 +     36 +      expect(ERROR_MESSAGES.PERMISSION_DENIED_WRITE).toBe(
     60 +     37 +        'Write permission denied. Cannot create file.'
     61 +     38 +      );
     62 +     39 +    });
5728  63       40 +
5729     -     41 +  /* Layout */
5730     -     42 +  --header-height: 60px;
5731     -     43 +  --sidebar-width: 280px;
5732     -     44 +  --radius-lg: 16px;
5733     -     45 +  --radius-md: 12px;
5734     -     46 +  --radius-sm: 8px;
5735     -     47 +}
     64 +     41 +    it('defines PERMISSION_DENIED_SAVE message', () => {
     65 +     42 +      expect(ERROR_MESSAGES.PERMISSION_DENIED_SAVE).toBeDefined();
     66 +     43 +      expect(ERROR_MESSAGES.PERMISSION_DENIED_SAVE).toBe(
     67 +     44 +        'Write permission denied. Cannot save file.'
     68 +     45 +      );
     69 +     46 +    });
     70 +     47 +  });
5736  71       48 +
5737     -     49 +/* ==================== NEBULA LIGHT ==================== */
5738     -     50 +[data-theme="nebula-light"] {
5739     -     51 +  /* Core Backgrounds */
5740     -     52 +  --bg-universe: #f0f4f8;
5741     -     53 +  --bg-element: #ffffff;
5742     -     54 +
5743     -     55 +  /* Glass System */
5744     -     56 +  --bg-glass: rgba(255, 255, 255, 0.65);
5745     -     57 +  --bg-glass-heavy: rgba(255, 255, 255, 0.85);
5746     -     58 +  --bg-glass-light: rgba(0, 0, 0, 0.03);
5747     -     59 +
5748     -     60 +  /* Borders */
5749     -     61 +  --border-glass: rgba(0, 0, 0, 0.06);
5750     -     62 +  --border-glow: rgba(0, 188, 212, 0.4);
5751     -     63 +
5752     -     64 +  /* Accents */
5753     -     65 +  --accent-cyan: #00bcd4;
5754     -     66 +  --accent-violet: #9c27b0;
5755     -     67 +  --accent-gradient: linear-gradient(135deg, var(--accent-cyan), var(--accent-violet));
5756     -     68 +
5757     -     69 +  /* Text */
5758     -     70 +  --text-star: #1a202c;
5759     -     71 +  --text-stardust: #4a5568;
5760     -     72 +  --text-void: #ffffff;
5761     -     73 +
5762     -     74 +  /* Effects */
5763     -     75 +  --shadow-glass: 0 8px 24px rgba(149, 157, 165, 0.15);
5764     -     76 +  --shadow-neon: 0 0 10px rgba(0, 188, 212, 0.2);
5765     -     77 +  --blur-panel: blur(20px) saturate(150%);
5766     -     78 +}
5767     -     79  
     72 +     49 +  describe('File Operation Messages', () => {
     73 +     50 +    it('defines INVALID_FILENAME message', () => {
     74 +     51 +      expect(ERROR_MESSAGES.INVALID_FILENAME).toBeDefined();
     75 +     52 +      expect(ERROR_MESSAGES.INVALID_FILENAME).toBe(
     76 +     53 +        'Invalid filename. Please provide a valid name.'
     77 +     54 +      );
     78 +     55 +    });
     79 +     56 +
     80 +     57 +    it('defines INVALID_FILENAME_PROVIDED message', () => {
     81 +     58 +      expect(ERROR_MESSAGES.INVALID_FILENAME_PROVIDED).toBeDefined();
     82 +     59 +      expect(ERROR_MESSAGES.INVALID_FILENAME_PROVIDED).toBe('Invalid filename provided.');
     83 +     60 +    });
     84 +     61 +
     85 +     62 +    it('defines FILE_EXISTS as a function', () => {
     86 +     63 +      expect(ERROR_MESSAGES.FILE_EXISTS).toBeDefined();
     87 +     64 +      expect(typeof ERROR_MESSAGES.FILE_EXISTS).toBe('function');
     88 +     65 +    });
     89 +     66 +
     90 +     67 +    it('FILE_EXISTS returns dynamic message with filename', () => {
     91 +     68 +      expect(ERROR_MESSAGES.FILE_EXISTS('test.md')).toBe(
     92 +     69 +        'File "test.md" already exists. Please choose a different name.'
     93 +     70 +      );
     94 +     71 +      expect(ERROR_MESSAGES.FILE_EXISTS('README.md')).toBe(
     95 +     72 +        'File "README.md" already exists. Please choose a different name.'
     96 +     73 +      );
     97 +     74 +      expect(ERROR_MESSAGES.FILE_EXISTS('notes/document.md')).toBe(
     98 +     75 +        'File "notes/document.md" already exists. Please choose a different name.'
     99 +     76 +      );
    100 +     77 +    });
    101 +     78 +
    102 +     79 +    it('FILE_EXISTS handles edge cases', () => {
    103 +     80 +      expect(ERROR_MESSAGES.FILE_EXISTS('')).toBe(
    104 +     81 +        'File "" already exists. Please choose a different name.'
    105 +     82 +      );
    106 +     83 +      expect(ERROR_MESSAGES.FILE_EXISTS('file with spaces.md')).toBe(
    107 +     84 +        'File "file with spaces.md" already exists. Please choose a different name.'
    108 +     85 +      );
    109 +     86 +      expect(ERROR_MESSAGES.FILE_EXISTS('ÁâπÊÆäÊñáÂ≠ó.md')).toBe(
    110 +     87 +        'File "ÁâπÊÆäÊñáÂ≠ó.md" already exists. Please choose a different name.'
    111 +     88 +      );
    112 +     89 +    });
    113 +     90 +
    114 +     91 +    it('defines FILE_CREATE_FAILED message', () => {
    115 +     92 +      expect(ERROR_MESSAGES.FILE_CREATE_FAILED).toBeDefined();
    116 +     93 +      expect(ERROR_MESSAGES.FILE_CREATE_FAILED).toBe('Failed to create file.');
    117 +     94 +    });
    118 +     95 +
    119 +     96 +    it('defines FILE_SAVE_FAILED message', () => {
    120 +     97 +      expect(ERROR_MESSAGES.FILE_SAVE_FAILED).toBeDefined();
    121 +     98 +      expect(ERROR_MESSAGES.FILE_SAVE_FAILED).toBe('Failed to save file.');
    122 +     99 +    });
    123 +    100 +
    124 +    101 +    it('defines NO_FILE_HANDLE message', () => {
    125 +    102 +      expect(ERROR_MESSAGES.NO_FILE_HANDLE).toBeDefined();
    126 +    103 +      expect(ERROR_MESSAGES.NO_FILE_HANDLE).toBe('No file handle provided.');
    127 +    104 +    });
    128 +    105 +  });
    129 +    106 +
    130 +    107 +  describe('Directory Operation Messages', () => {
    131 +    108 +    it('defines INVALID_DIRECTORY_NAME message', () => {
    132 +    109 +      expect(ERROR_MESSAGES.INVALID_DIRECTORY_NAME).toBeDefined();
    133 +    110 +      expect(ERROR_MESSAGES.INVALID_DIRECTORY_NAME).toBe('Invalid directory name.');
    134 +    111 +    });
    135 +    112 +  });
    136 +    113 +
    137 +    114 +  describe('Validation Messages', () => {
    138 +    115 +    it('defines MAX_DEPTH_REACHED as a function', () => {
    139 +    116 +      expect(ERROR_MESSAGES.MAX_DEPTH_REACHED).toBeDefined();
    140 +    117 +      expect(typeof ERROR_MESSAGES.MAX_DEPTH_REACHED).toBe('function');
    141 +    118 +    });
    142 +    119 +
    143 +    120 +    it('MAX_DEPTH_REACHED returns dynamic message with depth and path', () => {
    144 +    121 +      expect(ERROR_MESSAGES.MAX_DEPTH_REACHED(10, '/docs/nested')).toBe(
    145 +    122 +        'Max depth 10 reached at: /docs/nested'
    146 +    123 +      );
    147 +    124 +      expect(ERROR_MESSAGES.MAX_DEPTH_REACHED(5, '/a/b/c/d/e')).toBe(
    148 +    125 +        'Max depth 5 reached at: /a/b/c/d/e'
    149 +    126 +      );
    150 +    127 +    });
    151 +    128 +
    152 +    129 +    it('MAX_DEPTH_REACHED handles edge cases', () => {
    153 +    130 +      expect(ERROR_MESSAGES.MAX_DEPTH_REACHED(0, '')).toBe('Max depth 0 reached at: ');
    154 +    131 +      expect(ERROR_MESSAGES.MAX_DEPTH_REACHED(100, 'root')).toBe('Max depth 100 reached at: root');
    155 +    132 +    });
    156 +    133 +
    157 +    134 +    it('defines MAX_FILES_REACHED as a function', () => {
    158 +    135 +      expect(ERROR_MESSAGES.MAX_FILES_REACHED).toBeDefined();
    159 +    136 +      expect(typeof ERROR_MESSAGES.MAX_FILES_REACHED).toBe('function');
    160 +    137 +    });
    161 +    138 +
    162 +    139 +    it('MAX_FILES_REACHED returns dynamic message with count', () => {
    163 +    140 +      expect(ERROR_MESSAGES.MAX_FILES_REACHED(1000)).toBe('Max files 1000 reached');
    164 +    141 +      expect(ERROR_MESSAGES.MAX_FILES_REACHED(500)).toBe('Max files 500 reached');
    165 +    142 +    });
    166 +    143 +
    167 +    144 +    it('MAX_FILES_REACHED handles edge cases', () => {
    168 +    145 +      expect(ERROR_MESSAGES.MAX_FILES_REACHED(0)).toBe('Max files 0 reached');
    169 +    146 +      expect(ERROR_MESSAGES.MAX_FILES_REACHED(999999)).toBe('Max files 999999 reached');
    170 +    147 +    });
    171 +    148 +  });
    172 +    149 +
    173 +    150 +  describe('ERROR_MESSAGES object structure', () => {
    174 +    151 +    it('contains all expected keys', () => {
    175 +    152 +      const expectedKeys = [
    176 +    153 +        'API_NOT_SUPPORTED',
    177 +    154 +        'NO_FOLDER_OPEN',
    178 +    155 +        'PERMISSION_DENIED',
    179 +    156 +        'PERMISSION_DENIED_WRITE',
    180 +    157 +        'PERMISSION_DENIED_SAVE',
    181 +    158 +        'INVALID_FILENAME',
    182 +    159 +        'INVALID_FILENAME_PROVIDED',
    183 +    160 +        'FILE_EXISTS',
    184 +    161 +        'FILE_CREATE_FAILED',
    185 +    162 +        'FILE_SAVE_FAILED',
    186 +    163 +        'NO_FILE_HANDLE',
    187 +    164 +        'INVALID_DIRECTORY_NAME',
    188 +    165 +        'MAX_DEPTH_REACHED',
    189 +    166 +        'MAX_FILES_REACHED',
    190 +    167 +      ];
    191 +    168 +
    192 +    169 +      expectedKeys.forEach(key => {
    193 +    170 +        expect(ERROR_MESSAGES).toHaveProperty(key);
    194 +    171 +      });
    195 +    172 +    });
    196 +    173 +
    197 +    174 +    it('is a frozen/constant object (immutable pattern)', () => {
    198 +    175 +      // Verify the object values cannot be accidentally changed
    199 +    176 +      const originalValue = ERROR_MESSAGES.NO_FOLDER_OPEN;
    200 +    177 +      expect(() => {
    201 +    178 +        ERROR_MESSAGES.NO_FOLDER_OPEN = 'hacked';
    202 +    179 +      }).not.toThrow(); // ES6 const doesn't prevent mutation, but good practice
    203 +    180 +      // Value should still work correctly
    204 +    181 +      expect(ERROR_MESSAGES.NO_FOLDER_OPEN).toBeDefined();
    205 +    182 +    });
    206 +    183 +  });
    207 +    184 +});
    208 +    185 +
    209 +    186 +describe('getErrorMessage()', () => {
    210 +    187 +  describe('String messages', () => {
    211 +    188 +    it('returns string message as-is', () => {
    212 +    189 +      const result = getErrorMessage(ERROR_MESSAGES.NO_FOLDER_OPEN);
    213 +    190 +      expect(result).toBe(ERROR_MESSAGES.NO_FOLDER_OPEN);
    214 +    191 +    });
    215 +    192 +
    216 +    193 +    it('returns string message with no params', () => {
    217 +    194 +      const result = getErrorMessage(ERROR_MESSAGES.PERMISSION_DENIED);
    218 +    195 +      expect(result).toBe(ERROR_MESSAGES.PERMISSION_DENIED);
    219 +    196 +    });
    220 +    197 +
    221 +    198 +    it('ignores extra params for string messages', () => {
    222 +    199 +      const result = getErrorMessage(ERROR_MESSAGES.API_NOT_SUPPORTED, 'extra', 'params');
    223 +    200 +      expect(result).toBe(ERROR_MESSAGES.API_NOT_SUPPORTED);
    224 +    201 +    });
    225 +    202 +  });
    226 +    203 +
    227 +    204 +  describe('Function messages', () => {
    228 +    205 +    it('calls function message with single param', () => {
    229 +    206 +      const result = getErrorMessage(ERROR_MESSAGES.MAX_FILES_REACHED, 1000);
    230 +    207 +      expect(result).toBe('Max files 1000 reached');
    231 +    208 +    });
    232 +    209 +
    233 +    210 +    it('calls function message with multiple params', () => {
    234 +    211 +      const result = getErrorMessage(ERROR_MESSAGES.MAX_DEPTH_REACHED, 10, '/docs/nested');
    235 +    212 +      expect(result).toBe('Max depth 10 reached at: /docs/nested');
    236 +    213 +    });
    237 +    214 +
    238 +    215 +    it('calls FILE_EXISTS function correctly', () => {
    239 +    216 +      const result = getErrorMessage(ERROR_MESSAGES.FILE_EXISTS, 'document.md');
    240 +    217 +      expect(result).toBe('File "document.md" already exists. Please choose a different name.');
    241 +    218 +    });
    242 +    219 +  });
    243 +    220 +
    244 +    221 +  describe('Edge cases', () => {
    245 +    222 +    it('handles direct string input', () => {
    246 +    223 +      const result = getErrorMessage('Custom error message');
    247 +    224 +      expect(result).toBe('Custom error message');
    248 +    225 +    });
    249 +    226 +
    250 +    227 +    it('handles empty string', () => {
    251 +    228 +      const result = getErrorMessage('');
    252 +    229 +      expect(result).toBe('');
    253 +    230 +    });
    254 +    231 +
    255 +    232 +    it('handles function that takes no params', () => {
    256 +    233 +      const noParamFn = () => 'No params needed';
    257 +    234 +      const result = getErrorMessage(noParamFn);
    258 +    235 +      expect(result).toBe('No params needed');
    259 +    236 +    });
    260 +    237 +
    261 +    238 +    it('handles function with rest params correctly', () => {
    262 +    239 +      const multiParamFn = (...args) => `Received ${args.length} args: ${args.join(', ')}`;
    263 +    240 +      const result = getErrorMessage(multiParamFn, 'a', 'b', 'c');
    264 +    241 +      expect(result).toBe('Received 3 args: a, b, c');
    265 +    242 +    });
    266 +    243 +  });
    267 +    244 +
    268 +    245 +  describe('Type handling', () => {
    269 +    246 +    it('correctly identifies function type', () => {
    270 +    247 +      const fn = (x) => `Value: ${x}`;
    271 +    248 +      const result = getErrorMessage(fn, 42);
    272 +    249 +      expect(result).toBe('Value: 42');
    273 +    250 +    });
    274 +    251 +
    275 +    252 +    it('correctly identifies string type', () => {
    276 +    253 +      const str = 'Simple string';
    277 +    254 +      const result = getErrorMessage(str);
    278 +    255 +      expect(result).toBe('Simple string');
    279 +    256 +    });
    280 +    257 +  });
    281 +    258 +});
    282 +    259 +
    283 +    260 +describe('Error message consistency', () => {
    284 +    261 +  it('string messages are properly formatted', () => {
    285 +    262 +    // Verify all string messages are non-empty strings
    286 +    263 +    const stringMessages = [
    287 +    264 +      ERROR_MESSAGES.API_NOT_SUPPORTED,
    288 +    265 +      ERROR_MESSAGES.NO_FOLDER_OPEN,
    289 +    266 +      ERROR_MESSAGES.PERMISSION_DENIED,
    290 +    267 +      ERROR_MESSAGES.PERMISSION_DENIED_WRITE,
    291 +    268 +      ERROR_MESSAGES.PERMISSION_DENIED_SAVE,
    292 +    269 +      ERROR_MESSAGES.INVALID_FILENAME,
    293 +    270 +      ERROR_MESSAGES.INVALID_FILENAME_PROVIDED,
    294 +    271 +      ERROR_MESSAGES.FILE_CREATE_FAILED,
    295 +    272 +      ERROR_MESSAGES.FILE_SAVE_FAILED,
    296 +    273 +      ERROR_MESSAGES.NO_FILE_HANDLE,
    297 +    274 +      ERROR_MESSAGES.INVALID_DIRECTORY_NAME,
    298 +    275 +    ];
    299 +    276 +
    300 +    277 +    stringMessages.forEach(msg => {
    301 +    278 +      expect(typeof msg).toBe('string');
    302 +    279 +      expect(msg.length).toBeGreaterThan(0);
    303 +    280 +    });
    304 +    281 +  });
    305 +    282 +
    306 +    283 +  it('function messages produce strings', () => {
    307 +    284 +    expect(typeof ERROR_MESSAGES.FILE_EXISTS('test.md')).toBe('string');
    308 +    285 +    expect(typeof ERROR_MESSAGES.MAX_DEPTH_REACHED(10, '/path')).toBe('string');
    309 +    286 +    expect(typeof ERROR_MESSAGES.MAX_FILES_REACHED(100)).toBe('string');
    310 +    287 +  });
    311 +    288 +
    312 +    289 +  it('all messages are non-empty strings', () => {
    313 +    290 +    Object.values(ERROR_MESSAGES).forEach(value => {
    314 +    291 +      if (typeof value === 'string') {
    315 +    292 +        expect(value.length).toBeGreaterThan(0);
    316 +    293 +      } else if (typeof value === 'function') {
    317 +    294 +        // Test with dummy values
    318 +    295 +        const result = value('test');
    319 +    296 +        expect(result.length).toBeGreaterThan(0);
    320 +    297 +      }
    321 +    298 +    });
    322 +    299 +  });
    323 +    300 +});
    324 +    301  
5768 325  
5769 326  ```
5770 327  
@@ -5776,7 +333,7 @@ Please review these changes for:
5776 333  
5777 334  ### üîç Code Quality
5778 335  - [ ] **Linting Compliance**: No unused imports/variables, proper formatting
5779     -- [ ] **Type Safety**: Proper typing throughout (TypeScript/JSDoc)
    336 +- [ ] **Type Safety**: Proper typing throughout (TypeScript/Python type hints)
5780 337  - [ ] **Best Practices**: Framework-specific conventions and patterns
5781 338  - [ ] **Performance**: Efficient algorithms, proper memoization
5782 339  - [ ] **Documentation**: Clear comments and function descriptions
@@ -5809,5 +366,5 @@ Please provide specific feedback on:
5809 366  5. Documentation and maintainability
5810 367  
5811 368  ---
5812     -*Generated by AI Visual Code Review v1.0.0*
5813     -*Files processed: 11/11 | Errors: 0 | Generated: 2025-12-10T06:01:32.630Z*
    369 +*Generated by AI Visual Code Review v2.0 - Unified Export Script*
    370 +*Files processed: 1/1 | Errors: 0 | Generated: 2025-12-16T05:43:01.643Z*
5814 371  

```


### üìÑ `script.js`

**Type:** JavaScript Source File üü®

```diff
@@ -1781,7 +1781,14 @@ Wrap up your thoughts and include a call to action.
1781 1781    function toggleSidebar() {
1782 1782      fileBrowser.classList.toggle('collapsed');
1783 1783      const isCollapsed = fileBrowser.classList.contains('collapsed');
1784     -    storageManager.set('sidebarCollapsed', isCollapsed);
    1784 +    storageManager.set('sidebarCollapsed', isCollapsed.toString());
    1785 +
    1786 +    // Recalculate split view layout after sidebar toggle
    1787 +    setTimeout(() => {
    1788 +      if (mainContent.classList.contains('split-view-active')) {
    1789 +        applySplitRatio();
    1790 +      }
    1791 +    }, 300); // Wait for CSS transition to complete
1785 1792    }
1786 1793  
1787 1794    // Attach event listeners to BOTH toggle buttons
1788 1795  

```


### üìÑ `style.css`

**Type:** Stylesheet üé®

```diff
@@ -1236,9 +1236,17 @@ body {
1236 1236    width: 0 !important;
1237 1237    min-width: 0 !important;
1238 1238    padding: 0 !important;
1239     -  /* Hide content */
1240 1239    border-right: none;
1241     -  opacity: 0;
    1240 +  overflow: hidden;
    1241 +  /* Hide resize handle when collapsed */
    1242 +}
    1243 +
    1244 +.file-browser.collapsed .resize-handle {
    1245 +  display: none;
    1246 +}
    1247 +
    1248 +.file-browser.collapsed * {
    1249 +  visibility: hidden;
1242 1250  }
1243 1251  
1244 1252  .file-browser.resizing {
1245 1253  

```

---

## ü§ñ AI Review Checklist

Please review these changes for:

### üîç Code Quality
- [ ] **Linting Compliance**: No unused imports/variables, proper formatting
- [ ] **Type Safety**: Proper typing throughout (TypeScript/Python type hints)
- [ ] **Best Practices**: Framework-specific conventions and patterns
- [ ] **Performance**: Efficient algorithms, proper memoization
- [ ] **Documentation**: Clear comments and function descriptions

### üêõ Potential Issues
- [ ] **Runtime Errors**: Type mismatches, null/undefined handling
- [ ] **Logic Bugs**: Incorrect calculations, edge cases
- [ ] **Memory Leaks**: Cleanup in lifecycle methods, event listeners
- [ ] **Error Handling**: Proper try-catch blocks, user feedback
- [ ] **Accessibility**: ARIA labels, keyboard navigation, screen readers

### üîí Security & Data
- [ ] **Input Validation**: Sanitization, XSS prevention, SQL injection
- [ ] **Authentication**: Proper access controls and permissions
- [ ] **Privacy**: No sensitive data exposure in logs/client
- [ ] **Dependencies**: Updated packages, vulnerability checks

### üì± UX/UI
- [ ] **Responsive Design**: Mobile/desktop/tablet compatibility
- [ ] **Loading States**: Proper feedback during async operations
- [ ] **Error Messages**: User-friendly error handling and recovery
- [ ] **Performance**: Fast loading, smooth animations

### üí° Suggestions & Improvements
Please provide specific feedback on:
1. Code organization and structure improvements
2. Performance optimization opportunities
3. Security considerations and hardening
4. Testing coverage and strategies
5. Documentation and maintainability

---
*Generated by AI Visual Code Review v2.0 - Unified Export Script*
*Files processed: 3/3 | Errors: 0 | Generated: 2025-12-16T05:53:13.016Z*
